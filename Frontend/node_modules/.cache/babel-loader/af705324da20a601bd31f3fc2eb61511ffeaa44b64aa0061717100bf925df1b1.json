{"ast":null,"code":"import _objectSpread from \"/home/rcts/Email-differ/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _defineProperty from \"/home/rcts/Email-differ/Frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { SignatureV4S3Express } from \"@aws-sdk/middleware-sdk-s3\";\nimport { signatureV4aContainer } from \"@smithy/signature-v4\";\nimport { signatureV4CrtContainer } from \"./signature-v4-crt-container\";\nexport class SignatureV4MultiRegion {\n  static sigv4aDependency() {\n    if (typeof signatureV4CrtContainer.CrtSignerV4 === \"function\") {\n      return \"crt\";\n    } else if (typeof signatureV4aContainer.SignatureV4a === \"function\") {\n      return \"js\";\n    }\n    return \"none\";\n  }\n  constructor(options) {\n    _defineProperty(this, \"sigv4aSigner\", void 0);\n    _defineProperty(this, \"sigv4Signer\", void 0);\n    _defineProperty(this, \"signerOptions\", void 0);\n    this.sigv4Signer = new SignatureV4S3Express(options);\n    this.signerOptions = options;\n  }\n  async sign(requestToSign) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (options.signingRegion === \"*\") {\n      return this.getSigv4aSigner().sign(requestToSign, options);\n    }\n    return this.sigv4Signer.sign(requestToSign, options);\n  }\n  async signWithCredentials(requestToSign, credentials) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    if (options.signingRegion === \"*\") {\n      const signer = this.getSigv4aSigner();\n      const CrtSignerV4 = signatureV4CrtContainer.CrtSignerV4;\n      if (CrtSignerV4 && signer instanceof CrtSignerV4) {\n        return signer.signWithCredentials(requestToSign, credentials, options);\n      } else {\n        throw new Error(\"signWithCredentials with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. \" + \"Please check whether you have installed the \\\"@aws-sdk/signature-v4-crt\\\" package explicitly. \" + \"You must also register the package by calling [require(\\\"@aws-sdk/signature-v4-crt\\\");] \" + \"or an ESM equivalent such as [import \\\"@aws-sdk/signature-v4-crt\\\";]. \" + \"For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt\");\n      }\n    }\n    return this.sigv4Signer.signWithCredentials(requestToSign, credentials, options);\n  }\n  async presign(originalRequest) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (options.signingRegion === \"*\") {\n      const signer = this.getSigv4aSigner();\n      const CrtSignerV4 = signatureV4CrtContainer.CrtSignerV4;\n      if (CrtSignerV4 && signer instanceof CrtSignerV4) {\n        return signer.presign(originalRequest, options);\n      } else {\n        throw new Error(\"presign with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. \" + \"Please check whether you have installed the \\\"@aws-sdk/signature-v4-crt\\\" package explicitly. \" + \"You must also register the package by calling [require(\\\"@aws-sdk/signature-v4-crt\\\");] \" + \"or an ESM equivalent such as [import \\\"@aws-sdk/signature-v4-crt\\\";]. \" + \"For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt\");\n      }\n    }\n    return this.sigv4Signer.presign(originalRequest, options);\n  }\n  async presignWithCredentials(originalRequest, credentials) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    if (options.signingRegion === \"*\") {\n      throw new Error(\"Method presignWithCredentials is not supported for [signingRegion=*].\");\n    }\n    return this.sigv4Signer.presignWithCredentials(originalRequest, credentials, options);\n  }\n  getSigv4aSigner() {\n    if (!this.sigv4aSigner) {\n      const CrtSignerV4 = signatureV4CrtContainer.CrtSignerV4;\n      const JsSigV4aSigner = signatureV4aContainer.SignatureV4a;\n      if (this.signerOptions.runtime === \"node\") {\n        if (!CrtSignerV4 && !JsSigV4aSigner) {\n          throw new Error(\"Neither CRT nor JS SigV4a implementation is available. \" + \"Please load either @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a. \" + \"For more information please go to \" + \"https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt\");\n        }\n        if (CrtSignerV4 && typeof CrtSignerV4 === \"function\") {\n          this.sigv4aSigner = new CrtSignerV4(_objectSpread(_objectSpread({}, this.signerOptions), {}, {\n            signingAlgorithm: 1\n          }));\n        } else if (JsSigV4aSigner && typeof JsSigV4aSigner === \"function\") {\n          this.sigv4aSigner = new JsSigV4aSigner(_objectSpread({}, this.signerOptions));\n        } else {\n          throw new Error(\"Available SigV4a implementation is not a valid constructor. \" + \"Please ensure you've properly imported @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a.\" + \"For more information please go to \" + \"https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt\");\n        }\n      } else {\n        if (!JsSigV4aSigner || typeof JsSigV4aSigner !== \"function\") {\n          throw new Error(\"JS SigV4a implementation is not available or not a valid constructor. \" + \"Please check whether you have installed the @aws-sdk/signature-v4a package explicitly. The CRT implementation is not available for browsers. \" + \"You must also register the package by calling [require('@aws-sdk/signature-v4a');] \" + \"or an ESM equivalent such as [import '@aws-sdk/signature-v4a';]. \" + \"For more information please go to \" + \"https://github.com/aws/aws-sdk-js-v3#using-javascript-non-crt-implementation-of-sigv4a\");\n        }\n        this.sigv4aSigner = new JsSigV4aSigner(_objectSpread({}, this.signerOptions));\n      }\n    }\n    return this.sigv4aSigner;\n  }\n}","map":{"version":3,"names":["SignatureV4S3Express","signatureV4aContainer","signatureV4CrtContainer","SignatureV4MultiRegion","sigv4aDependency","CrtSignerV4","SignatureV4a","constructor","options","_defineProperty","sigv4Signer","signerOptions","sign","requestToSign","arguments","length","undefined","signingRegion","getSigv4aSigner","signWithCredentials","credentials","signer","Error","presign","originalRequest","presignWithCredentials","sigv4aSigner","JsSigV4aSigner","runtime","_objectSpread","signingAlgorithm"],"sources":["/home/rcts/Email-differ/Frontend/node_modules/@aws-sdk/signature-v4-multi-region/dist-es/SignatureV4MultiRegion.js"],"sourcesContent":["import { SignatureV4S3Express } from \"@aws-sdk/middleware-sdk-s3\";\nimport { signatureV4aContainer, } from \"@smithy/signature-v4\";\nimport { signatureV4CrtContainer } from \"./signature-v4-crt-container\";\nexport class SignatureV4MultiRegion {\n    sigv4aSigner;\n    sigv4Signer;\n    signerOptions;\n    static sigv4aDependency() {\n        if (typeof signatureV4CrtContainer.CrtSignerV4 === \"function\") {\n            return \"crt\";\n        }\n        else if (typeof signatureV4aContainer.SignatureV4a === \"function\") {\n            return \"js\";\n        }\n        return \"none\";\n    }\n    constructor(options) {\n        this.sigv4Signer = new SignatureV4S3Express(options);\n        this.signerOptions = options;\n    }\n    async sign(requestToSign, options = {}) {\n        if (options.signingRegion === \"*\") {\n            return this.getSigv4aSigner().sign(requestToSign, options);\n        }\n        return this.sigv4Signer.sign(requestToSign, options);\n    }\n    async signWithCredentials(requestToSign, credentials, options = {}) {\n        if (options.signingRegion === \"*\") {\n            const signer = this.getSigv4aSigner();\n            const CrtSignerV4 = signatureV4CrtContainer.CrtSignerV4;\n            if (CrtSignerV4 && signer instanceof CrtSignerV4) {\n                return signer.signWithCredentials(requestToSign, credentials, options);\n            }\n            else {\n                throw new Error(`signWithCredentials with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. ` +\n                    `Please check whether you have installed the \"@aws-sdk/signature-v4-crt\" package explicitly. ` +\n                    `You must also register the package by calling [require(\"@aws-sdk/signature-v4-crt\");] ` +\n                    `or an ESM equivalent such as [import \"@aws-sdk/signature-v4-crt\";]. ` +\n                    `For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);\n            }\n        }\n        return this.sigv4Signer.signWithCredentials(requestToSign, credentials, options);\n    }\n    async presign(originalRequest, options = {}) {\n        if (options.signingRegion === \"*\") {\n            const signer = this.getSigv4aSigner();\n            const CrtSignerV4 = signatureV4CrtContainer.CrtSignerV4;\n            if (CrtSignerV4 && signer instanceof CrtSignerV4) {\n                return signer.presign(originalRequest, options);\n            }\n            else {\n                throw new Error(`presign with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. ` +\n                    `Please check whether you have installed the \"@aws-sdk/signature-v4-crt\" package explicitly. ` +\n                    `You must also register the package by calling [require(\"@aws-sdk/signature-v4-crt\");] ` +\n                    `or an ESM equivalent such as [import \"@aws-sdk/signature-v4-crt\";]. ` +\n                    `For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);\n            }\n        }\n        return this.sigv4Signer.presign(originalRequest, options);\n    }\n    async presignWithCredentials(originalRequest, credentials, options = {}) {\n        if (options.signingRegion === \"*\") {\n            throw new Error(\"Method presignWithCredentials is not supported for [signingRegion=*].\");\n        }\n        return this.sigv4Signer.presignWithCredentials(originalRequest, credentials, options);\n    }\n    getSigv4aSigner() {\n        if (!this.sigv4aSigner) {\n            const CrtSignerV4 = signatureV4CrtContainer.CrtSignerV4;\n            const JsSigV4aSigner = signatureV4aContainer.SignatureV4a;\n            if (this.signerOptions.runtime === \"node\") {\n                if (!CrtSignerV4 && !JsSigV4aSigner) {\n                    throw new Error(\"Neither CRT nor JS SigV4a implementation is available. \" +\n                        \"Please load either @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a. \" +\n                        \"For more information please go to \" +\n                        \"https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt\");\n                }\n                if (CrtSignerV4 && typeof CrtSignerV4 === \"function\") {\n                    this.sigv4aSigner = new CrtSignerV4({\n                        ...this.signerOptions,\n                        signingAlgorithm: 1,\n                    });\n                }\n                else if (JsSigV4aSigner && typeof JsSigV4aSigner === \"function\") {\n                    this.sigv4aSigner = new JsSigV4aSigner({\n                        ...this.signerOptions,\n                    });\n                }\n                else {\n                    throw new Error(\"Available SigV4a implementation is not a valid constructor. \" +\n                        \"Please ensure you've properly imported @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a.\" +\n                        \"For more information please go to \" +\n                        \"https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt\");\n                }\n            }\n            else {\n                if (!JsSigV4aSigner || typeof JsSigV4aSigner !== \"function\") {\n                    throw new Error(\"JS SigV4a implementation is not available or not a valid constructor. \" +\n                        \"Please check whether you have installed the @aws-sdk/signature-v4a package explicitly. The CRT implementation is not available for browsers. \" +\n                        \"You must also register the package by calling [require('@aws-sdk/signature-v4a');] \" +\n                        \"or an ESM equivalent such as [import '@aws-sdk/signature-v4a';]. \" +\n                        \"For more information please go to \" +\n                        \"https://github.com/aws/aws-sdk-js-v3#using-javascript-non-crt-implementation-of-sigv4a\");\n                }\n                this.sigv4aSigner = new JsSigV4aSigner({\n                    ...this.signerOptions,\n                });\n            }\n        }\n        return this.sigv4aSigner;\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}