{"ast":null,"code":"import { HttpResponse } from \"@smithy/protocol-http\";\nimport { headStream, splitStream } from \"@smithy/util-stream\";\nconst THROW_IF_EMPTY_BODY = {\n  CopyObjectCommand: true,\n  UploadPartCopyCommand: true,\n  CompleteMultipartUploadCommand: true\n};\nconst MAX_BYTES_TO_INSPECT = 3000;\nexport const throw200ExceptionsMiddleware = config => (next, context) => async args => {\n  var _bodyCopy;\n  const result = await next(args);\n  const {\n    response\n  } = result;\n  if (!HttpResponse.isInstance(response)) {\n    return result;\n  }\n  const {\n    statusCode,\n    body: sourceBody\n  } = response;\n  if (statusCode < 200 || statusCode >= 300) {\n    return result;\n  }\n  const isSplittableStream = typeof (sourceBody === null || sourceBody === void 0 ? void 0 : sourceBody.stream) === \"function\" || typeof (sourceBody === null || sourceBody === void 0 ? void 0 : sourceBody.pipe) === \"function\" || typeof (sourceBody === null || sourceBody === void 0 ? void 0 : sourceBody.tee) === \"function\";\n  if (!isSplittableStream) {\n    return result;\n  }\n  let bodyCopy = sourceBody;\n  let body = sourceBody;\n  if (sourceBody && typeof sourceBody === \"object\" && !(sourceBody instanceof Uint8Array)) {\n    [bodyCopy, body] = await splitStream(sourceBody);\n  }\n  response.body = body;\n  const bodyBytes = await collectBody(bodyCopy, {\n    streamCollector: async stream => {\n      return headStream(stream, MAX_BYTES_TO_INSPECT);\n    }\n  });\n  if (typeof ((_bodyCopy = bodyCopy) === null || _bodyCopy === void 0 ? void 0 : _bodyCopy.destroy) === \"function\") {\n    bodyCopy.destroy();\n  }\n  const bodyStringTail = config.utf8Encoder(bodyBytes.subarray(bodyBytes.length - 16));\n  if (bodyBytes.length === 0 && THROW_IF_EMPTY_BODY[context.commandName]) {\n    const err = new Error(\"S3 aborted request\");\n    err.name = \"InternalError\";\n    throw err;\n  }\n  if (bodyStringTail && bodyStringTail.endsWith(\"</Error>\")) {\n    response.statusCode = 400;\n  }\n  return result;\n};\nconst collectBody = function () {\n  let streamBody = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Uint8Array();\n  let context = arguments.length > 1 ? arguments[1] : undefined;\n  if (streamBody instanceof Uint8Array) {\n    return Promise.resolve(streamBody);\n  }\n  return context.streamCollector(streamBody) || Promise.resolve(new Uint8Array());\n};\nexport const throw200ExceptionsMiddlewareOptions = {\n  relation: \"after\",\n  toMiddleware: \"deserializerMiddleware\",\n  tags: [\"THROW_200_EXCEPTIONS\", \"S3\"],\n  name: \"throw200ExceptionsMiddleware\",\n  override: true\n};\nexport const getThrow200ExceptionsPlugin = config => ({\n  applyToStack: clientStack => {\n    clientStack.addRelativeTo(throw200ExceptionsMiddleware(config), throw200ExceptionsMiddlewareOptions);\n  }\n});","map":{"version":3,"names":["HttpResponse","headStream","splitStream","THROW_IF_EMPTY_BODY","CopyObjectCommand","UploadPartCopyCommand","CompleteMultipartUploadCommand","MAX_BYTES_TO_INSPECT","throw200ExceptionsMiddleware","config","next","context","args","_bodyCopy","result","response","isInstance","statusCode","body","sourceBody","isSplittableStream","stream","pipe","tee","bodyCopy","Uint8Array","bodyBytes","collectBody","streamCollector","destroy","bodyStringTail","utf8Encoder","subarray","length","commandName","err","Error","name","endsWith","streamBody","arguments","undefined","Promise","resolve","throw200ExceptionsMiddlewareOptions","relation","toMiddleware","tags","override","getThrow200ExceptionsPlugin","applyToStack","clientStack","addRelativeTo"],"sources":["/home/rcts/Email-differ/Frontend/node_modules/@aws-sdk/middleware-sdk-s3/dist-es/throw-200-exceptions.js"],"sourcesContent":["import { HttpResponse } from \"@smithy/protocol-http\";\nimport { headStream, splitStream } from \"@smithy/util-stream\";\nconst THROW_IF_EMPTY_BODY = {\n    CopyObjectCommand: true,\n    UploadPartCopyCommand: true,\n    CompleteMultipartUploadCommand: true,\n};\nconst MAX_BYTES_TO_INSPECT = 3000;\nexport const throw200ExceptionsMiddleware = (config) => (next, context) => async (args) => {\n    const result = await next(args);\n    const { response } = result;\n    if (!HttpResponse.isInstance(response)) {\n        return result;\n    }\n    const { statusCode, body: sourceBody } = response;\n    if (statusCode < 200 || statusCode >= 300) {\n        return result;\n    }\n    const isSplittableStream = typeof sourceBody?.stream === \"function\" ||\n        typeof sourceBody?.pipe === \"function\" ||\n        typeof sourceBody?.tee === \"function\";\n    if (!isSplittableStream) {\n        return result;\n    }\n    let bodyCopy = sourceBody;\n    let body = sourceBody;\n    if (sourceBody && typeof sourceBody === \"object\" && !(sourceBody instanceof Uint8Array)) {\n        [bodyCopy, body] = await splitStream(sourceBody);\n    }\n    response.body = body;\n    const bodyBytes = await collectBody(bodyCopy, {\n        streamCollector: async (stream) => {\n            return headStream(stream, MAX_BYTES_TO_INSPECT);\n        },\n    });\n    if (typeof bodyCopy?.destroy === \"function\") {\n        bodyCopy.destroy();\n    }\n    const bodyStringTail = config.utf8Encoder(bodyBytes.subarray(bodyBytes.length - 16));\n    if (bodyBytes.length === 0 && THROW_IF_EMPTY_BODY[context.commandName]) {\n        const err = new Error(\"S3 aborted request\");\n        err.name = \"InternalError\";\n        throw err;\n    }\n    if (bodyStringTail && bodyStringTail.endsWith(\"</Error>\")) {\n        response.statusCode = 400;\n    }\n    return result;\n};\nconst collectBody = (streamBody = new Uint8Array(), context) => {\n    if (streamBody instanceof Uint8Array) {\n        return Promise.resolve(streamBody);\n    }\n    return context.streamCollector(streamBody) || Promise.resolve(new Uint8Array());\n};\nexport const throw200ExceptionsMiddlewareOptions = {\n    relation: \"after\",\n    toMiddleware: \"deserializerMiddleware\",\n    tags: [\"THROW_200_EXCEPTIONS\", \"S3\"],\n    name: \"throw200ExceptionsMiddleware\",\n    override: true,\n};\nexport const getThrow200ExceptionsPlugin = (config) => ({\n    applyToStack: (clientStack) => {\n        clientStack.addRelativeTo(throw200ExceptionsMiddleware(config), throw200ExceptionsMiddlewareOptions);\n    },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}