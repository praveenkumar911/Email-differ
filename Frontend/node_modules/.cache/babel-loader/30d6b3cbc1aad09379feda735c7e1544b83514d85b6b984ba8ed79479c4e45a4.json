{"ast":null,"code":"import _defineProperty from \"/home/rcts/Email-differ/Frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { RETRY_MODES } from \"./config\";\nimport { DefaultRateLimiter } from \"./DefaultRateLimiter\";\nimport { StandardRetryStrategy } from \"./StandardRetryStrategy\";\nexport class AdaptiveRetryStrategy {\n  constructor(maxAttemptsProvider, options) {\n    _defineProperty(this, \"maxAttemptsProvider\", void 0);\n    _defineProperty(this, \"rateLimiter\", void 0);\n    _defineProperty(this, \"standardRetryStrategy\", void 0);\n    _defineProperty(this, \"mode\", RETRY_MODES.ADAPTIVE);\n    this.maxAttemptsProvider = maxAttemptsProvider;\n    const {\n      rateLimiter\n    } = options !== null && options !== void 0 ? options : {};\n    this.rateLimiter = rateLimiter !== null && rateLimiter !== void 0 ? rateLimiter : new DefaultRateLimiter();\n    this.standardRetryStrategy = new StandardRetryStrategy(maxAttemptsProvider);\n  }\n  async acquireInitialRetryToken(retryTokenScope) {\n    await this.rateLimiter.getSendToken();\n    return this.standardRetryStrategy.acquireInitialRetryToken(retryTokenScope);\n  }\n  async refreshRetryTokenForRetry(tokenToRenew, errorInfo) {\n    this.rateLimiter.updateClientSendingRate(errorInfo);\n    return this.standardRetryStrategy.refreshRetryTokenForRetry(tokenToRenew, errorInfo);\n  }\n  recordSuccess(token) {\n    this.rateLimiter.updateClientSendingRate({});\n    this.standardRetryStrategy.recordSuccess(token);\n  }\n}","map":{"version":3,"names":["RETRY_MODES","DefaultRateLimiter","StandardRetryStrategy","AdaptiveRetryStrategy","constructor","maxAttemptsProvider","options","_defineProperty","ADAPTIVE","rateLimiter","standardRetryStrategy","acquireInitialRetryToken","retryTokenScope","getSendToken","refreshRetryTokenForRetry","tokenToRenew","errorInfo","updateClientSendingRate","recordSuccess","token"],"sources":["/home/rcts/Email-differ/Frontend/node_modules/@smithy/util-retry/dist-es/AdaptiveRetryStrategy.js"],"sourcesContent":["import { RETRY_MODES } from \"./config\";\nimport { DefaultRateLimiter } from \"./DefaultRateLimiter\";\nimport { StandardRetryStrategy } from \"./StandardRetryStrategy\";\nexport class AdaptiveRetryStrategy {\n    maxAttemptsProvider;\n    rateLimiter;\n    standardRetryStrategy;\n    mode = RETRY_MODES.ADAPTIVE;\n    constructor(maxAttemptsProvider, options) {\n        this.maxAttemptsProvider = maxAttemptsProvider;\n        const { rateLimiter } = options ?? {};\n        this.rateLimiter = rateLimiter ?? new DefaultRateLimiter();\n        this.standardRetryStrategy = new StandardRetryStrategy(maxAttemptsProvider);\n    }\n    async acquireInitialRetryToken(retryTokenScope) {\n        await this.rateLimiter.getSendToken();\n        return this.standardRetryStrategy.acquireInitialRetryToken(retryTokenScope);\n    }\n    async refreshRetryTokenForRetry(tokenToRenew, errorInfo) {\n        this.rateLimiter.updateClientSendingRate(errorInfo);\n        return this.standardRetryStrategy.refreshRetryTokenForRetry(tokenToRenew, errorInfo);\n    }\n    recordSuccess(token) {\n        this.rateLimiter.updateClientSendingRate({});\n        this.standardRetryStrategy.recordSuccess(token);\n    }\n}\n"],"mappings":";AAAA,SAASA,WAAW,QAAQ,UAAU;AACtC,SAASC,kBAAkB,QAAQ,sBAAsB;AACzD,SAASC,qBAAqB,QAAQ,yBAAyB;AAC/D,OAAO,MAAMC,qBAAqB,CAAC;EAK/BC,WAAWA,CAACC,mBAAmB,EAAEC,OAAO,EAAE;IAAAC,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA,eADnCP,WAAW,CAACQ,QAAQ;IAEvB,IAAI,CAACH,mBAAmB,GAAGA,mBAAmB;IAC9C,MAAM;MAAEI;IAAY,CAAC,GAAGH,OAAO,aAAPA,OAAO,cAAPA,OAAO,GAAI,CAAC,CAAC;IACrC,IAAI,CAACG,WAAW,GAAGA,WAAW,aAAXA,WAAW,cAAXA,WAAW,GAAI,IAAIR,kBAAkB,CAAC,CAAC;IAC1D,IAAI,CAACS,qBAAqB,GAAG,IAAIR,qBAAqB,CAACG,mBAAmB,CAAC;EAC/E;EACA,MAAMM,wBAAwBA,CAACC,eAAe,EAAE;IAC5C,MAAM,IAAI,CAACH,WAAW,CAACI,YAAY,CAAC,CAAC;IACrC,OAAO,IAAI,CAACH,qBAAqB,CAACC,wBAAwB,CAACC,eAAe,CAAC;EAC/E;EACA,MAAME,yBAAyBA,CAACC,YAAY,EAAEC,SAAS,EAAE;IACrD,IAAI,CAACP,WAAW,CAACQ,uBAAuB,CAACD,SAAS,CAAC;IACnD,OAAO,IAAI,CAACN,qBAAqB,CAACI,yBAAyB,CAACC,YAAY,EAAEC,SAAS,CAAC;EACxF;EACAE,aAAaA,CAACC,KAAK,EAAE;IACjB,IAAI,CAACV,WAAW,CAACQ,uBAAuB,CAAC,CAAC,CAAC,CAAC;IAC5C,IAAI,CAACP,qBAAqB,CAACQ,aAAa,CAACC,KAAK,CAAC;EACnD;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}