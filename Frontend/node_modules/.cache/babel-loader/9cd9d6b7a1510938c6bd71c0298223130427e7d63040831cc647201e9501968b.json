{"ast":null,"code":"import _objectSpread from\"/home/rcts/Email-differ/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _taggedTemplateLiteral from\"/home/rcts/Email-differ/Frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import React,{useEffect,useState,useRef}from\"react\";import{useSearchParams}from\"react-router-dom\";import API,{validateToken,submitForm,deferForm,optOut,searchOrgs}from\"../../api/apiService\";import{auth,signInWithPhoneNumber,RecaptchaVerifier}from\"../../firebase\";import{GithubAuthProvider,signInWithPopup,getAdditionalUserInfo,signOut}from\"firebase/auth\";import Swal from\"sweetalert2\";import{Box,Paper,Typography,TextField,Button,FormControl,InputLabel,Select,MenuItem,CircularProgress,Stack,Divider,Autocomplete,Fade}from\"@mui/material\";import{keyframes}from\"@mui/system\";import{MuiTelInput}from'mui-tel-input';import{parsePhoneNumber,isValidPhoneFormat}from\"../../utils/phoneUtils\";import logo1 from\"../../assets/badal_logo.png\";import logo2 from\"../../assets/c4gt_logo.png\";import{FiCheckCircle,FiAlertTriangle,FiXCircle,FiClock,FiLink,FiMail,FiSave,FiLock,FiInfo,FiSlash,FiUserCheck}from\"react-icons/fi\";// âœ… Shake animation for skill limit\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const shake=keyframes(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  0% { transform: translateX(0); }\\n  20% { transform: translateX(-4px); }\\n  40% { transform: translateX(4px); }\\n  60% { transform: translateX(-3px); }\\n  80% { transform: translateX(3px); }\\n  100% { transform: translateX(0); }\\n\"])));// âœ… Role List (matching SignUpPage)\nconst ROLES=[{value:\"R004\",label:\"Developer\"}];// âœ… Role codes to backend strings (consistent with SignUpPage)\n// eslint-disable-next-line no-unused-vars\nconst ROLE_MAP={R004:\"Developer\"};const GENDERS=[\"Male\",\"Female\",\"Other\",\"Prefer not to say\"];// âœ… Tech Skills (same as SignUpPage)\nconst SKILLS=[\"Frontend Development\",\"Backend Development\",\"Full Stack Development\",\"UI/UX Design\",\"Data Science\",\"Machine Learning\",\"DevOps\",\"Cloud Computing\",\"Cybersecurity\",\"Mobile App Development\",\"Blockchain\",\"Product Management\",\"Public Policy\",\"Research\",\"Technical Writing\"];// âœ… Validation regex (available for future use)\n// eslint-disable-next-line no-unused-vars\nconst githubRegex=/^https:\\/\\/(www\\.)?github\\.com\\/[A-Za-z0-9_-]+\\/?$/;// eslint-disable-next-line no-unused-vars\nconst linkedinRegex=/^https:\\/\\/(www\\.)?linkedin\\.com\\/in\\/[A-Za-z0-9_-]+\\/?$/;const DISCORD_REDIRECT=\"https://pl-app.iiit.ac.in/rcts/account-setup/discord-callback\";// const DISCORD_INVITE = \"https://discord.gg/BsbzbUHz\";\n//const DISCORD_REDIRECT = \"http://127.0.0.1:3000/rcts/codeforgovtech/discord-callback\";\nconst DISCORD_INVITE=\"https://discord.gg/BsbzbUHz\";// âœ… Generate OAuth state for CSRF protection\nconst generateOAuthState=()=>{return Math.random().toString(36).substring(2)+Date.now().toString(36);};const DISCORD_OAUTH=state=>\"https://discord.com/oauth2/authorize\"+\"?client_id=1450787791834447874\"+\"&redirect_uri=\"+encodeURIComponent(DISCORD_REDIRECT)+\"&response_type=code\"+\"&scope=identify%20guilds\"+\"&state=\"+encodeURIComponent(state);// LinkedIn OAuth removed: collecting URL via input field instead\nconst UpdateForm=()=>{var _formData$organizatio4,_formData$organizatio5,_formData$organizatio6,_formData$organizatio7;const[searchParams]=useSearchParams();const token=searchParams.get(\"token\");const[formData,setFormData]=useState({fullName:\"\",email:\"\",phone:\"\",gender:\"\",organization:null,role:\"\",skills:[],githubId:\"\",githubUrl:\"\",discordId:\"\",linkedinId:\"\"});const[phoneVerification,setPhoneVerification]=useState({isVerified:false,showOtpInput:false,otp:\"\",isProcessing:false,firebaseToken:null// âœ… Store Firebase token for form submission\n});const[status,setStatus]=useState(\"loading\");const[errorMessage,setErrorMessage]=useState(\"\");const[interested,setInterested]=useState(null);const[optoutReason,setOptoutReason]=useState(\"\");const[optoutProcessing,setOptoutProcessing]=useState(false);const[timer,setTimer]=useState(0);// ---------------- ORG STATE ----------------\nconst[orgLoadError,setOrgLoadError]=useState(false);const[showCustomOrg,setShowCustomOrg]=useState(false);const[orgOptions,setOrgOptions]=useState([]);const[orgLoading,setOrgLoading]=useState(false);const isDirtyRef=useRef(false);const[fadeOut,setFadeOut]=useState(false);const[countdown,setCountdown]=useState(5);const[timeRemaining,setTimeRemaining]=useState(600);// 10 minutes in seconds\nconst[isSubmitting,setIsSubmitting]=useState(false);// âœ… Prevent double submit\nconst recaptchaCleanedUp=useRef(false);// âœ… Track recaptcha cleanup\nconst recaptchaContainerIdRef=useRef(0);// âœ… Track unique container IDs\nconst recaptchaWidgetIdRef=useRef(null);// âœ… Track widget ID for proper cleanup\nconst[shakeSkills,setShakeSkills]=useState(false);// âœ… Shake animation state\n// âœ… Reusable reCAPTCHA cleanup function\nconst cleanupRecaptcha=async function(){let aggressive=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;console.log(\"\\uD83E\\uDDF9 Cleaning up reCAPTCHA (aggressive: \".concat(aggressive,\")...\"));// Step 1: Clear Firebase RecaptchaVerifier\nif(window.recaptchaVerifier){try{await window.recaptchaVerifier.clear();console.log('âœ“ Cleared recaptchaVerifier');}catch(e){console.warn('Failed to clear recaptchaVerifier:',e);}delete window.recaptchaVerifier;window.recaptchaVerifier=null;}// Step 2: Reset ALL grecaptcha widgets aggressively\nif(window.grecaptcha&&window.grecaptcha.reset){try{// Try to reset by widget ID first\nif(recaptchaWidgetIdRef.current!==null){try{window.grecaptcha.reset(recaptchaWidgetIdRef.current);console.log(\"\\u2713 Reset grecaptcha widget \".concat(recaptchaWidgetIdRef.current));}catch(e){console.warn('Failed to reset specific widget:',e);}}// Always try to reset without ID (resets all widgets)\ntry{window.grecaptcha.reset();console.log('âœ“ Reset all grecaptcha widgets');}catch(e){console.warn('Failed to reset all widgets:',e);}}catch(e){console.warn('Failed to reset grecaptcha:',e);}}recaptchaWidgetIdRef.current=null;// Step 3: Completely remove and recreate DOM container\nconst container=document.getElementById(\"recaptcha-container-update\");if(container){// Remove ALL content and event listeners\ncontainer.innerHTML=\"\";container.textContent=\"\";// Remove all data attributes that grecaptcha might have added\nArray.from(container.attributes).forEach(attr=>{if(attr.name.startsWith('data-')){container.removeAttribute(attr.name);}});console.log('âœ“ Cleared DOM container completely');}recaptchaCleanedUp.current=true;};// Form validation - check if all required fields are filled\nconst isFormComplete=()=>{var _formData$fullName,_formData$email,_formData$phone;// âœ… Check if submission is in progress\nif(isSubmitting)return false;// âœ… Check organization object structure\nconst hasValidOrg=formData.organization&&formData.organization.name&&formData.organization.ref&&formData.organization.ref.type&&(formData.organization.ref.type!==\"custom\"||formData.organization.orgType);const requiredFieldsFilled=((_formData$fullName=formData.fullName)===null||_formData$fullName===void 0?void 0:_formData$fullName.trim())!==\"\"&&((_formData$email=formData.email)===null||_formData$email===void 0?void 0:_formData$email.trim())!==\"\"&&((_formData$phone=formData.phone)===null||_formData$phone===void 0?void 0:_formData$phone.trim())!==\"\"&&formData.gender!==\"\"&&hasValidOrg&&formData.role!==\"\";const socialVerified=githubStatus.verified&&discordVerified;const phoneVerified=phoneVerification.isVerified;return requiredFieldsFilled&&socialVerified&&phoneVerified;};// OAuth verification states\nconst[githubStatus,setGithubStatus]=useState({verifying:false,verified:false,username:\"\",avatar:\"\",// âœ… Store avatar URL\nerror:\"\"});const[discordVerified,setDiscordVerified]=useState(sessionStorage.getItem(\"discordVerified\")===\"true\");const[discordNotMember,setDiscordNotMember]=useState(sessionStorage.getItem(\"discordNotMember\")===\"true\");const[discordStatus,setDiscordStatus]=useState({verifying:false});const[oauthInProgress,setOauthInProgress]=useState(false);// ðŸ”” SweetAlert helper\nconst showAlert=function(text){let icon=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"info\";return Swal.fire({text,icon,confirmButtonColor:\"#1E4DD8\"});};// âœ… Restore UpdateForm context when returning from OAuth\nuseEffect(()=>{const isReturningFromOAuth=sessionStorage.getItem(\"isNavigating\");if(isReturningFromOAuth){const savedFormData=sessionStorage.getItem(\"updateFormData\");const savedToken=sessionStorage.getItem(\"updateFormToken\");if(savedFormData){try{const parsedData=JSON.parse(savedFormData);setFormData(prev=>_objectSpread(_objectSpread({},prev),parsedData));}catch(e){console.error(\"Failed to restore form data:\",e);}}// âœ… Restore phone verification state\nconst savedPhoneVerification=sessionStorage.getItem(\"phoneVerificationState\");if(savedPhoneVerification){try{const parsedPhoneData=JSON.parse(savedPhoneVerification);setPhoneVerification(prev=>_objectSpread(_objectSpread({},prev),{},{isVerified:parsedPhoneData.isVerified,firebaseToken:parsedPhoneData.firebaseToken,showOtpInput:false// Hide OTP input since already verified\n}));console.log(\"âœ… Restored phone verification state from sessionStorage\");}catch(e){console.error(\"Failed to restore phone verification:\",e);}}// Clear OAuth in progress flag on backend\nif(savedToken){API.post('/form/oauth-status',{token:savedToken,inProgress:false}).catch(err=>console.error(\"Failed to clear OAuth flag:\",err));}sessionStorage.removeItem(\"isNavigating\");sessionStorage.removeItem(\"updateFormData\");sessionStorage.removeItem(\"updateFormToken\");setOauthInProgress(false);}},[]);// âœ… Token validation\nuseEffect(()=>{const activateAndValidate=async()=>{if(!token){setStatus(\"invalid\");setErrorMessage(\"No token provided\");return;}try{// âœ… Activate token and get activatedAt timestamp\nconst activateRes=await API.post(\"/form/activate\",{token});const res=await validateToken(token);if(res.data.valid){var _partialRes$data,_activateRes$data;setStatus(\"valid\");const partialRes=await API.get(\"/form/partial/\".concat(token));if((_partialRes$data=partialRes.data)!==null&&_partialRes$data!==void 0&&_partialRes$data.data){const partial=partialRes.data.data;setFormData(prev=>_objectSpread(_objectSpread(_objectSpread({},prev),partial),{},{skills:partial.techStack||partial.skills||[]// âœ… map correctly\n}));}// âœ… Calculate time remaining from backend activatedAt timestamp\nif((_activateRes$data=activateRes.data)!==null&&_activateRes$data!==void 0&&_activateRes$data.activatedAt){const activatedTime=new Date(activateRes.data.activatedAt).getTime();const now=Date.now();const elapsed=Math.floor((now-activatedTime)/1000);// seconds elapsed\nconst remaining=Math.max(0,600-elapsed);// 10 minutes = 600 seconds\nsetTimeRemaining(remaining);}// â° Token expires after 7 days (matches backend expiry window)\nconst timer=setTimeout(()=>{setStatus(\"expired\");alert(\"This link has expired. Please check your email for a new update link.\");},7*24*60*60*1000);// 7 days\nreturn()=>clearTimeout(timer);}else{setStatus(\"invalid\");setErrorMessage(res.data.message||\"Invalid token\");}}catch(err){var _err$response,_err$response$data;const errorMsg=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Failed to load form\";// âœ… Check if form was already submitted\nif(errorMsg===\"Form already submitted\"){setStatus(\"submitted\");}else{setStatus(\"invalid\");setErrorMessage(errorMsg);}}};activateAndValidate();},[token]);// âœ… Clean up reCAPTCHA on component unmount\nuseEffect(()=>{return()=>{cleanupRecaptcha(true);// Aggressive cleanup on unmount\n};},[]);// âœ… Auto-save every 5 seconds (only if form data changed)\nuseEffect(()=>{if(status!==\"valid\")return;const timer=setInterval(async()=>{// âœ… Only save if form data has changed\nif(!isDirtyRef.current)return;try{await API.post(\"/form/save-partial\",{token,data:formData});isDirtyRef.current=false;// âœ… Reset dirty flag after successful save\n}catch(_unused){}},5000);return()=>clearInterval(timer);},[formData,status,token]);// â± Resend timer\nuseEffect(()=>{if(timer>0){const interval=setInterval(()=>setTimer(t=>t-1),1000);return()=>clearInterval(interval);}},[timer]);// Restore GitHub verification from sessionStorage\nuseEffect(()=>{const verified=sessionStorage.getItem(\"githubVerified\")===\"true\";const username=sessionStorage.getItem(\"githubUsername\");const url=sessionStorage.getItem(\"githubUrl\");if(verified&&username&&url){setGithubStatus({verifying:false,verified:true,username,error:\"\"});setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{githubUrl:url}));}},[]);// Restore Discord verification from sessionStorage\nuseEffect(()=>{const verified=sessionStorage.getItem(\"discordVerified\")===\"true\";const notMember=sessionStorage.getItem(\"discordNotMember\")===\"true\";setDiscordVerified(verified);setDiscordNotMember(notMember);if(verified){const discordUsername=sessionStorage.getItem(\"discordUsername\");if(discordUsername){// Use username (display name like \"user#1234\"), not numeric ID\nsetFormData(prev=>_objectSpread(_objectSpread({},prev),{},{discordId:discordUsername}));}}},[]);// âœ… Auto-close tab + countdown when deferred\nuseEffect(()=>{if(status===\"deferred\"){const interval=setInterval(()=>{setCountdown(prev=>{if(prev<=1){window.close();// auto-close after countdown\nclearInterval(interval);return 0;}return prev-1;});},1000);return()=>clearInterval(interval);}},[status]);// Restore GitHub verification from sessionStorage\nuseEffect(()=>{const verified=sessionStorage.getItem(\"githubVerified\")===\"true\";const username=sessionStorage.getItem(\"githubUsername\");const url=sessionStorage.getItem(\"githubUrl\");if(verified&&username&&url){setGithubStatus({verifying:false,verified:true,username,error:\"\"});setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{githubUrl:url}));}},[]);// âœ… Restore phone verification from sessionStorage on mount\nuseEffect(()=>{const savedPhoneVerification=sessionStorage.getItem(\"phoneVerificationState\");if(savedPhoneVerification){try{const parsedPhoneData=JSON.parse(savedPhoneVerification);// Check if verification is still recent (within 1 hour)\nconst verifiedAt=new Date(parsedPhoneData.verifiedAt);const now=new Date();const ageInMs=now-verifiedAt;const oneHourInMs=60*60*1000;if(ageInMs<oneHourInMs){setPhoneVerification(prev=>_objectSpread(_objectSpread({},prev),{},{isVerified:parsedPhoneData.isVerified,firebaseToken:parsedPhoneData.firebaseToken,showOtpInput:false}));console.log(\"âœ… Restored phone verification from sessionStorage on mount\");}else{// Expired - clear it\nsessionStorage.removeItem(\"phoneVerificationState\");console.log(\"âš ï¸ Phone verification expired, cleared from sessionStorage\");}}catch(e){console.error(\"Failed to restore phone verification on mount:\",e);}}},[]);// âœ… Load initial org options on mount (matching Signup)\nuseEffect(()=>{const loadInitialOrgs=async()=>{try{const results=await searchOrgs(\"\");setOrgOptions(results||[]);}catch(err){console.error(\"Failed to load initial organizations:\",err);setOrgLoadError(true);}};loadInitialOrgs();},[]);// âœ… 10-minute countdown timer with auto-expiry\nuseEffect(()=>{if(status===\"valid\"&&timeRemaining>0){const countdownInterval=setInterval(()=>{setTimeRemaining(prev=>{if(prev<=1){clearInterval(countdownInterval);setStatus(\"expired\");Swal.fire({icon:\"warning\",title:\"Token Expired\",html:\"\\n                <p>Your form session has expired after 10 minutes.</p>\\n                <p><strong>What happens next?</strong></p>\\n                <ul style=\\\"text-align: left; margin: 10px 20px;\\\">\\n                  <li>This form will be automatically closed</li>\\n                  <li>You will receive a new reminder email within 24 hours</li>\\n                  <li>You can complete the form using the new link</li>\\n                </ul>\\n              \",confirmButtonColor:\"#1E4DD8\",confirmButtonText:\"OK\"});return 0;}return prev-1;});},1000);return()=>clearInterval(countdownInterval);}},[status,timeRemaining]);// âœ… Verify GitHub\nconst handleVerifyGithub=async()=>{setGithubStatus({verifying:true,verified:false,username:\"\",avatar:\"\",error:\"\"});try{var _info$profile;const provider=new GithubAuthProvider();const result=await signInWithPopup(auth,provider);const info=getAdditionalUserInfo(result);const githubUsername=info===null||info===void 0?void 0:info.username;const githubAvatar=(info===null||info===void 0?void 0:(_info$profile=info.profile)===null||_info$profile===void 0?void 0:_info$profile.avatar_url)||\"\";if(!githubUsername)throw new Error(\"Unable to retrieve GitHub username\");const verifiedUrl=\"https://github.com/\".concat(githubUsername);setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{githubUrl:verifiedUrl}));// âœ… Store in sessionStorage for persistence\nsessionStorage.setItem(\"githubVerified\",\"true\");sessionStorage.setItem(\"githubUsername\",githubUsername);sessionStorage.setItem(\"githubUrl\",verifiedUrl);sessionStorage.setItem(\"githubAvatar\",githubAvatar);setGithubStatus({verifying:false,verified:true,username:githubUsername,avatar:githubAvatar,error:\"\"});await signOut(auth);showAlert(\"GitHub verified successfully!\",\"success\");}catch(err){var _err$message,_err$message2;console.error(\"GitHub verify error:\",err);// âœ… Handle different error types\nlet errorMsg=\"GitHub verification failed. Please try again.\";if(err.code===\"auth/popup-closed-by-user\"){errorMsg=\"Verification cancelled. Please try again.\";}else if(err.code===\"auth/popup-blocked\"){errorMsg=\"Popup was blocked by your browser. Please allow popups for this site and try again.\";}else if(err.code===\"auth/cancelled-popup-request\"){errorMsg=\"Verification cancelled. Please try again.\";}else if((_err$message=err.message)!==null&&_err$message!==void 0&&_err$message.includes(\"rate\")||(_err$message2=err.message)!==null&&_err$message2!==void 0&&_err$message2.includes(\"limit\")){errorMsg=\"Too many verification attempts. Please wait a few minutes and try again.\";}setGithubStatus({verifying:false,verified:false,username:\"\",avatar:\"\",error:errorMsg});if(err.code!==\"auth/popup-closed-by-user\"){showAlert(errorMsg,\"error\");}}};// âœ… Verify Discord (redirect-based)\nconst handleVerifyDiscord=async()=>{try{// âœ… Set verifying state\nsetDiscordStatus({verifying:true});// âœ… Generate OAuth state for CSRF protection\nconst state=generateOAuthState();sessionStorage.setItem(\"discordOAuthState\",state);// âœ… Clear stale member flag before starting\nsessionStorage.removeItem(\"discordNotMember\");setDiscordNotMember(false);// Mark OAuth as in progress to extend token expiry\nawait API.post('/form/oauth-status',{token,inProgress:true});// Save form data and token before redirect\nsessionStorage.setItem(\"updateFormData\",JSON.stringify(formData));sessionStorage.setItem(\"updateFormToken\",token);// âœ… Save phone verification state if verified\nif(phoneVerification.isVerified&&phoneVerification.firebaseToken){sessionStorage.setItem(\"phoneVerificationState\",JSON.stringify({isVerified:true,firebaseToken:phoneVerification.firebaseToken,verifiedAt:new Date().toISOString()}));}sessionStorage.setItem(\"oauthReturnPath\",\"/update-form?token=\".concat(token));setOauthInProgress(true);// âœ… Show loading state briefly before redirect\nshowAlert(\"Redirecting to Discord...\",\"info\");// Redirect to Discord OAuth with state\nsetTimeout(()=>{window.location.href=DISCORD_OAUTH(state);},500);}catch(err){console.error(\"Failed to mark OAuth in progress:\",err);setOauthInProgress(false);// âœ… Clear flag to allow retry\nsetDiscordStatus({verifying:false});// âœ… Reset verifying state\nshowAlert(\"Failed to start Discord verification. Please try again.\",\"error\");}};// âœ… Handle org search (like Signup)\nconst handleOrgSearch=async searchTerm=>{if(!searchTerm||searchTerm.trim()===\"\"){setOrgLoading(true);try{const results=await searchOrgs(\"\");setOrgOptions(results||[]);}catch(err){console.error(\"Org search error:\",err);setOrgOptions([]);}finally{setOrgLoading(false);}return;}if(searchTerm.length<2){return;}setOrgLoading(true);try{const results=await searchOrgs(searchTerm);setOrgOptions(results||[]);}catch(err){console.error(\"Org search error:\",err);setOrgOptions([]);}finally{setOrgLoading(false);}};// âœ… Handle organization change (matching Signup structure)\nconst handleOrgChange=value=>{isDirtyRef.current=true;if(!value){setShowCustomOrg(false);setFormData(_objectSpread(_objectSpread({},formData),{},{organization:null}));return;}if(value.source===\"custom\"){setShowCustomOrg(true);setFormData(_objectSpread(_objectSpread({},formData),{},{organization:{source:\"custom\",ref:{type:\"custom\",id:null},name:\"\",orgType:\"\"}}));}else{setShowCustomOrg(false);setFormData(_objectSpread(_objectSpread({},formData),{},{organization:{source:value.source,ref:value.orgRef,name:value.label,orgType:value.orgType}}));}};// âœ… Handle changes\nconst handleChange=e=>{isDirtyRef.current=true;const{name,value}=e.target;setFormData(_objectSpread(_objectSpread({},formData),{},{[name]:value}));};// âœ… Request OTP\nconst handleRequestOtp=async()=>{const phoneValidation=parsePhoneNumber(formData.phone);if(!phoneValidation.isValid){return showAlert(\"Please enter a valid phone number.\",\"warning\");}if(timer>0)return showAlert(\"Please wait \".concat(timer,\"s before resending OTP.\"),\"info\");// âœ… Prevent multiple rapid clicks\nif(phoneVerification.isProcessing){console.log('âš ï¸ OTP request already in progress');return;}setPhoneVerification(p=>_objectSpread(_objectSpread({},p),{},{isProcessing:true}));try{// âœ… Use aggressive cleanup utility\nawait cleanupRecaptcha(true);// Generate unique container ID\nrecaptchaContainerIdRef.current+=1;const uniqueContainerId=\"recaptcha-container-update-\".concat(recaptchaContainerIdRef.current);// Recreate container\nconst container=document.getElementById(\"recaptcha-container-update\");if(!container){console.error('âŒ recaptcha-container-update not found in DOM');throw new Error('reCAPTCHA container not found');}// Create fresh inner div\nconst newDiv=document.createElement('div');newDiv.id=uniqueContainerId;newDiv.className='recaptcha-inner';container.appendChild(newDiv);// Wait for DOM to be ready\nawait new Promise(resolve=>setTimeout(resolve,200));// Verify container exists\nconst targetContainer=document.getElementById(uniqueContainerId);if(!targetContainer){throw new Error(\"Container \".concat(uniqueContainerId,\" not found after creation\"));}console.log(\"\\u2713 Created fresh container: \".concat(uniqueContainerId));// Step 6: Create new RecaptchaVerifier with unique container\nconsole.log('ðŸ”§ Creating new RecaptchaVerifier...');window.recaptchaVerifier=new RecaptchaVerifier(auth,uniqueContainerId,{size:\"invisible\",callback:()=>console.log(\"reCAPTCHA solved\"),\"expired-callback\":()=>console.warn(\"reCAPTCHA expired\")});// Step 7: Render and store widget ID (with additional error handling)\nlet widgetId;try{widgetId=await window.recaptchaVerifier.render();recaptchaWidgetIdRef.current=widgetId;console.log(\"\\u2705 reCAPTCHA rendered successfully in \".concat(uniqueContainerId,\" (widget ID: \").concat(widgetId,\")\"));}catch(renderError){// If render still fails, try one more time with complete reset\nconsole.warn('âš ï¸ First render attempt failed, trying complete reset...',renderError);// Nuclear option: reload grecaptcha script\nif(window.grecaptcha){delete window.grecaptcha;}// Wait a bit longer\nawait new Promise(resolve=>setTimeout(resolve,500));// Try to render again\nwidgetId=await window.recaptchaVerifier.render();recaptchaWidgetIdRef.current=widgetId;console.log(\"\\u2705 reCAPTCHA rendered successfully on retry (widget ID: \".concat(widgetId,\")\"));}const e164Phone=phoneValidation.e164;const confirmationResult=await signInWithPhoneNumber(auth,e164Phone,window.recaptchaVerifier);window.confirmationResult=confirmationResult;showAlert(\"OTP sent successfully to your phone!\",\"success\");setPhoneVerification({showOtpInput:true,isVerified:false,otp:\"\",isProcessing:false});setTimer(30);// cooldown\nrecaptchaCleanedUp.current=false;}catch(err){var _err$message3;console.error(\"OTP send error:\",err);// âœ… Provide user-friendly error messages\nlet errorMsg=\"Failed to send OTP. Please try again.\";if(err.code===\"auth/too-many-requests\"){errorMsg=\"Too many attempts. Please try again later.\";}else if(err.code===\"auth/invalid-phone-number\"){errorMsg=\"Invalid phone number format.\";}else if((_err$message3=err.message)!==null&&_err$message3!==void 0&&_err$message3.includes(\"reCAPTCHA\")){errorMsg=err.message;}showAlert(errorMsg,\"error\");// âœ… Clean up on error\nawait cleanupRecaptcha(true);setPhoneVerification(p=>_objectSpread(_objectSpread({},p),{},{isProcessing:false}));}};// âœ… Verify OTP\nconst handleVerifyOtp=async()=>{if(!phoneVerification.otp.trim()||phoneVerification.otp.length!==6){return showAlert(\"Please enter a valid 6-digit OTP.\",\"warning\");}setPhoneVerification(p=>_objectSpread(_objectSpread({},p),{},{isProcessing:true}));try{const result=await window.confirmationResult.confirm(phoneVerification.otp);const user=result.user;const firebaseToken=await user.getIdToken();// âœ… Send phone in E.164 format\nawait API.post(\"/form/verify-phone\",{token,phone:formData.phone,// E.164 format from MuiTelInput\nfirebaseToken});showAlert(\"Phone verified successfully!\",\"success\");const verifiedState=_objectSpread(_objectSpread({},phoneVerification),{},{isVerified:true,isProcessing:false,firebaseToken// âœ… Store token for form submission\n});setPhoneVerification(verifiedState);// âœ… Save to sessionStorage to persist across OAuth redirects\nsessionStorage.setItem(\"phoneVerificationState\",JSON.stringify({isVerified:true,firebaseToken,verifiedAt:new Date().toISOString()}));// âœ… Clean up recaptcha after successful verification\nawait cleanupRecaptcha(false);}catch(err){console.error(\"OTP verification failed:\",err);// âœ… User-friendly error messages\nlet errorMsg=\"Invalid or expired OTP. Please try again.\";if(err.code===\"auth/invalid-verification-code\"){errorMsg=\"Invalid OTP code. Please check and try again.\";}else if(err.code===\"auth/code-expired\"){errorMsg=\"OTP has expired. Please request a new one.\";}showAlert(errorMsg,\"error\");// âœ… Clear verifier to allow retry\nawait cleanupRecaptcha(false);setPhoneVerification(p=>_objectSpread(_objectSpread({},p),{},{isProcessing:false}));}};// âœ… Submit\nconst handleSubmit=async e=>{var _formData$fullName2,_formData$email2;e.preventDefault();// âœ… Prevent double submission\nif(isSubmitting){return;}// âœ… Detailed validation\nif(!((_formData$fullName2=formData.fullName)!==null&&_formData$fullName2!==void 0&&_formData$fullName2.trim())){return showAlert(\"Please enter your full name.\",\"warning\");}const phoneValidation=parsePhoneNumber(formData.phone);if(!phoneValidation.isValid){return showAlert(\"Please enter a valid phone number.\",\"warning\");}if(!((_formData$email2=formData.email)!==null&&_formData$email2!==void 0&&_formData$email2.trim())||!formData.email.includes(\"@\")){return showAlert(\"Please enter a valid email address.\",\"warning\");}if(!formData.gender){return showAlert(\"Please select your gender.\",\"warning\");}if(!formData.organization||!formData.organization.name||!formData.organization.ref||!formData.organization.ref.type){return showAlert(\"Please select or enter your organization.\",\"warning\");}if(!formData.role){return showAlert(\"Please select your role.\",\"warning\");}if(!githubStatus.verified){return showAlert(\"Please verify your GitHub account before submitting.\",\"warning\");}if(!discordVerified){return showAlert(\"Please verify your Discord account before submitting.\",\"warning\");}if(!phoneVerification.isVerified){return showAlert(\"Please verify your phone number before submitting.\",\"warning\");}if(!formData.skills||formData.skills.length===0){return showAlert(\"Please select at least one tech skill.\",\"warning\");}if(formData.skills.length>6){return showAlert(\"You can select maximum 6 skills.\",\"warning\");}const confirm=await Swal.fire({title:\"Confirm Submission?\",text:\"Please review your information before submitting.\",icon:\"question\",showCancelButton:true,confirmButtonText:\"Submit\",confirmButtonColor:\"#1E4DD8\"});if(!confirm.isConfirmed)return;// âœ… Prevent multiple submissions\nif(isSubmitting){console.log('âš ï¸ Submission already in progress');return;}setIsSubmitting(true);try{var _formData$fullName3,_formData$email3,_formData$organizatio,_formData$organizatio2,_formData$organizatio3,_formData$githubUrl,_formData$githubId,_formData$discordId,_formData$linkedinId,_finalData$token,_finalData$firebaseTo;isDirtyRef.current=false;// âœ… Get verified social media data from sessionStorage\nconst githubUsername=sessionStorage.getItem(\"githubUsername\")||\"\";const githubUrl=sessionStorage.getItem(\"githubUrl\")||\"\";const discordId=sessionStorage.getItem(\"discordId\")||\"\";const cleanedData={fullName:(_formData$fullName3=formData.fullName)===null||_formData$fullName3===void 0?void 0:_formData$fullName3.trim(),email:(_formData$email3=formData.email)===null||_formData$email3===void 0?void 0:_formData$email3.trim(),phone:phoneValidation.e164,gender:formData.gender,organization:{name:(_formData$organizatio=formData.organization)===null||_formData$organizatio===void 0?void 0:_formData$organizatio.name,ref:(_formData$organizatio2=formData.organization)===null||_formData$organizatio2===void 0?void 0:_formData$organizatio2.ref,orgType:(_formData$organizatio3=formData.organization)===null||_formData$organizatio3===void 0?void 0:_formData$organizatio3.orgType},role:formData.role,techStack:formData.skills,githubUrl:githubUrl||((_formData$githubUrl=formData.githubUrl)===null||_formData$githubUrl===void 0?void 0:_formData$githubUrl.trim())||null,githubId:githubUsername||((_formData$githubId=formData.githubId)===null||_formData$githubId===void 0?void 0:_formData$githubId.trim())||null,discordId:discordId||((_formData$discordId=formData.discordId)===null||_formData$discordId===void 0?void 0:_formData$discordId.trim())||null,linkedinId:((_formData$linkedinId=formData.linkedinId)===null||_formData$linkedinId===void 0?void 0:_formData$linkedinId.trim())||null,token,firebaseToken:phoneVerification.firebaseToken// âœ… Include Firebase token\n};// âœ… Remove null/empty fields (but keep token and firebaseToken)\nconst finalData={};Object.keys(cleanedData).forEach(key=>{// Always include token and firebaseToken\nif(key==='token'||key==='firebaseToken'){finalData[key]=cleanedData[key];}else if(cleanedData[key]!==null&&cleanedData[key]!==\"\"){finalData[key]=cleanedData[key];}});// âœ… Debug logging\nconsole.log('ðŸ“¤ Submitting form with keys:',Object.keys(finalData));console.log('ðŸ“¤ Token:',((_finalData$token=finalData.token)===null||_finalData$token===void 0?void 0:_finalData$token.substring(0,10))+'...');console.log('ðŸ“¤ Firebase token:',((_finalData$firebaseTo=finalData.firebaseToken)===null||_finalData$firebaseTo===void 0?void 0:_finalData$firebaseTo.substring(0,20))+'...');await submitForm(finalData);await API.delete(\"/form/partial/\".concat(token));sessionStorage.removeItem(\"updateFormData\");sessionStorage.removeItem(\"updateFormToken\");sessionStorage.removeItem(\"oauthReturnPath\");sessionStorage.removeItem(\"phoneVerificationState\");// âœ… Clear phone verification\nsessionStorage.removeItem(\"githubVerified\");sessionStorage.removeItem(\"githubUsername\");sessionStorage.removeItem(\"githubUrl\");sessionStorage.removeItem(\"githubAvatar\");sessionStorage.removeItem(\"discordVerified\");sessionStorage.removeItem(\"discordUsername\");sessionStorage.removeItem(\"discordId\");sessionStorage.removeItem(\"discordAvatarUrl\");sessionStorage.removeItem(\"discordNotMember\");sessionStorage.removeItem(\"discordOAuthState\");setStatus(\"submitted\");showAlert(\"Form submitted successfully!\",\"success\");}catch(err){var _err$response2,_err$response3,_err$response4,_err$response4$data,_err$response5;console.error(\"Submission error:\",err);console.error(\"Error response:\",(_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.data);console.error(\"Error status:\",(_err$response3=err.response)===null||_err$response3===void 0?void 0:_err$response3.status);const errorMessage=((_err$response4=err.response)===null||_err$response4===void 0?void 0:(_err$response4$data=_err$response4.data)===null||_err$response4$data===void 0?void 0:_err$response4$data.message)||\"Submission failed. Please try again.\";// âœ… Handle 409 Conflict (user already exists)\nif(((_err$response5=err.response)===null||_err$response5===void 0?void 0:_err$response5.status)===409){var _err$response6,_err$response6$data;const userId=(_err$response6=err.response)===null||_err$response6===void 0?void 0:(_err$response6$data=_err$response6.data)===null||_err$response6$data===void 0?void 0:_err$response6$data.userId;showAlert(\"This account already exists\".concat(userId?\" (User ID: \".concat(userId,\")\"):'',\". \").concat(errorMessage),\"error\");return;}// âœ… If phone conflict error, reset phone verification so user can change number\nif(errorMessage.includes(\"phone number\")||errorMessage.includes(\"already registered\")){setPhoneVerification({isVerified:false,showOtpInput:false,otp:\"\",isProcessing:false,firebaseToken:null});showAlert(\"This phone number is already registered with a different account. Please use a different number or verify with the correct account.\",\"error\");}else{showAlert(errorMessage,\"error\");}}finally{setIsSubmitting(false);}};// âœ… Defer\n// âœ… Defer (with confirmation + smooth exit)\nconst handleDefer=async()=>{const confirmDefer=window.confirm(\"Are you sure you want to defer filling this form?\\nYouâ€™ll receive a reminder email later.\");if(!confirmDefer)return;// user chose No â€” stay on form\ntry{await deferForm({token});setFadeOut(true);setTimeout(()=>setStatus(\"deferred\"),600);// fade-out animation time\n}catch(err){var _err$response7,_err$response7$data;showAlert(((_err$response7=err.response)===null||_err$response7===void 0?void 0:(_err$response7$data=_err$response7.data)===null||_err$response7$data===void 0?void 0:_err$response7$data.message)||\"Failed to defer form.\",\"error\");}};// âœ… Opt-out\nconst handleOptOut=async()=>{const confirm=await Swal.fire({title:\"Confirm Opt-Out?\",text:\"You wonâ€™t receive future communications.\",icon:\"warning\",showCancelButton:true,confirmButtonText:\"Opt Out\",confirmButtonColor:\"#d33\"});if(!confirm.isConfirmed)return;setOptoutProcessing(true);try{await optOut({token,reason:optoutReason});setOptoutProcessing(false);setInterested(\"no\");setStatus(\"deferred\");showAlert(\"You have been opted out successfully.\",\"success\");}catch(err){var _err$response8,_err$response8$data;setOptoutProcessing(false);showAlert(((_err$response8=err.response)===null||_err$response8===void 0?void 0:(_err$response8$data=_err$response8.data)===null||_err$response8$data===void 0?void 0:_err$response8$data.message)||\"Failed to opt out.\",\"error\");}};// âœ… Conditional Views\nif(status===\"loading\")return/*#__PURE__*/_jsx(Typography,{align:\"center\",children:\"Loading form...\"});if(status===\"invalid\")return/*#__PURE__*/_jsx(Box,{sx:{minHeight:\"100vh\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",bgcolor:\"#f8f9fa\",p:2},children:/*#__PURE__*/_jsxs(Paper,{sx:{width:\"100%\",maxWidth:480,p:4,borderRadius:3,boxShadow:4,textAlign:\"center\"},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",gap:1,mb:1},children:[/*#__PURE__*/_jsx(FiXCircle,{size:28,color:\"#d32f2f\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"error\",fontWeight:\"bold\",children:\"Invalid or Expired Link\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mb:2},children:errorMessage||\"This link is no longer valid.\"}),/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",fontWeight:\"bold\",gutterBottom:true,children:\"What happened?\"}),/*#__PURE__*/_jsxs(Box,{sx:{textAlign:\"left\",mx:3,my:2},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",gap:1,mb:1},children:[/*#__PURE__*/_jsx(FiLink,{size:16,color:\"#1976d2\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"The link may have already been used\"})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",gap:1,mb:1},children:[/*#__PURE__*/_jsx(FiClock,{size:16,color:\"#ed6c02\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"The link may have expired\"})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",gap:1,mb:1},children:[/*#__PURE__*/_jsx(FiCheckCircle,{size:16,color:\"#2e7d32\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"You may have already submitted the form\"})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",gap:1},children:[/*#__PURE__*/_jsx(FiSlash,{size:16,color:\"#d32f2f\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"You may have opted out or deferred\"})]})]}),/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",fontWeight:\"bold\",gutterBottom:true,children:\"What to do next?\"}),/*#__PURE__*/_jsxs(Box,{sx:{textAlign:\"left\",mx:3,my:2},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",gap:1,mb:1},children:[/*#__PURE__*/_jsx(FiMail,{size:16,color:\"#1976d2\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"Check your email for the latest update form link\"})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",gap:1,mb:1},children:[/*#__PURE__*/_jsx(FiClock,{size:16,color:\"#ed6c02\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"Wait for the next reminder email (sent automatically)\"})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",gap:1},children:[/*#__PURE__*/_jsx(FiMail,{size:16,color:\"#1976d2\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"Contact support if you believe this is an error\"})]})]}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",sx:{mt:2,display:\"block\"},children:\"You can close this window now.\"})]})});if(status===\"expired\")return/*#__PURE__*/_jsx(Box,{sx:{minHeight:\"100vh\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",bgcolor:\"#f8f9fa\",p:2},children:/*#__PURE__*/_jsxs(Paper,{sx:{width:\"100%\",maxWidth:480,p:4,borderRadius:3,boxShadow:4,textAlign:\"center\"},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",gap:1,mb:1},children:[/*#__PURE__*/_jsx(FiClock,{size:28,color:\"#ed6c02\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"warning.main\",fontWeight:\"bold\",children:\"Form Expired\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mb:2},children:\"Your 10-minute session has expired.\"}),/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",fontWeight:\"bold\",gutterBottom:true,children:\"What happens next?\"}),/*#__PURE__*/_jsxs(Box,{sx:{textAlign:\"left\",mx:3,my:2},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",gap:1,mb:1},children:[/*#__PURE__*/_jsx(FiMail,{size:16,color:\"#1976d2\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"You will receive a new reminder email within 24 hours\"})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",gap:1,mb:1},children:[/*#__PURE__*/_jsx(FiLink,{size:16,color:\"#1976d2\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"Use the new link to complete your form\"})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",gap:1,mb:1},children:[/*#__PURE__*/_jsx(FiSave,{size:16,color:\"#2e7d32\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"Your progress has been saved automatically\"})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",gap:1},children:[/*#__PURE__*/_jsx(FiClock,{size:16,color:\"#ed6c02\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"You'll have another 10 minutes when you return\"})]})]}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",sx:{mt:2,display:\"block\"},children:\"You can close this window now.\"})]})});if(status===\"submitted\")return/*#__PURE__*/_jsx(Box,{sx:{minHeight:\"100vh\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",bgcolor:\"#f8f9fa\",p:2},children:/*#__PURE__*/_jsxs(Paper,{sx:{width:\"100%\",maxWidth:480,p:4,borderRadius:3,boxShadow:4,textAlign:\"center\"},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",gap:1,mb:1},children:[/*#__PURE__*/_jsx(FiCheckCircle,{size:28,color:\"#2e7d32\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"success.main\",fontWeight:\"bold\",children:\"Form Submitted\"})]}),/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",fontWeight:\"bold\",gutterBottom:true,children:\"What happened?\"}),/*#__PURE__*/_jsxs(Box,{sx:{textAlign:\"left\",mx:3,my:2},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",gap:1,mb:1},children:[/*#__PURE__*/_jsx(FiCheckCircle,{size:16,color:\"#2e7d32\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"Your form submission was completed successfully\"})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"flex-start\",gap:1,mb:1},children:[/*#__PURE__*/_jsx(FiUserCheck,{size:16,color:\"#2e7d32\",style:{marginTop:3}}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"No separate signup is needed .\"})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",gap:1},children:[/*#__PURE__*/_jsx(FiLock,{size:16,color:\"#ed6c02\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"This link can no longer be used to prevent duplicate submissions\"})]})]}),/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",fontWeight:\"bold\",gutterBottom:true,children:\"What to do next?\"}),/*#__PURE__*/_jsxs(Box,{sx:{textAlign:\"left\",mx:3,my:2},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"flex-start\",gap:1,mb:1},children:[/*#__PURE__*/_jsx(FiInfo,{size:16,color:\"#1976d2\",style:{marginTop:3}}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"You're all set!\",\" \",/*#__PURE__*/_jsx(Box,{component:\"a\",href:\"https://pl-app.iiit.ac.in/c4gt/signin\",target:\"_blank\",rel:\"noopener noreferrer\",sx:{color:\"#1976d2\",fontWeight:700,fontSize:\"1rem\",textDecoration:\"underline\",\"&:hover\":{textDecoration:\"underline\",color:\"#d219c9ff\"}},children:\"Continue to login \\u2192\"})]})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",gap:1,mb:1},children:[/*#__PURE__*/_jsx(FiInfo,{size:16,color:\"#1976d2\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"No further action is needed\"})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",gap:1},children:[/*#__PURE__*/_jsx(FiMail,{size:16,color:\"#1976d2\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"Contact support if you need to update your information\"})]})]}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",sx:{mt:2,display:\"block\"},children:\"You can close this window now.\"})]})});// âœ… Deferred screen (auto-close + message)\nif(status===\"deferred\")return/*#__PURE__*/_jsx(Box,{sx:{minHeight:\"100vh\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",bgcolor:\"#f8f9fa\",textAlign:\"center\",p:3},children:/*#__PURE__*/_jsxs(Paper,{sx:{p:4,borderRadius:3,border:\"1px solid #ddd\",boxShadow:3,maxWidth:480},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",gap:1,mb:1},children:[/*#__PURE__*/_jsx(FiAlertTriangle,{size:28,color:\"#ed6c02\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"warning.main\",children:\"Form Deferred\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mb:1},children:\"You\\u2019ve chosen to defer filling this form.\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mb:2},children:\"You can complete it later using the reminder email link we\\u2019ll send soon.\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"This window will close automatically in \",/*#__PURE__*/_jsx(\"b\",{children:countdown}),\" seconds.\"]})]})});// âœ… Main Form UI\nreturn/*#__PURE__*/_jsx(Box,{sx:{minHeight:\"100vh\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",bgcolor:\"#f8f9fa\",p:2,flex:1,width:\"100%\"},children:/*#__PURE__*/_jsxs(Paper,{sx:{width:\"100%\",maxWidth:480,p:3,borderRadius:3,boxShadow:4,border:\"1px solid #ddd\",opacity:fadeOut?0:1,transition:\"opacity 0.6s ease-in-out\"},children:[/*#__PURE__*/_jsxs(Stack,{alignItems:\"center\",spacing:1,children:[/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:3,alignItems:\"center\",justifyContent:\"center\",sx:{mb:1},children:[/*#__PURE__*/_jsx(Box,{component:\"img\",src:logo1,alt:\"Badal\",sx:{height:42,width:\"auto\",objectFit:\"contain\"}}),/*#__PURE__*/_jsx(Box,{component:\"img\",src:logo2,alt:\"C4GT\",sx:{height:42,width:\"auto\",objectFit:\"contain\"}})]}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",fontWeight:\"bold\",children:\"Update Your Information\"}),/*#__PURE__*/_jsx(Box,{sx:{width:\"100%\",mt:1,p:1.5,borderRadius:2,backgroundColor:timeRemaining<=120?\"#ffebee\":timeRemaining<=300?\"#fff3e0\":\"#e3f2fd\",border:\"2px solid \".concat(timeRemaining<=120?\"#d32f2f\":timeRemaining<=300?\"#f57c00\":\"#1976d2\"),display:\"flex\",alignItems:\"center\",justifyContent:\"center\",gap:1},children:/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",gap:1},children:[/*#__PURE__*/_jsx(FiClock,{size:20,color:timeRemaining<=120?\"#d32f2f\":timeRemaining<=300?\"#f57c00\":\"#1976d2\"}),/*#__PURE__*/_jsxs(Typography,{sx:{fontSize:\"1.1rem\",fontWeight:\"bold\",color:timeRemaining<=120?\"#d32f2f\":timeRemaining<=300?\"#f57c00\":\"#1976d2\"},children:[\"Time Remaining: \",Math.floor(timeRemaining/60),\":\",String(timeRemaining%60).padStart(2,\"0\")]})]})}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",gap:0.5},children:[timeRemaining<=120&&/*#__PURE__*/_jsx(FiAlertTriangle,{size:14,color:\"#d32f2f\"}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{color:timeRemaining<=120?\"#d32f2f\":\"text.secondary\",fontWeight:timeRemaining<=120?\"bold\":\"normal\"},children:timeRemaining<=120?\"Hurry! Your session will expire soon!\":\"Complete the form within 10 minutes or it will expire\"})]}),/*#__PURE__*/_jsx(Divider,{sx:{width:\"100%\",my:1}})]}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,size:\"small\",sx:{mt:2},children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Continue as part of our organization?\"}),/*#__PURE__*/_jsxs(Select,{value:interested!==null&&interested!==void 0?interested:\"\",label:\"Continue?\",onChange:e=>setInterested(e.target.value),children:[/*#__PURE__*/_jsx(MenuItem,{value:\"yes\",children:\"Yes, I want to continue\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"no\",children:\"No, I want to opt out\"})]})]}),interested===\"no\"?/*#__PURE__*/_jsxs(Box,{mt:3,children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"We're sorry to see you go. You may share feedback (optional):\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,rows:3,placeholder:\"Your reason...\",value:optoutReason,onChange:e=>setOptoutReason(e.target.value),sx:{mt:1}}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",color:\"error\",sx:{mt:2,borderRadius:\"20px\"},onClick:handleOptOut,disabled:optoutProcessing,children:optoutProcessing?\"Processing...\":\"Confirm Opt-Out\"})]}):/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,mt:2,children:[/*#__PURE__*/_jsx(TextField,{label:\"Full Name *\",fullWidth:true,size:\"small\",margin:\"dense\",name:\"fullName\",value:formData.fullName,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(MuiTelInput,{label:\"Phone Number *\",value:formData.phone,defaultCountry:\"IN\",forceCallingCode:true,focusOnSelectCountry:true,fullWidth:true,size:\"small\",margin:\"dense\",disabled:phoneVerification.isVerified,onChange:(value,info)=>{if(!info)return;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{phone:value}));// Reset verification if phone changes\nsetPhoneVerification({isVerified:false,showOtpInput:false,otp:\"\",isProcessing:false,firebaseToken:null});sessionStorage.removeItem(\"phoneVerificationState\");cleanupRecaptcha(false);},error:formData.phone&&!isValidPhoneFormat(formData.phone),helperText:formData.phone&&!isValidPhoneFormat(formData.phone)?\"Enter valid phone number for selected country\":\"\",required:true}),/*#__PURE__*/_jsx(TextField,{label:\"Email \",fullWidth:true,size:\"small\",margin:\"dense\",name:\"email\",value:formData.email,onChange:handleChange,required:true}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,size:\"small\",margin:\"dense\",required:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Gender *\"}),/*#__PURE__*/_jsx(Select,{value:formData.gender,label:\"Gender *\",onChange:handleChange,name:\"gender\",children:GENDERS.map(g=>/*#__PURE__*/_jsx(MenuItem,{value:g,children:g},g))})]}),orgLoadError?/*#__PURE__*/_jsx(Box,{sx:{mt:2},children:/*#__PURE__*/_jsx(Typography,{color:\"error\",fontSize:13,children:\"\\u274C Unable to load organizations. Please refresh or try again later.\"})}):/*#__PURE__*/_jsx(Autocomplete,{options:orgOptions,loading:orgLoading,filterOptions:x=>x,getOptionLabel:o=>o.label||\"\",isOptionEqualToValue:(option,value)=>{var _option$orgRef,_value$orgRef,_option$orgRef2,_value$orgRef2;return((_option$orgRef=option.orgRef)===null||_option$orgRef===void 0?void 0:_option$orgRef.id)===((_value$orgRef=value.orgRef)===null||_value$orgRef===void 0?void 0:_value$orgRef.id)&&((_option$orgRef2=option.orgRef)===null||_option$orgRef2===void 0?void 0:_option$orgRef2.type)===((_value$orgRef2=value.orgRef)===null||_value$orgRef2===void 0?void 0:_value$orgRef2.type);},value:formData.organization?{label:formData.organization.name,orgRef:formData.organization.ref,source:(_formData$organizatio4=formData.organization.ref)===null||_formData$organizatio4===void 0?void 0:_formData$organizatio4.type,orgType:formData.organization.orgType}:null,onInputChange:(e,v)=>handleOrgSearch(v),onChange:(e,value)=>handleOrgChange(value),renderInput:params=>/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Organisation (type to search or select)\",size:\"small\",margin:\"dense\",required:true,placeholder:\"Search for your organization...\"})),sx:{width:\"100%\"}}),showCustomOrg&&/*#__PURE__*/_jsx(TextField,{label:\"Enter Organization Name \",fullWidth:true,size:\"small\",margin:\"dense\",required:true,value:((_formData$organizatio5=formData.organization)===null||_formData$organizatio5===void 0?void 0:_formData$organizatio5.name)||\"\",onChange:e=>{isDirtyRef.current=true;setFormData(_objectSpread(_objectSpread({},formData),{},{organization:_objectSpread(_objectSpread({},formData.organization),{},{name:e.target.value,ref:{type:\"custom\",id:null}})}));}}),showCustomOrg?/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,size:\"small\",margin:\"dense\",required:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Organization Type\"}),/*#__PURE__*/_jsxs(Select,{label:\"Organization Type\",value:((_formData$organizatio6=formData.organization)===null||_formData$organizatio6===void 0?void 0:_formData$organizatio6.orgType)||\"\",onChange:e=>{isDirtyRef.current=true;setFormData(_objectSpread(_objectSpread({},formData),{},{organization:_objectSpread(_objectSpread({},formData.organization),{},{orgType:e.target.value})}));},children:[/*#__PURE__*/_jsx(MenuItem,{value:\"Government\",children:\"Government\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Corporate\",children:\"Corporate\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Academic\",children:\"Academic\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"NGO\",children:\"NGO\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Not For Profit\",children:\"Not For Profit\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"For Profit\",children:\"For Profit\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Self\",children:\"Self\"})]})]}):/*#__PURE__*/_jsx(TextField,{label:\"Organization Type\",fullWidth:true,size:\"small\",margin:\"dense\",value:((_formData$organizatio7=formData.organization)===null||_formData$organizatio7===void 0?void 0:_formData$organizatio7.orgType)||\"\",InputProps:{readOnly:true}}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,size:\"small\",margin:\"dense\",required:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Role *\"}),/*#__PURE__*/_jsx(Select,{value:formData.role,label:\"Role \",name:\"role\",onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{role:e.target.value})),children:ROLES.map(r=>/*#__PURE__*/_jsx(MenuItem,{value:r.value,children:r.label},r.value))})]}),/*#__PURE__*/_jsxs(Box,{sx:{mt:2,border:'1px solid #e0e0e0',borderRadius:1},children:[((_formData$skills,_formData$skills2,_formData$skills3)=>{const isTechStackComplete=((_formData$skills=formData.skills)===null||_formData$skills===void 0?void 0:_formData$skills.length)>=1&&((_formData$skills2=formData.skills)===null||_formData$skills2===void 0?void 0:_formData$skills2.length)<=6;return/*#__PURE__*/_jsxs(Box,{sx:{p:1.5,cursor:'pointer',bgcolor:'#f5f5f5',borderRadius:'4px 4px 0 0',display:'flex',justifyContent:'space-between',alignItems:'center'},onClick:()=>setFormData(_objectSpread(_objectSpread({},formData),{},{_skillsOpen:!formData._skillsOpen})),children:[/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",gap:1},children:[/*#__PURE__*/_jsxs(Typography,{fontWeight:\"bold\",fontSize:14,children:[\"Tech Skills (\",((_formData$skills3=formData.skills)===null||_formData$skills3===void 0?void 0:_formData$skills3.length)||0,\")\"]}),/*#__PURE__*/_jsx(Fade,{in:isTechStackComplete,children:/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(FiCheckCircle,{size:16,color:\"#2e7d32\"})})})]}),/*#__PURE__*/_jsx(Typography,{children:formData._skillsOpen?'â–²':'â–¼'})]});})(),formData._skillsOpen&&/*#__PURE__*/_jsx(Box,{sx:{p:1.5},children:/*#__PURE__*/_jsx(Box,{sx:{animation:shakeSkills?\"\".concat(shake,\" 0.4s ease\"):\"none\"},children:/*#__PURE__*/_jsx(Autocomplete,{multiple:true,options:SKILLS,value:formData.skills||[],disableCloseOnSelect:true,limitTags:3,getOptionDisabled:option=>formData.skills.length>=6&&!formData.skills.includes(option),onChange:(event,newValue)=>{isDirtyRef.current=true;if(newValue.length<=6){setFormData(_objectSpread(_objectSpread({},formData),{},{skills:newValue}));}else{// Trigger shake\nsetShakeSkills(true);setTimeout(()=>setShakeSkills(false),400);}},renderInput:params=>{const isMaxReached=formData.skills.length===6;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Select up to 6 skills *\",placeholder:\"Choose your skills\",size:\"small\",error:isMaxReached,helperText:isMaxReached?\"Maximum 6 skills reached\":\"Select up to 6 skills (\".concat(formData.skills.length,\"/6)\"),FormHelperTextProps:{sx:{color:isMaxReached?\"#d32f2f\":\"text.secondary\",fontWeight:isMaxReached?600:400}}}));}})})})]}),/*#__PURE__*/_jsxs(Box,{sx:{mt:2,border:'1px solid #e0e0e0',borderRadius:1},children:[(()=>{const isSocialFullyVerified=githubStatus.verified&&discordVerified;return/*#__PURE__*/_jsxs(Box,{sx:{p:1.5,cursor:'pointer',bgcolor:'#f5f5f5',borderRadius:'4px 4px 0 0',display:'flex',justifyContent:'space-between',alignItems:'center'},onClick:()=>setFormData(_objectSpread(_objectSpread({},formData),{},{_socialOpen:!formData._socialOpen})),children:[/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",gap:1},children:[/*#__PURE__*/_jsx(Typography,{fontWeight:\"bold\",fontSize:14,children:\"Social Accounts\"}),isSocialFullyVerified&&/*#__PURE__*/_jsx(FiCheckCircle,{size:16,color:\"#2e7d32\"})]}),/*#__PURE__*/_jsx(Typography,{children:formData._socialOpen?'â–²':'â–¼'})]});})(),formData._socialOpen&&/*#__PURE__*/_jsxs(Box,{sx:{p:1.5},children:[/*#__PURE__*/_jsx(Typography,{fontWeight:\"bold\",fontSize:14,mb:1,children:\"GitHub:\"}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",flexDirection:\"column\",gap:1,width:\"100%\",mt:1},children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",onClick:handleVerifyGithub,disabled:githubStatus.verified||githubStatus.verifying,sx:{borderRadius:\"10px\",fontWeight:\"bold\",backgroundColor:githubStatus.verified?\"#4CAF50\":\"#000\",color:\"white\",\"&:disabled\":{backgroundColor:githubStatus.verified?\"#4CAF50\":\"#9e9e9e\",color:\"white\"}},children:githubStatus.verified?\"GitHub Verified âœ“\":\"Verify GitHub\"}),githubStatus.verified&&/*#__PURE__*/_jsxs(Typography,{fontSize:13,color:\"#2e7d32\",children:[\"\\u2713 Verified as: \",githubStatus.username]}),!githubStatus.verified&&githubStatus.error&&/*#__PURE__*/_jsxs(Typography,{fontSize:13,color:\"#d32f2f\",children:[\"\\u274C \",githubStatus.error]})]}),/*#__PURE__*/_jsx(Typography,{fontWeight:\"bold\",fontSize:14,mt:2,mb:1,children:\"Discord:\"}),/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\",flexDirection:\"column\",gap:1,width:\"100%\",mt:1},children:discordVerified?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",disabled:true,sx:{borderRadius:\"10px\",fontWeight:\"bold\",backgroundColor:\"#4CAF50\",color:\"white\",\"&.Mui-disabled\":{backgroundColor:\"#4CAF50\",color:\"white\"}},children:\"DISCORD VERIFIED \\u2713\"}),/*#__PURE__*/_jsxs(Typography,{fontSize:13,color:\"#2e7d32\",children:[\"\\u2713 Verified as: \",sessionStorage.getItem(\"discordUsername\")]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",sx:{borderRadius:\"10px\",fontWeight:\"bold\",backgroundColor:\"#1E4DD8\",\"&:hover\":{backgroundColor:\"#1536A1\"}},onClick:handleVerifyDiscord,disabled:discordStatus.verifying,startIcon:discordStatus.verifying?/*#__PURE__*/_jsx(CircularProgress,{size:20,color:\"inherit\"}):null,children:discordStatus.verifying?\"REDIRECTING...\":\"VERIFY DISCORD\"}),discordNotMember&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"outlined\",sx:{borderRadius:\"10px\",fontWeight:\"bold\"},onClick:()=>window.open(DISCORD_INVITE,\"_blank\"),children:\"JOIN DISCORD SERVER\"}),/*#__PURE__*/_jsx(Typography,{fontSize:13,color:\"#d32f2f\",children:\"\\u274C You must join our Discord server before verification.\"})]})]})}),/*#__PURE__*/_jsx(Typography,{fontWeight:\"bold\",fontSize:14,mt:2,mb:1,children:\"LinkedIn URL (Optional):\"}),/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\",flexDirection:\"column\",gap:1,width:\"100%\"},children:/*#__PURE__*/_jsx(TextField,{label:\"Enter LinkedIn profile URL\",placeholder:\"https://www.linkedin.com/in/username\",value:formData.linkedinId,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{linkedinId:e.target.value})),size:\"small\",fullWidth:true})})]})]}),/*#__PURE__*/_jsxs(Box,{mt:2,children:[/*#__PURE__*/_jsx(Typography,{fontWeight:\"bold\",fontSize:14,mb:1,children:\"Phone Verification:\"}),/*#__PURE__*/_jsx(\"div\",{id:\"recaptcha-container-update\"}),!phoneVerification.isVerified&&/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:1,mt:1,children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",fullWidth:true,onClick:handleRequestOtp,disabled:phoneVerification.isProcessing||timer>0,children:timer>0?\"Resend in \".concat(timer,\"s\"):phoneVerification.isProcessing?\"Sending...\":phoneVerification.showOtpInput?\"Resend OTP\":\"Send OTP\"}),phoneVerification.showOtpInput&&/*#__PURE__*/_jsx(TextField,{label:\"Enter 6-digit OTP\",size:\"small\",value:phoneVerification.otp,onChange:e=>{const onlyNums=e.target.value.replace(/\\D/g,\"\");if(onlyNums.length<=6)setPhoneVerification(_objectSpread(_objectSpread({},phoneVerification),{},{otp:onlyNums}));},inputProps:{inputMode:\"numeric\",pattern:\"[0-9]*\",maxLength:6,onKeyPress:e=>{if(!/[0-9]/.test(e.key))e.preventDefault();}}}),phoneVerification.showOtpInput&&/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handleVerifyOtp,disabled:phoneVerification.isProcessing,children:phoneVerification.isProcessing?/*#__PURE__*/_jsx(CircularProgress,{size:18,color:\"inherit\"}):\"Verify\"})]}),phoneVerification.isVerified&&/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",gap:1,mt:1},children:[/*#__PURE__*/_jsx(FiCheckCircle,{size:18,color:\"#2e7d32\"}),/*#__PURE__*/_jsx(Typography,{color:\"success.main\",children:\"Phone verified successfully!\"})]})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:2,mt:3,children:[/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",fullWidth:true,disabled:!isFormComplete(),children:\"Submit\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",fullWidth:true,onClick:handleDefer,disabled:oauthInProgress,children:\"Defer\"})]})]})]})});};export default UpdateForm;","map":{"version":3,"names":["React","useEffect","useState","useRef","useSearchParams","API","validateToken","submitForm","deferForm","optOut","searchOrgs","auth","signInWithPhoneNumber","RecaptchaVerifier","GithubAuthProvider","signInWithPopup","getAdditionalUserInfo","signOut","Swal","Box","Paper","Typography","TextField","Button","FormControl","InputLabel","Select","MenuItem","CircularProgress","Stack","Divider","Autocomplete","Fade","keyframes","MuiTelInput","parsePhoneNumber","isValidPhoneFormat","logo1","logo2","FiCheckCircle","FiAlertTriangle","FiXCircle","FiClock","FiLink","FiMail","FiSave","FiLock","FiInfo","FiSlash","FiUserCheck","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","shake","_templateObject","_taggedTemplateLiteral","ROLES","value","label","ROLE_MAP","R004","GENDERS","SKILLS","githubRegex","linkedinRegex","DISCORD_REDIRECT","DISCORD_INVITE","generateOAuthState","Math","random","toString","substring","Date","now","DISCORD_OAUTH","state","encodeURIComponent","UpdateForm","_formData$organizatio4","_formData$organizatio5","_formData$organizatio6","_formData$organizatio7","searchParams","token","get","formData","setFormData","fullName","email","phone","gender","organization","role","skills","githubId","githubUrl","discordId","linkedinId","phoneVerification","setPhoneVerification","isVerified","showOtpInput","otp","isProcessing","firebaseToken","status","setStatus","errorMessage","setErrorMessage","interested","setInterested","optoutReason","setOptoutReason","optoutProcessing","setOptoutProcessing","timer","setTimer","orgLoadError","setOrgLoadError","showCustomOrg","setShowCustomOrg","orgOptions","setOrgOptions","orgLoading","setOrgLoading","isDirtyRef","fadeOut","setFadeOut","countdown","setCountdown","timeRemaining","setTimeRemaining","isSubmitting","setIsSubmitting","recaptchaCleanedUp","recaptchaContainerIdRef","recaptchaWidgetIdRef","shakeSkills","setShakeSkills","cleanupRecaptcha","aggressive","arguments","length","undefined","console","log","concat","window","recaptchaVerifier","clear","e","warn","grecaptcha","reset","current","container","document","getElementById","innerHTML","textContent","Array","from","attributes","forEach","attr","name","startsWith","removeAttribute","isFormComplete","_formData$fullName","_formData$email","_formData$phone","hasValidOrg","ref","type","orgType","requiredFieldsFilled","trim","socialVerified","githubStatus","verified","discordVerified","phoneVerified","setGithubStatus","verifying","username","avatar","error","setDiscordVerified","sessionStorage","getItem","discordNotMember","setDiscordNotMember","discordStatus","setDiscordStatus","oauthInProgress","setOauthInProgress","showAlert","text","icon","fire","confirmButtonColor","isReturningFromOAuth","savedFormData","savedToken","parsedData","JSON","parse","prev","_objectSpread","savedPhoneVerification","parsedPhoneData","post","inProgress","catch","err","removeItem","activateAndValidate","activateRes","res","data","valid","_partialRes$data","_activateRes$data","partialRes","partial","techStack","activatedAt","activatedTime","getTime","elapsed","floor","remaining","max","setTimeout","alert","clearTimeout","message","_err$response","_err$response$data","errorMsg","response","setInterval","_unused","clearInterval","interval","t","url","notMember","discordUsername","close","verifiedAt","ageInMs","oneHourInMs","loadInitialOrgs","results","countdownInterval","title","html","confirmButtonText","handleVerifyGithub","_info$profile","provider","result","info","githubUsername","githubAvatar","profile","avatar_url","Error","verifiedUrl","setItem","_err$message","_err$message2","code","includes","handleVerifyDiscord","stringify","toISOString","location","href","handleOrgSearch","searchTerm","handleOrgChange","source","id","orgRef","handleChange","target","handleRequestOtp","phoneValidation","isValid","p","uniqueContainerId","newDiv","createElement","className","appendChild","Promise","resolve","targetContainer","size","callback","expired-callback","widgetId","render","renderError","e164Phone","e164","confirmationResult","_err$message3","handleVerifyOtp","confirm","user","getIdToken","verifiedState","handleSubmit","_formData$fullName2","_formData$email2","preventDefault","showCancelButton","isConfirmed","_formData$fullName3","_formData$email3","_formData$organizatio","_formData$organizatio2","_formData$organizatio3","_formData$githubUrl","_formData$githubId","_formData$discordId","_formData$linkedinId","_finalData$token","_finalData$firebaseTo","cleanedData","finalData","Object","keys","key","delete","_err$response2","_err$response3","_err$response4","_err$response4$data","_err$response5","_err$response6","_err$response6$data","userId","handleDefer","confirmDefer","_err$response7","_err$response7$data","handleOptOut","reason","_err$response8","_err$response8$data","align","children","sx","minHeight","display","justifyContent","alignItems","bgcolor","width","maxWidth","borderRadius","boxShadow","textAlign","gap","mb","color","variant","fontWeight","my","gutterBottom","mx","mt","style","marginTop","component","rel","fontSize","textDecoration","border","flex","opacity","transition","spacing","direction","src","alt","height","objectFit","backgroundColor","String","padStart","fullWidth","onChange","multiline","rows","placeholder","onClick","disabled","onSubmit","margin","required","defaultCountry","forceCallingCode","focusOnSelectCountry","helperText","map","g","options","loading","filterOptions","x","getOptionLabel","o","isOptionEqualToValue","option","_option$orgRef","_value$orgRef","_option$orgRef2","_value$orgRef2","onInputChange","v","renderInput","params","InputProps","readOnly","r","_formData$skills","_formData$skills2","_formData$skills3","isTechStackComplete","cursor","_skillsOpen","in","animation","multiple","disableCloseOnSelect","limitTags","getOptionDisabled","event","newValue","isMaxReached","FormHelperTextProps","isSocialFullyVerified","_socialOpen","flexDirection","startIcon","open","onlyNums","replace","inputProps","inputMode","pattern","maxLength","onKeyPress","test"],"sources":["/home/rcts/Email-differ/Frontend/src/pages/Signin-otp/UpdateForm.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { useSearchParams } from \"react-router-dom\";\nimport API, {\n  validateToken,\n  submitForm,\n  deferForm,\n  optOut,\n  searchOrgs,\n} from \"../../api/apiService\";\nimport { auth, signInWithPhoneNumber, RecaptchaVerifier } from \"../../firebase\";\nimport {\n  GithubAuthProvider,\n  signInWithPopup,\n  getAdditionalUserInfo,\n  signOut,\n} from \"firebase/auth\";\n\nimport Swal from \"sweetalert2\";\nimport {\n  Box,\n  Paper,\n  Typography,\n  TextField,\n  Button,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  CircularProgress,\n  Stack,\n  Divider,\n  Autocomplete,\n  Fade,\n} from \"@mui/material\";\nimport { keyframes } from \"@mui/system\";\nimport { MuiTelInput } from 'mui-tel-input';\nimport { parsePhoneNumber, isValidPhoneFormat } from \"../../utils/phoneUtils\";\nimport logo1 from \"../../assets/badal_logo.png\";\nimport logo2 from \"../../assets/c4gt_logo.png\";\nimport {\n  FiCheckCircle,\n  FiAlertTriangle,\n  FiXCircle,\n  FiClock,\n  FiLink,\n  FiMail,\n  FiSave,\n  FiLock,\n  FiInfo,\n  FiSlash,\n  FiUserCheck\n} from \"react-icons/fi\";\n\n// âœ… Shake animation for skill limit\nconst shake = keyframes`\n  0% { transform: translateX(0); }\n  20% { transform: translateX(-4px); }\n  40% { transform: translateX(4px); }\n  60% { transform: translateX(-3px); }\n  80% { transform: translateX(3px); }\n  100% { transform: translateX(0); }\n`;\n\n// âœ… Role List (matching SignUpPage)\nconst ROLES = [\n  { value: \"R004\", label: \"Developer\" },\n];\n\n// âœ… Role codes to backend strings (consistent with SignUpPage)\n// eslint-disable-next-line no-unused-vars\nconst ROLE_MAP = {\n  R004: \"Developer\",\n  \n};\n\nconst GENDERS = [\"Male\", \"Female\", \"Other\", \"Prefer not to say\"];\n\n// âœ… Tech Skills (same as SignUpPage)\nconst SKILLS = [\n  \"Frontend Development\",\n  \"Backend Development\",\n  \"Full Stack Development\",\n  \"UI/UX Design\",\n  \"Data Science\",\n  \"Machine Learning\",\n  \"DevOps\",\n  \"Cloud Computing\",\n  \"Cybersecurity\",\n  \"Mobile App Development\",\n  \"Blockchain\",\n  \"Product Management\",\n  \"Public Policy\",\n  \"Research\",\n  \"Technical Writing\",\n];\n\n// âœ… Validation regex (available for future use)\n// eslint-disable-next-line no-unused-vars\nconst githubRegex = /^https:\\/\\/(www\\.)?github\\.com\\/[A-Za-z0-9_-]+\\/?$/;\n// eslint-disable-next-line no-unused-vars\nconst linkedinRegex = /^https:\\/\\/(www\\.)?linkedin\\.com\\/in\\/[A-Za-z0-9_-]+\\/?$/;\n\n const DISCORD_REDIRECT = \"https://pl-app.iiit.ac.in/rcts/account-setup/discord-callback\";\n// const DISCORD_INVITE = \"https://discord.gg/BsbzbUHz\";\n//const DISCORD_REDIRECT = \"http://127.0.0.1:3000/rcts/codeforgovtech/discord-callback\";\nconst DISCORD_INVITE = \"https://discord.gg/BsbzbUHz\";\n// âœ… Generate OAuth state for CSRF protection\nconst generateOAuthState = () => {\n  return Math.random().toString(36).substring(2) + Date.now().toString(36);\n};\n\nconst DISCORD_OAUTH = (state) =>\n  \"https://discord.com/oauth2/authorize\" +\n  \"?client_id=1450787791834447874\" +\n  \"&redirect_uri=\" +\n  encodeURIComponent(DISCORD_REDIRECT) +\n  \"&response_type=code\" +\n  \"&scope=identify%20guilds\" +\n  \"&state=\" + encodeURIComponent(state);\n\n// LinkedIn OAuth removed: collecting URL via input field instead\n\n\n\nconst UpdateForm = () => {\n  const [searchParams] = useSearchParams();\n  const token = searchParams.get(\"token\");\n\n  const [formData, setFormData] = useState({\n    fullName: \"\",\n    email: \"\",\n    phone: \"\",\n    gender: \"\",\n    organization: null,\n    role: \"\",\n    skills: [],\n    githubId: \"\",\n    githubUrl: \"\",\n    discordId: \"\",\n    linkedinId: \"\",\n  });\n\n  const [phoneVerification, setPhoneVerification] = useState({\n    isVerified: false,\n    showOtpInput: false,\n    otp: \"\",\n    isProcessing: false,\n    firebaseToken: null, // âœ… Store Firebase token for form submission\n  });\n\n  const [status, setStatus] = useState(\"loading\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [interested, setInterested] = useState(null);\n  const [optoutReason, setOptoutReason] = useState(\"\");\n  const [optoutProcessing, setOptoutProcessing] = useState(false);\n  const [timer, setTimer] = useState(0);\n  \n  // ---------------- ORG STATE ----------------\n  const [orgLoadError, setOrgLoadError] = useState(false);\n  const [showCustomOrg, setShowCustomOrg] = useState(false);\n  const [orgOptions, setOrgOptions] = useState([]);\n  const [orgLoading, setOrgLoading] = useState(false);\n  const isDirtyRef = useRef(false);\n  const [fadeOut, setFadeOut] = useState(false);\n  const [countdown, setCountdown] = useState(5);\n  const [timeRemaining, setTimeRemaining] = useState(600); // 10 minutes in seconds\n  const [isSubmitting, setIsSubmitting] = useState(false); // âœ… Prevent double submit\n  const recaptchaCleanedUp = useRef(false); // âœ… Track recaptcha cleanup\n  const recaptchaContainerIdRef = useRef(0); // âœ… Track unique container IDs\n  const recaptchaWidgetIdRef = useRef(null); // âœ… Track widget ID for proper cleanup\n  const [shakeSkills, setShakeSkills] = useState(false); // âœ… Shake animation state\n\n  // âœ… Reusable reCAPTCHA cleanup function\n  const cleanupRecaptcha = async (aggressive = false) => {\n    console.log(`ðŸ§¹ Cleaning up reCAPTCHA (aggressive: ${aggressive})...`);\n    \n    // Step 1: Clear Firebase RecaptchaVerifier\n    if (window.recaptchaVerifier) {\n      try {\n        await window.recaptchaVerifier.clear();\n        console.log('âœ“ Cleared recaptchaVerifier');\n      } catch (e) {\n        console.warn('Failed to clear recaptchaVerifier:', e);\n      }\n      delete window.recaptchaVerifier;\n      window.recaptchaVerifier = null;\n    }\n    \n    // Step 2: Reset ALL grecaptcha widgets aggressively\n    if (window.grecaptcha && window.grecaptcha.reset) {\n      try {\n        // Try to reset by widget ID first\n        if (recaptchaWidgetIdRef.current !== null) {\n          try {\n            window.grecaptcha.reset(recaptchaWidgetIdRef.current);\n            console.log(`âœ“ Reset grecaptcha widget ${recaptchaWidgetIdRef.current}`);\n          } catch (e) {\n            console.warn('Failed to reset specific widget:', e);\n          }\n        }\n        // Always try to reset without ID (resets all widgets)\n        try {\n          window.grecaptcha.reset();\n          console.log('âœ“ Reset all grecaptcha widgets');\n        } catch (e) {\n          console.warn('Failed to reset all widgets:', e);\n        }\n      } catch (e) {\n        console.warn('Failed to reset grecaptcha:', e);\n      }\n    }\n    recaptchaWidgetIdRef.current = null;\n    \n    // Step 3: Completely remove and recreate DOM container\n    const container = document.getElementById(\"recaptcha-container-update\");\n    if (container) {\n      // Remove ALL content and event listeners\n      container.innerHTML = \"\";\n      container.textContent = \"\";\n      \n      // Remove all data attributes that grecaptcha might have added\n      Array.from(container.attributes).forEach(attr => {\n        if (attr.name.startsWith('data-')) {\n          container.removeAttribute(attr.name);\n        }\n      });\n      \n      console.log('âœ“ Cleared DOM container completely');\n    }\n    \n    recaptchaCleanedUp.current = true;\n  };\n\n  // Form validation - check if all required fields are filled\n  const isFormComplete = () => {\n    // âœ… Check if submission is in progress\n    if (isSubmitting) return false;\n    \n    // âœ… Check organization object structure\n    const hasValidOrg =\n      formData.organization &&\n      formData.organization.name &&\n      formData.organization.ref &&\n      formData.organization.ref.type &&\n      (\n        formData.organization.ref.type !== \"custom\" ||\n        formData.organization.orgType\n      );\n    \n    const requiredFieldsFilled = \n      formData.fullName?.trim() !== \"\" &&\n      formData.email?.trim() !== \"\" &&\n      formData.phone?.trim() !== \"\" &&\n      formData.gender !== \"\" &&\n      hasValidOrg &&\n      formData.role !== \"\";\n    \n    const socialVerified = githubStatus.verified && discordVerified;\n    const phoneVerified = phoneVerification.isVerified;\n    \n    return requiredFieldsFilled && socialVerified && phoneVerified;\n  };\n\n  // OAuth verification states\n  const [githubStatus, setGithubStatus] = useState({\n    verifying: false,\n    verified: false,\n    username: \"\",\n    avatar: \"\", // âœ… Store avatar URL\n    error: \"\",\n  });\n  const [discordVerified, setDiscordVerified] = useState(\n    sessionStorage.getItem(\"discordVerified\") === \"true\"\n  );\n  const [discordNotMember, setDiscordNotMember] = useState(\n    sessionStorage.getItem(\"discordNotMember\") === \"true\"\n  );\n  const [discordStatus, setDiscordStatus] = useState({\n    verifying: false,\n  });\n  const [oauthInProgress, setOauthInProgress] = useState(false);\n\n  // ðŸ”” SweetAlert helper\n  const showAlert = (text, icon = \"info\") =>\n    Swal.fire({\n      text,\n      icon,\n      confirmButtonColor: \"#1E4DD8\",\n    });\n\n  // âœ… Restore UpdateForm context when returning from OAuth\n  useEffect(() => {\n    const isReturningFromOAuth = sessionStorage.getItem(\"isNavigating\");\n    if (isReturningFromOAuth) {\n      const savedFormData = sessionStorage.getItem(\"updateFormData\");\n      const savedToken = sessionStorage.getItem(\"updateFormToken\");\n      \n      if (savedFormData) {\n        try {\n          const parsedData = JSON.parse(savedFormData);\n          setFormData(prev => ({ ...prev, ...parsedData }));\n        } catch (e) {\n          console.error(\"Failed to restore form data:\", e);\n        }\n      }\n      \n      // âœ… Restore phone verification state\n      const savedPhoneVerification = sessionStorage.getItem(\"phoneVerificationState\");\n      if (savedPhoneVerification) {\n        try {\n          const parsedPhoneData = JSON.parse(savedPhoneVerification);\n          setPhoneVerification(prev => ({\n            ...prev,\n            isVerified: parsedPhoneData.isVerified,\n            firebaseToken: parsedPhoneData.firebaseToken,\n            showOtpInput: false, // Hide OTP input since already verified\n          }));\n          console.log(\"âœ… Restored phone verification state from sessionStorage\");\n        } catch (e) {\n          console.error(\"Failed to restore phone verification:\", e);\n        }\n      }\n      \n      // Clear OAuth in progress flag on backend\n      if (savedToken) {\n        API.post('/form/oauth-status', { token: savedToken, inProgress: false })\n          .catch(err => console.error(\"Failed to clear OAuth flag:\", err));\n      }\n      \n      sessionStorage.removeItem(\"isNavigating\");\n      sessionStorage.removeItem(\"updateFormData\");\n      sessionStorage.removeItem(\"updateFormToken\");\n      setOauthInProgress(false);\n    }\n  }, []);\n\n  // âœ… Token validation\n  useEffect(() => {\n    const activateAndValidate = async () => {\n      if (!token) {\n        setStatus(\"invalid\");\n        setErrorMessage(\"No token provided\");\n        return;\n      }\n\n      try {\n        // âœ… Activate token and get activatedAt timestamp\n        const activateRes = await API.post(\"/form/activate\", { token });\n        const res = await validateToken(token);\n\n        if (res.data.valid) {\n          setStatus(\"valid\");\n\n          const partialRes = await API.get(`/form/partial/${token}`);\n          if (partialRes.data?.data) {\n            const partial = partialRes.data.data;\n\n            setFormData((prev) => ({\n              ...prev,\n              ...partial,\n              skills: partial.techStack || partial.skills || [],   // âœ… map correctly\n            }));\n          }\n\n          // âœ… Calculate time remaining from backend activatedAt timestamp\n          if (activateRes.data?.activatedAt) {\n            const activatedTime = new Date(activateRes.data.activatedAt).getTime();\n            const now = Date.now();\n            const elapsed = Math.floor((now - activatedTime) / 1000); // seconds elapsed\n            const remaining = Math.max(0, 600 - elapsed); // 10 minutes = 600 seconds\n            setTimeRemaining(remaining);\n          }\n\n          // â° Token expires after 7 days (matches backend expiry window)\n          const timer = setTimeout(() => {\n            setStatus(\"expired\");\n            alert(\n              \"This link has expired. Please check your email for a new update link.\"\n            );\n          }, 7 * 24 * 60 * 60 * 1000); // 7 days\n\n          return () => clearTimeout(timer);\n        } else {\n          setStatus(\"invalid\");\n          setErrorMessage(res.data.message || \"Invalid token\");\n        }\n      } catch (err) {\n        const errorMsg = err.response?.data?.message || \"Failed to load form\";\n        \n        // âœ… Check if form was already submitted\n        if (errorMsg === \"Form already submitted\") {\n          setStatus(\"submitted\");\n        } else {\n          setStatus(\"invalid\");\n          setErrorMessage(errorMsg);\n        }\n      }\n    };\n    activateAndValidate();\n  }, [token]);\n\n  // âœ… Clean up reCAPTCHA on component unmount\n  useEffect(() => {\n    return () => {\n      cleanupRecaptcha(true); // Aggressive cleanup on unmount\n    };\n  }, []);\n\n  // âœ… Auto-save every 5 seconds (only if form data changed)\n  useEffect(() => {\n    if (status !== \"valid\") return;\n    const timer = setInterval(async () => {\n      // âœ… Only save if form data has changed\n      if (!isDirtyRef.current) return;\n      \n      try {\n        await API.post(`/form/save-partial`, { token, data: formData });\n        isDirtyRef.current = false; // âœ… Reset dirty flag after successful save\n      } catch {}\n    }, 5000);\n    return () => clearInterval(timer);\n  }, [formData, status, token]);\n\n  // â± Resend timer\n  useEffect(() => {\n    if (timer > 0) {\n      const interval = setInterval(() => setTimer((t) => t - 1), 1000);\n      return () => clearInterval(interval);\n    }\n  }, [timer]);\n  \n  // Restore GitHub verification from sessionStorage\n  useEffect(() => {\n    const verified = sessionStorage.getItem(\"githubVerified\") === \"true\";\n    const username = sessionStorage.getItem(\"githubUsername\");\n    const url = sessionStorage.getItem(\"githubUrl\");\n\n    if (verified && username && url) {\n      setGithubStatus({\n        verifying: false,\n        verified: true,\n        username,\n        error: \"\",\n      });\n      setFormData(prev => ({ ...prev, githubUrl: url }));\n    }\n  }, []);\n  \n  // Restore Discord verification from sessionStorage\n  useEffect(() => {\n    const verified = sessionStorage.getItem(\"discordVerified\") === \"true\";\n    const notMember = sessionStorage.getItem(\"discordNotMember\") === \"true\";\n\n    setDiscordVerified(verified);\n    setDiscordNotMember(notMember);\n\n    if (verified) {\n      const discordUsername = sessionStorage.getItem(\"discordUsername\");\n      if (discordUsername) {\n        // Use username (display name like \"user#1234\"), not numeric ID\n        setFormData((prev) => ({ ...prev, discordId: discordUsername }));\n      }\n    }\n  }, []);\n  // âœ… Auto-close tab + countdown when deferred\n  useEffect(() => {\n    if (status === \"deferred\") {\n      const interval = setInterval(() => {\n        setCountdown((prev) => {\n          if (prev <= 1) {\n            window.close(); // auto-close after countdown\n            clearInterval(interval);\n            return 0;\n          }\n          return prev - 1;\n        });\n      }, 1000);\n      return () => clearInterval(interval);\n    }\n  }, [status]);\n\n  // Restore GitHub verification from sessionStorage\n  useEffect(() => {\n    const verified = sessionStorage.getItem(\"githubVerified\") === \"true\";\n    const username = sessionStorage.getItem(\"githubUsername\");\n    const url = sessionStorage.getItem(\"githubUrl\");\n\n    if (verified && username && url) {\n      setGithubStatus({\n        verifying: false,\n        verified: true,\n        username,\n        error: \"\",\n      });\n      setFormData(prev => ({ ...prev, githubUrl: url }));\n    }\n  }, []);\n\n  // âœ… Restore phone verification from sessionStorage on mount\n  useEffect(() => {\n    const savedPhoneVerification = sessionStorage.getItem(\"phoneVerificationState\");\n    if (savedPhoneVerification) {\n      try {\n        const parsedPhoneData = JSON.parse(savedPhoneVerification);\n        // Check if verification is still recent (within 1 hour)\n        const verifiedAt = new Date(parsedPhoneData.verifiedAt);\n        const now = new Date();\n        const ageInMs = now - verifiedAt;\n        const oneHourInMs = 60 * 60 * 1000;\n        \n        if (ageInMs < oneHourInMs) {\n          setPhoneVerification(prev => ({\n            ...prev,\n            isVerified: parsedPhoneData.isVerified,\n            firebaseToken: parsedPhoneData.firebaseToken,\n            showOtpInput: false,\n          }));\n          console.log(\"âœ… Restored phone verification from sessionStorage on mount\");\n        } else {\n          // Expired - clear it\n          sessionStorage.removeItem(\"phoneVerificationState\");\n          console.log(\"âš ï¸ Phone verification expired, cleared from sessionStorage\");\n        }\n      } catch (e) {\n        console.error(\"Failed to restore phone verification on mount:\", e);\n      }\n    }\n  }, []);\n\n  // âœ… Load initial org options on mount (matching Signup)\n  useEffect(() => {\n    const loadInitialOrgs = async () => {\n      try {\n        const results = await searchOrgs(\"\");\n        setOrgOptions(results || []);\n      } catch (err) {\n        console.error(\"Failed to load initial organizations:\", err);\n        setOrgLoadError(true);\n      }\n    };\n\n    loadInitialOrgs();\n  }, []);\n\n  // âœ… 10-minute countdown timer with auto-expiry\n  useEffect(() => {\n    if (status === \"valid\" && timeRemaining > 0) {\n      const countdownInterval = setInterval(() => {\n        setTimeRemaining((prev) => {\n          if (prev <= 1) {\n            clearInterval(countdownInterval);\n            setStatus(\"expired\");\n            Swal.fire({\n              icon: \"warning\",\n              title: \"Token Expired\",\n              html: `\n                <p>Your form session has expired after 10 minutes.</p>\n                <p><strong>What happens next?</strong></p>\n                <ul style=\"text-align: left; margin: 10px 20px;\">\n                  <li>This form will be automatically closed</li>\n                  <li>You will receive a new reminder email within 24 hours</li>\n                  <li>You can complete the form using the new link</li>\n                </ul>\n              `,\n              confirmButtonColor: \"#1E4DD8\",\n              confirmButtonText: \"OK\",\n            });\n            return 0;\n          }\n          return prev - 1;\n        });\n      }, 1000);\n\n      return () => clearInterval(countdownInterval);\n    }\n  }, [status, timeRemaining]);\n\n  // âœ… Verify GitHub\n  const handleVerifyGithub = async () => {\n    setGithubStatus({\n      verifying: true,\n      verified: false,\n      username: \"\",\n      avatar: \"\",\n      error: \"\",\n    });\n\n    try {\n      const provider = new GithubAuthProvider();\n      const result = await signInWithPopup(auth, provider);\n\n      const info = getAdditionalUserInfo(result);\n      const githubUsername = info?.username;\n      const githubAvatar = info?.profile?.avatar_url || \"\";\n\n      if (!githubUsername) throw new Error(\"Unable to retrieve GitHub username\");\n\n      const verifiedUrl = `https://github.com/${githubUsername}`;\n      \n      setFormData(prev => ({ ...prev, githubUrl: verifiedUrl }));\n\n      // âœ… Store in sessionStorage for persistence\n      sessionStorage.setItem(\"githubVerified\", \"true\");\n      sessionStorage.setItem(\"githubUsername\", githubUsername);\n      sessionStorage.setItem(\"githubUrl\", verifiedUrl);\n      sessionStorage.setItem(\"githubAvatar\", githubAvatar);\n\n      setGithubStatus({\n        verifying: false,\n        verified: true,\n        username: githubUsername,\n        avatar: githubAvatar,\n        error: \"\",\n      });\n\n      await signOut(auth);\n      showAlert(\"GitHub verified successfully!\", \"success\");\n    } catch (err) {\n      console.error(\"GitHub verify error:\", err);\n      \n      // âœ… Handle different error types\n      let errorMsg = \"GitHub verification failed. Please try again.\";\n      \n      if (err.code === \"auth/popup-closed-by-user\") {\n        errorMsg = \"Verification cancelled. Please try again.\";\n      } else if (err.code === \"auth/popup-blocked\") {\n        errorMsg = \"Popup was blocked by your browser. Please allow popups for this site and try again.\";\n      } else if (err.code === \"auth/cancelled-popup-request\") {\n        errorMsg = \"Verification cancelled. Please try again.\";\n      } else if (err.message?.includes(\"rate\") || err.message?.includes(\"limit\")) {\n        errorMsg = \"Too many verification attempts. Please wait a few minutes and try again.\";\n      }\n      \n      setGithubStatus({\n        verifying: false,\n        verified: false,\n        username: \"\",\n        avatar: \"\",\n        error: errorMsg,\n      });\n      \n      if (err.code !== \"auth/popup-closed-by-user\") {\n        showAlert(errorMsg, \"error\");\n      }\n    }\n  };\n\n  // âœ… Verify Discord (redirect-based)\n  const handleVerifyDiscord = async () => {\n    try {\n      // âœ… Set verifying state\n      setDiscordStatus({ verifying: true });\n      \n      // âœ… Generate OAuth state for CSRF protection\n      const state = generateOAuthState();\n      sessionStorage.setItem(\"discordOAuthState\", state);\n      \n      // âœ… Clear stale member flag before starting\n      sessionStorage.removeItem(\"discordNotMember\");\n      setDiscordNotMember(false);\n      \n      // Mark OAuth as in progress to extend token expiry\n      await API.post('/form/oauth-status', { token, inProgress: true });\n      \n      // Save form data and token before redirect\n      sessionStorage.setItem(\"updateFormData\", JSON.stringify(formData));\n      sessionStorage.setItem(\"updateFormToken\", token);\n      \n      // âœ… Save phone verification state if verified\n      if (phoneVerification.isVerified && phoneVerification.firebaseToken) {\n        sessionStorage.setItem(\"phoneVerificationState\", JSON.stringify({\n          isVerified: true,\n          firebaseToken: phoneVerification.firebaseToken,\n          verifiedAt: new Date().toISOString(),\n        }));\n      }\n      sessionStorage.setItem(\"oauthReturnPath\", `/update-form?token=${token}`);\n      \n      setOauthInProgress(true);\n      \n      // âœ… Show loading state briefly before redirect\n      showAlert(\"Redirecting to Discord...\", \"info\");\n      \n      // Redirect to Discord OAuth with state\n      setTimeout(() => {\n        window.location.href = DISCORD_OAUTH(state);\n      }, 500);\n    } catch (err) {\n      console.error(\"Failed to mark OAuth in progress:\", err);\n      setOauthInProgress(false); // âœ… Clear flag to allow retry\n      setDiscordStatus({ verifying: false }); // âœ… Reset verifying state\n      showAlert(\"Failed to start Discord verification. Please try again.\", \"error\");\n    }\n  };\n\n  // âœ… Handle org search (like Signup)\n  const handleOrgSearch = async (searchTerm) => {\n    if (!searchTerm || searchTerm.trim() === \"\") {\n      setOrgLoading(true);\n      try {\n        const results = await searchOrgs(\"\");\n        setOrgOptions(results || []);\n      } catch (err) {\n        console.error(\"Org search error:\", err);\n        setOrgOptions([]);\n      } finally {\n        setOrgLoading(false);\n      }\n      return;\n    }\n\n    if (searchTerm.length < 2) {\n      return;\n    }\n\n    setOrgLoading(true);\n    try {\n      const results = await searchOrgs(searchTerm);\n      setOrgOptions(results || []);\n    } catch (err) {\n      console.error(\"Org search error:\", err);\n      setOrgOptions([]);\n    } finally {\n      setOrgLoading(false);\n    }\n  };\n\n  // âœ… Handle organization change (matching Signup structure)\n  const handleOrgChange = (value) => {\n    isDirtyRef.current = true;\n\n    if (!value) {\n      setShowCustomOrg(false);\n      setFormData({ ...formData, organization: null });\n      return;\n    }\n\n    if (value.source === \"custom\") {\n      setShowCustomOrg(true);\n      setFormData({\n        ...formData,\n        organization: {\n          source: \"custom\",\n          ref: { type: \"custom\", id: null },\n          name: \"\",\n          orgType: \"\"\n        }\n      });\n    } else {\n      setShowCustomOrg(false);\n      setFormData({\n        ...formData,\n        organization: {\n          source: value.source,\n          ref: value.orgRef,\n          name: value.label,\n          orgType: value.orgType\n        }\n      });\n    }\n  };\n\n  // âœ… Handle changes\n  const handleChange = (e) => {\n    isDirtyRef.current = true;\n    const { name, value } = e.target;\n\n    setFormData({ ...formData, [name]: value });\n  };\n\n  // âœ… Request OTP\n  const handleRequestOtp = async () => {\n    const phoneValidation = parsePhoneNumber(formData.phone);\n\n    if (!phoneValidation.isValid) {\n      return showAlert(\n        \"Please enter a valid phone number.\",\n        \"warning\"\n      );\n    }\n\n    if (timer > 0)\n      return showAlert(`Please wait ${timer}s before resending OTP.`, \"info\");\n\n    // âœ… Prevent multiple rapid clicks\n    if (phoneVerification.isProcessing) {\n      console.log('âš ï¸ OTP request already in progress');\n      return;\n    }\n\n    setPhoneVerification((p) => ({ ...p, isProcessing: true }));\n\n    try {\n      // âœ… Use aggressive cleanup utility\n      await cleanupRecaptcha(true);\n      \n      // Generate unique container ID\n      recaptchaContainerIdRef.current += 1;\n      const uniqueContainerId = `recaptcha-container-update-${recaptchaContainerIdRef.current}`;\n      \n      // Recreate container\n      const container = document.getElementById(\"recaptcha-container-update\");\n      if (!container) {\n        console.error('âŒ recaptcha-container-update not found in DOM');\n        throw new Error('reCAPTCHA container not found');\n      }\n      \n      // Create fresh inner div\n      const newDiv = document.createElement('div');\n      newDiv.id = uniqueContainerId;\n      newDiv.className = 'recaptcha-inner';\n      container.appendChild(newDiv);\n\n      // Wait for DOM to be ready\n      await new Promise(resolve => setTimeout(resolve, 200));\n      \n      // Verify container exists\n      const targetContainer = document.getElementById(uniqueContainerId);\n      if (!targetContainer) {\n        throw new Error(`Container ${uniqueContainerId} not found after creation`);\n      }\n      \n      console.log(`âœ“ Created fresh container: ${uniqueContainerId}`);\n\n      // Step 6: Create new RecaptchaVerifier with unique container\n      console.log('ðŸ”§ Creating new RecaptchaVerifier...');\n      window.recaptchaVerifier = new RecaptchaVerifier(\n        auth,\n        uniqueContainerId,\n        {\n          size: \"invisible\",\n          callback: () => console.log(\"reCAPTCHA solved\"),\n          \"expired-callback\": () => console.warn(\"reCAPTCHA expired\"),\n        }\n      );\n\n      // Step 7: Render and store widget ID (with additional error handling)\n      let widgetId;\n      try {\n        widgetId = await window.recaptchaVerifier.render();\n        recaptchaWidgetIdRef.current = widgetId;\n        console.log(`âœ… reCAPTCHA rendered successfully in ${uniqueContainerId} (widget ID: ${widgetId})`);\n      } catch (renderError) {\n        // If render still fails, try one more time with complete reset\n        console.warn('âš ï¸ First render attempt failed, trying complete reset...', renderError);\n        \n        // Nuclear option: reload grecaptcha script\n        if (window.grecaptcha) {\n          delete window.grecaptcha;\n        }\n        \n        // Wait a bit longer\n        await new Promise(resolve => setTimeout(resolve, 500));\n        \n        // Try to render again\n        widgetId = await window.recaptchaVerifier.render();\n        recaptchaWidgetIdRef.current = widgetId;\n        console.log(`âœ… reCAPTCHA rendered successfully on retry (widget ID: ${widgetId})`);\n      }\n\n      const e164Phone = phoneValidation.e164;\n      const confirmationResult = await signInWithPhoneNumber(\n        auth,\n        e164Phone,\n        window.recaptchaVerifier\n      );\n      window.confirmationResult = confirmationResult;\n\n      showAlert(\"OTP sent successfully to your phone!\", \"success\");\n      setPhoneVerification({\n        showOtpInput: true,\n        isVerified: false,\n        otp: \"\",\n        isProcessing: false,\n      });\n      setTimer(30); // cooldown\n      recaptchaCleanedUp.current = false;\n    } catch (err) {\n      console.error(\"OTP send error:\", err);\n      \n      // âœ… Provide user-friendly error messages\n      let errorMsg = \"Failed to send OTP. Please try again.\";\n      if (err.code === \"auth/too-many-requests\") {\n        errorMsg = \"Too many attempts. Please try again later.\";\n      } else if (err.code === \"auth/invalid-phone-number\") {\n        errorMsg = \"Invalid phone number format.\";\n      } else if (err.message?.includes(\"reCAPTCHA\")) {\n        errorMsg = err.message;\n      }\n      \n      showAlert(errorMsg, \"error\");\n      \n      // âœ… Clean up on error\n      await cleanupRecaptcha(true);\n      \n      setPhoneVerification((p) => ({ ...p, isProcessing: false }));\n    }\n  };\n\n  // âœ… Verify OTP\n  const handleVerifyOtp = async () => {\n    if (!phoneVerification.otp.trim() || phoneVerification.otp.length !== 6) {\n      return showAlert(\"Please enter a valid 6-digit OTP.\", \"warning\");\n    }\n\n    setPhoneVerification((p) => ({ ...p, isProcessing: true }));\n\n    try {\n      const result = await window.confirmationResult.confirm(\n        phoneVerification.otp\n      );\n      const user = result.user;\n      const firebaseToken = await user.getIdToken();\n\n      // âœ… Send phone in E.164 format\n      await API.post(`/form/verify-phone`, {\n        token,\n        phone: formData.phone, // E.164 format from MuiTelInput\n        firebaseToken,\n      });\n\n      showAlert(\"Phone verified successfully!\", \"success\");\n\n      const verifiedState = {\n        ...phoneVerification,\n        isVerified: true,\n        isProcessing: false,\n        firebaseToken, // âœ… Store token for form submission\n      };\n      \n      setPhoneVerification(verifiedState);\n      \n      // âœ… Save to sessionStorage to persist across OAuth redirects\n      sessionStorage.setItem(\"phoneVerificationState\", JSON.stringify({\n        isVerified: true,\n        firebaseToken,\n        verifiedAt: new Date().toISOString(),\n      }));\n      \n      // âœ… Clean up recaptcha after successful verification\n      await cleanupRecaptcha(false);\n    } catch (err) {\n      console.error(\"OTP verification failed:\", err);\n      \n      // âœ… User-friendly error messages\n      let errorMsg = \"Invalid or expired OTP. Please try again.\";\n      if (err.code === \"auth/invalid-verification-code\") {\n        errorMsg = \"Invalid OTP code. Please check and try again.\";\n      } else if (err.code === \"auth/code-expired\") {\n        errorMsg = \"OTP has expired. Please request a new one.\";\n      }\n      \n      showAlert(errorMsg, \"error\");\n      \n      // âœ… Clear verifier to allow retry\n      await cleanupRecaptcha(false);\n      \n      setPhoneVerification((p) => ({ ...p, isProcessing: false }));\n    }\n  };\n\n  // âœ… Submit\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    // âœ… Prevent double submission\n    if (isSubmitting) {\n      return;\n    }\n\n    // âœ… Detailed validation\n    if (!formData.fullName?.trim()) {\n      return showAlert(\"Please enter your full name.\", \"warning\");\n    }\n    \n    const phoneValidation = parsePhoneNumber(formData.phone);\n    if (!phoneValidation.isValid) {\n      return showAlert(\"Please enter a valid phone number.\", \"warning\");\n    }\n    if (!formData.email?.trim() || !formData.email.includes(\"@\")) {\n      return showAlert(\"Please enter a valid email address.\", \"warning\");\n    }\n    if (!formData.gender) {\n      return showAlert(\"Please select your gender.\", \"warning\");\n    }\n    if (\n      !formData.organization ||\n      !formData.organization.name ||\n      !formData.organization.ref ||\n      !formData.organization.ref.type\n    ) {\n      return showAlert(\"Please select or enter your organization.\", \"warning\");\n    }\n    if (!formData.role) {\n      return showAlert(\"Please select your role.\", \"warning\");\n    }\n    if (!githubStatus.verified) {\n      return showAlert(\"Please verify your GitHub account before submitting.\", \"warning\");\n    }\n    if (!discordVerified) {\n      return showAlert(\"Please verify your Discord account before submitting.\", \"warning\");\n    }\n    if (!phoneVerification.isVerified) {\n      return showAlert(\"Please verify your phone number before submitting.\", \"warning\");\n    }\n    if (!formData.skills || formData.skills.length === 0) {\n      return showAlert(\"Please select at least one tech skill.\", \"warning\");\n    }\n    if (formData.skills.length > 6) {\n      return showAlert(\"You can select maximum 6 skills.\", \"warning\");\n    }\n\n    const confirm = await Swal.fire({\n      title: \"Confirm Submission?\",\n      text: \"Please review your information before submitting.\",\n      icon: \"question\",\n      showCancelButton: true,\n      confirmButtonText: \"Submit\",\n      confirmButtonColor: \"#1E4DD8\",\n    });\n\n    if (!confirm.isConfirmed) return;\n\n    // âœ… Prevent multiple submissions\n    if (isSubmitting) {\n      console.log('âš ï¸ Submission already in progress');\n      return;\n    }\n\n    setIsSubmitting(true);\n\n    try {\n      isDirtyRef.current = false;\n      \n      // âœ… Get verified social media data from sessionStorage\n      const githubUsername = sessionStorage.getItem(\"githubUsername\") || \"\";\n      const githubUrl = sessionStorage.getItem(\"githubUrl\") || \"\";\n      const discordId = sessionStorage.getItem(\"discordId\") || \"\";\n      \n      const cleanedData = {\n        fullName: formData.fullName?.trim(),\n        email: formData.email?.trim(),\n        phone: phoneValidation.e164,\n        gender: formData.gender,\n        organization: {\n          name: formData.organization?.name,\n          ref: formData.organization?.ref,\n          orgType: formData.organization?.orgType\n        },\n        role: formData.role,\n        techStack: formData.skills,\n        githubUrl: githubUrl || formData.githubUrl?.trim() || null,\n        githubId: githubUsername || formData.githubId?.trim() || null,\n        discordId: discordId || formData.discordId?.trim() || null,\n        linkedinId: formData.linkedinId?.trim() || null,\n        token,\n        firebaseToken: phoneVerification.firebaseToken, // âœ… Include Firebase token\n      };\n      \n      // âœ… Remove null/empty fields (but keep token and firebaseToken)\n      const finalData = {};\n      Object.keys(cleanedData).forEach(key => {\n        // Always include token and firebaseToken\n        if (key === 'token' || key === 'firebaseToken') {\n          finalData[key] = cleanedData[key];\n        } else if (cleanedData[key] !== null && cleanedData[key] !== \"\") {\n          finalData[key] = cleanedData[key];\n        }\n      });\n      \n      // âœ… Debug logging\n      console.log('ðŸ“¤ Submitting form with keys:', Object.keys(finalData));\n      console.log('ðŸ“¤ Token:', finalData.token?.substring(0, 10) + '...');\n      console.log('ðŸ“¤ Firebase token:', finalData.firebaseToken?.substring(0, 20) + '...');\n      \n      await submitForm(finalData);\n      await API.delete(`/form/partial/${token}`);\n      \n      sessionStorage.removeItem(\"updateFormData\");\n      sessionStorage.removeItem(\"updateFormToken\");\n      sessionStorage.removeItem(\"oauthReturnPath\");\n      sessionStorage.removeItem(\"phoneVerificationState\"); // âœ… Clear phone verification\n      sessionStorage.removeItem(\"githubVerified\");\n      sessionStorage.removeItem(\"githubUsername\");\n      sessionStorage.removeItem(\"githubUrl\");\n      sessionStorage.removeItem(\"githubAvatar\");\n      sessionStorage.removeItem(\"discordVerified\");\n      sessionStorage.removeItem(\"discordUsername\");\n      sessionStorage.removeItem(\"discordId\");\n      sessionStorage.removeItem(\"discordAvatarUrl\");\n      sessionStorage.removeItem(\"discordNotMember\");\n      sessionStorage.removeItem(\"discordOAuthState\");\n      \n      setStatus(\"submitted\");\n      showAlert(\"Form submitted successfully!\", \"success\");\n    } catch (err) {\n      console.error(\"Submission error:\", err);\n      console.error(\"Error response:\", err.response?.data);\n      console.error(\"Error status:\", err.response?.status);\n      \n      const errorMessage = err.response?.data?.message || \"Submission failed. Please try again.\";\n      \n      // âœ… Handle 409 Conflict (user already exists)\n      if (err.response?.status === 409) {\n        const userId = err.response?.data?.userId;\n        showAlert(\n          `This account already exists${userId ? ` (User ID: ${userId})` : ''}. ${errorMessage}`,\n          \"error\"\n        );\n        return;\n      }\n      \n      // âœ… If phone conflict error, reset phone verification so user can change number\n      if (errorMessage.includes(\"phone number\") || errorMessage.includes(\"already registered\")) {\n        setPhoneVerification({\n          isVerified: false,\n          showOtpInput: false,\n          otp: \"\",\n          isProcessing: false,\n          firebaseToken: null,\n        });\n        showAlert(\n          \"This phone number is already registered with a different account. Please use a different number or verify with the correct account.\",\n          \"error\"\n        );\n      } else {\n        showAlert(errorMessage, \"error\");\n      }\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // âœ… Defer\n  // âœ… Defer (with confirmation + smooth exit)\n  const handleDefer = async () => {\n    const confirmDefer = window.confirm(\n      \"Are you sure you want to defer filling this form?\\nYouâ€™ll receive a reminder email later.\"\n    );\n    if (!confirmDefer) return; // user chose No â€” stay on form\n\n    try {\n      await deferForm({ token });\n      setFadeOut(true);\n      setTimeout(() => setStatus(\"deferred\"), 600); // fade-out animation time\n    } catch (err) {\n      showAlert(\n        err.response?.data?.message || \"Failed to defer form.\",\n        \"error\"\n      );\n    }\n  };\n\n  // âœ… Opt-out\n  const handleOptOut = async () => {\n    const confirm = await Swal.fire({\n      title: \"Confirm Opt-Out?\",\n      text: \"You wonâ€™t receive future communications.\",\n      icon: \"warning\",\n      showCancelButton: true,\n      confirmButtonText: \"Opt Out\",\n      confirmButtonColor: \"#d33\",\n    });\n\n    if (!confirm.isConfirmed) return;\n\n    setOptoutProcessing(true);\n    try {\n      await optOut({ token, reason: optoutReason });\n      setOptoutProcessing(false);\n      setInterested(\"no\");\n      setStatus(\"deferred\");\n      showAlert(\"You have been opted out successfully.\", \"success\");\n    } catch (err) {\n      setOptoutProcessing(false);\n      showAlert(err.response?.data?.message || \"Failed to opt out.\", \"error\");\n    }\n  };\n\n  // âœ… Conditional Views\n  if (status === \"loading\")\n    return <Typography align=\"center\">Loading form...</Typography>;\n  if (status === \"invalid\")\n    return (\n      <Box\n        sx={{\n          minHeight: \"100vh\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          bgcolor: \"#f8f9fa\",\n          p: 2,\n        }}\n      >\n        <Paper\n          sx={{\n            width: \"100%\",\n            maxWidth: 480,\n            p: 4,\n            borderRadius: 3,\n            boxShadow: 4,\n            textAlign: \"center\",\n          }}\n        >\n          <Box sx={{ display: \"flex\", alignItems: \"center\", justifyContent: \"center\", gap: 1, mb: 1 }}>\n            <FiXCircle size={28} color=\"#d32f2f\" />\n            <Typography variant=\"h5\" color=\"error\" fontWeight=\"bold\">\n              Invalid or Expired Link\n            </Typography>\n          </Box>\n          <Typography variant=\"body1\" sx={{ mb: 2 }}>\n            {errorMessage || \"This link is no longer valid.\"}\n          </Typography>\n          <Divider sx={{ my: 2 }} />\n          <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n            What happened?\n          </Typography>\n          <Box sx={{ textAlign: \"left\", mx: 3, my: 2 }}>\n            <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1, mb: 1 }}>\n              <FiLink size={16} color=\"#1976d2\" />\n              <Typography variant=\"body2\">\n                The link may have already been used\n              </Typography>\n            </Box>\n            <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1, mb: 1 }}>\n              <FiClock size={16} color=\"#ed6c02\" />\n              <Typography variant=\"body2\">\n                The link may have expired \n              </Typography>\n            </Box>\n            <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1, mb: 1 }}>\n              <FiCheckCircle size={16} color=\"#2e7d32\" />\n              <Typography variant=\"body2\">\n                You may have already submitted the form\n              </Typography>\n            </Box>\n            <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\n              <FiSlash size={16} color=\"#d32f2f\" />\n              <Typography variant=\"body2\">\n                You may have opted out or deferred\n              </Typography>\n            </Box>\n          </Box>\n          <Divider sx={{ my: 2 }} />\n          <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n            What to do next?\n          </Typography>\n          <Box sx={{ textAlign: \"left\", mx: 3, my: 2 }}>\n            <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1, mb: 1 }}>\n              <FiMail size={16} color=\"#1976d2\" />\n              <Typography variant=\"body2\">\n                Check your email for the latest update form link\n              </Typography>\n            </Box>\n            <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1, mb: 1 }}>\n              <FiClock size={16} color=\"#ed6c02\" />\n              <Typography variant=\"body2\">\n                Wait for the next reminder email (sent automatically)\n              </Typography>\n            </Box>\n            <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\n              <FiMail size={16} color=\"#1976d2\" />\n              <Typography variant=\"body2\">\n                Contact support if you believe this is an error\n              </Typography>\n            </Box>\n          </Box>\n          <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 2, display: \"block\" }}>\n            You can close this window now.\n          </Typography>\n        </Paper>\n      </Box>\n    );\n  if (status === \"expired\")\n    return (\n      <Box\n        sx={{\n          minHeight: \"100vh\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          bgcolor: \"#f8f9fa\",\n          p: 2,\n        }}\n      >\n        <Paper\n          sx={{\n            width: \"100%\",\n            maxWidth: 480,\n            p: 4,\n            borderRadius: 3,\n            boxShadow: 4,\n            textAlign: \"center\",\n          }}\n        >\n          <Box sx={{ display: \"flex\", alignItems: \"center\", justifyContent: \"center\", gap: 1, mb: 1 }}>\n            <FiClock size={28} color=\"#ed6c02\" />\n            <Typography variant=\"h5\" color=\"warning.main\" fontWeight=\"bold\">\n              Form Expired\n            </Typography>\n          </Box>\n          <Typography variant=\"body1\" sx={{ mb: 2 }}>\n            Your 10-minute session has expired.\n          </Typography>\n          <Divider sx={{ my: 2 }} />\n          <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n            What happens next?\n          </Typography>\n          <Box sx={{ textAlign: \"left\", mx: 3, my: 2 }}>\n            <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1, mb: 1 }}>\n              <FiMail size={16} color=\"#1976d2\" />\n              <Typography variant=\"body2\">\n                You will receive a new reminder email within 24 hours\n              </Typography>\n            </Box>\n            <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1, mb: 1 }}>\n              <FiLink size={16} color=\"#1976d2\" />\n              <Typography variant=\"body2\">\n                Use the new link to complete your form\n              </Typography>\n            </Box>\n            <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1, mb: 1 }}>\n              <FiSave size={16} color=\"#2e7d32\" />\n              <Typography variant=\"body2\">\n                Your progress has been saved automatically\n              </Typography>\n            </Box>\n            <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\n              <FiClock size={16} color=\"#ed6c02\" />\n              <Typography variant=\"body2\">\n                You'll have another 10 minutes when you return\n              </Typography>\n            </Box>\n          </Box>\n          <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 2, display: \"block\" }}>\n            You can close this window now.\n          </Typography>\n        </Paper>\n      </Box>\n    );\n  if (status === \"submitted\")\n    return (\n      <Box\n        sx={{\n          minHeight: \"100vh\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          bgcolor: \"#f8f9fa\",\n          p: 2,\n        }}\n      >\n        <Paper\n          sx={{\n            width: \"100%\",\n            maxWidth: 480,\n            p: 4,\n            borderRadius: 3,\n            boxShadow: 4,\n            textAlign: \"center\",\n          }}\n        >\n          <Box sx={{ display: \"flex\", alignItems: \"center\", justifyContent: \"center\", gap: 1, mb: 1 }}>\n            <FiCheckCircle size={28} color=\"#2e7d32\" />\n            <Typography variant=\"h5\" color=\"success.main\" fontWeight=\"bold\">\n              Form Submitted\n            </Typography>\n          </Box>\n          \n          <Divider sx={{ my: 2 }} />\n          <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n            What happened?\n          </Typography>\n          <Box sx={{ textAlign: \"left\", mx: 3, my: 2 }}>\n            <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1, mb: 1 }}>\n              <FiCheckCircle size={16} color=\"#2e7d32\" />\n              <Typography variant=\"body2\">\n                Your form submission was completed successfully\n              </Typography>\n            </Box>\n            <Box sx={{ display: \"flex\", alignItems: \"flex-start\", gap: 1, mb: 1 }}>\n  <FiUserCheck size={16} color=\"#2e7d32\" style={{ marginTop: 3 }} />\n  <Typography variant=\"body2\">\n    No separate signup is needed .\n  </Typography>\n</Box>\n\n            <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\n              <FiLock size={16} color=\"#ed6c02\" />\n              <Typography variant=\"body2\">\n                This link can no longer be used to prevent duplicate submissions\n              </Typography>\n            </Box>\n          </Box>\n          <Divider sx={{ my: 2 }} />\n          <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n            What to do next?\n          </Typography>\n          <Box sx={{ textAlign: \"left\", mx: 3, my: 2 }}>\n            <Box\n  sx={{\n    display: \"flex\",\n    alignItems: \"flex-start\",\n    gap: 1,\n    mb: 1,\n  }}\n>\n  <FiInfo size={16} color=\"#1976d2\" style={{ marginTop: 3 }} />\n\n  <Typography variant=\"body2\">\n    You're all set!{\" \"}\n    <Box\n      component=\"a\"\n      href=\"https://pl-app.iiit.ac.in/c4gt/signin\"\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      sx={{\n        color: \"#1976d2\",\n        fontWeight: 700,\n        fontSize: \"1rem\",\n        textDecoration: \"underline\",\n        \"&:hover\": {\n          textDecoration: \"underline\",\n          color:\"#d219c9ff\"\n        },\n      }}\n    >\n      Continue to login â†’\n    </Box>\n  </Typography>\n</Box>\n\n            <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1, mb: 1 }}>\n              <FiInfo size={16} color=\"#1976d2\" />\n              <Typography variant=\"body2\">\n                No further action is needed\n              </Typography>\n            </Box>\n            <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\n              <FiMail size={16} color=\"#1976d2\" />\n              <Typography variant=\"body2\">\n                Contact support if you need to update your information\n              </Typography>\n            </Box>\n          </Box>\n          <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 2, display: \"block\" }}>\n            You can close this window now.\n          </Typography>\n        </Paper>\n      </Box>\n    );\n  // âœ… Deferred screen (auto-close + message)\n  if (status === \"deferred\")\n    return (\n      <Box\n        sx={{\n          minHeight: \"100vh\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          bgcolor: \"#f8f9fa\",\n          textAlign: \"center\",\n          p: 3,\n        }}\n      >\n        <Paper\n          sx={{\n            p: 4,\n            borderRadius: 3,\n            border: \"1px solid #ddd\",\n            boxShadow: 3,\n            maxWidth: 480,\n          }}\n        >\n          <Box sx={{ display: \"flex\", alignItems: \"center\", justifyContent: \"center\", gap: 1, mb: 1 }}>\n            <FiAlertTriangle size={28} color=\"#ed6c02\" />\n            <Typography variant=\"h5\" color=\"warning.main\">\n              Form Deferred\n            </Typography>\n          </Box>\n          <Typography variant=\"body1\" sx={{ mb: 1 }}>\n            Youâ€™ve chosen to defer filling this form.\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n            You can complete it later using the reminder email link weâ€™ll send\n            soon.\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            This window will close automatically in <b>{countdown}</b> seconds.\n          </Typography>\n        </Paper>\n      </Box>\n    );\n\n  // âœ… Main Form UI\n  return (\n    <Box\n      sx={{\n        minHeight: \"100vh\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        bgcolor: \"#f8f9fa\",\n        p: 2,\n        flex: 1,\n        width: \"100%\",\n      }}\n    >\n      <Paper\n        sx={{\n          width: \"100%\",\n          maxWidth: 480,\n          p: 3,\n          borderRadius: 3,\n          boxShadow: 4,\n          border: \"1px solid #ddd\",\n          opacity: fadeOut ? 0 : 1,\n          transition: \"opacity 0.6s ease-in-out\",\n        }}\n      >\n        <Stack alignItems=\"center\" spacing={1}>\n          <Stack\n            direction=\"row\"\n            spacing={3}\n            alignItems=\"center\"\n            justifyContent=\"center\"\n            sx={{ mb: 1 }}\n          >\n            <Box\n              component=\"img\"\n              src={logo1}\n              alt=\"Badal\"\n              sx={{\n                height: 42,\n                width: \"auto\",\n                objectFit: \"contain\",\n              }}\n            />\n\n            <Box\n              component=\"img\"\n              src={logo2}\n              alt=\"C4GT\"\n              sx={{\n                height: 42,\n                width: \"auto\",\n                objectFit: \"contain\",\n              }}\n            />\n          </Stack>\n          <Typography variant=\"h6\" fontWeight=\"bold\">\n            Update Your Information\n          </Typography>\n          \n          {/* Countdown Timer */}\n          <Box\n            sx={{\n              width: \"100%\",\n              mt: 1,\n              p: 1.5,\n              borderRadius: 2,\n              backgroundColor: timeRemaining <= 120 ? \"#ffebee\" : timeRemaining <= 300 ? \"#fff3e0\" : \"#e3f2fd\",\n              border: `2px solid ${timeRemaining <= 120 ? \"#d32f2f\" : timeRemaining <= 300 ? \"#f57c00\" : \"#1976d2\"}`,\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              gap: 1,\n            }}\n          >\n            <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\n              <FiClock size={20} color={timeRemaining <= 120 ? \"#d32f2f\" : timeRemaining <= 300 ? \"#f57c00\" : \"#1976d2\"} />\n              <Typography\n                sx={{\n                  fontSize: \"1.1rem\",\n                  fontWeight: \"bold\",\n                  color: timeRemaining <= 120 ? \"#d32f2f\" : timeRemaining <= 300 ? \"#f57c00\" : \"#1976d2\",\n                }}\n              >\n                Time Remaining: {Math.floor(timeRemaining / 60)}:{String(timeRemaining % 60).padStart(2, \"0\")}\n              </Typography>\n            </Box>\n          </Box>\n          <Box sx={{ display: \"flex\", alignItems: \"center\", justifyContent: \"center\", gap: 0.5 }}>\n            {timeRemaining <= 120 && <FiAlertTriangle size={14} color=\"#d32f2f\" />}\n            <Typography\n              variant=\"caption\"\n              sx={{\n                color: timeRemaining <= 120 ? \"#d32f2f\" : \"text.secondary\",\n                fontWeight: timeRemaining <= 120 ? \"bold\" : \"normal\",\n              }}\n            >\n              {timeRemaining <= 120\n                ? \"Hurry! Your session will expire soon!\"\n                : \"Complete the form within 10 minutes or it will expire\"}\n            </Typography>\n          </Box>\n          \n          <Divider sx={{ width: \"100%\", my: 1 }} />\n        </Stack>\n\n        {/* Opt-in/out */}\n        <FormControl fullWidth size=\"small\" sx={{ mt: 2 }}>\n          <InputLabel>Continue as part of our organization?</InputLabel>\n          <Select\n            value={interested ?? \"\"}\n            label=\"Continue?\"\n            onChange={(e) => setInterested(e.target.value)}\n          >\n            <MenuItem value=\"yes\">Yes, I want to continue</MenuItem>\n            <MenuItem value=\"no\">No, I want to opt out</MenuItem>\n          </Select>\n        </FormControl>\n\n        {interested === \"no\" ? (\n          <Box mt={3}>\n            <Typography variant=\"body2\">\n              We're sorry to see you go. You may share feedback (optional):\n            </Typography>\n            <TextField\n              fullWidth\n              multiline\n              rows={3}\n              placeholder=\"Your reason...\"\n              value={optoutReason}\n              onChange={(e) => setOptoutReason(e.target.value)}\n              sx={{ mt: 1 }}\n            />\n            <Button\n              fullWidth\n              variant=\"contained\"\n              color=\"error\"\n              sx={{ mt: 2, borderRadius: \"20px\" }}\n              onClick={handleOptOut}\n              disabled={optoutProcessing}\n            >\n              {optoutProcessing ? \"Processing...\" : \"Confirm Opt-Out\"}\n            </Button>\n          </Box>\n        ) : (\n          <Box component=\"form\" onSubmit={handleSubmit} mt={2}>\n            {/* Full Name */}\n            <TextField\n              label=\"Full Name *\"\n              fullWidth\n              size=\"small\"\n              margin=\"dense\"\n              name=\"fullName\"\n              value={formData.fullName}\n              onChange={handleChange}\n              required\n            />\n\n            {/* Phone */}\n            <MuiTelInput\n              label=\"Phone Number *\"\n              value={formData.phone}\n              defaultCountry=\"IN\"\n              forceCallingCode\n              focusOnSelectCountry\n              fullWidth\n              size=\"small\"\n              margin=\"dense\"\n              disabled={phoneVerification.isVerified}\n              onChange={(value, info) => {\n                if (!info) return;\n\n                setFormData(prev => ({\n                  ...prev,\n                  phone: value\n                }));\n\n                // Reset verification if phone changes\n                setPhoneVerification({\n                  isVerified: false,\n                  showOtpInput: false,\n                  otp: \"\",\n                  isProcessing: false,\n                  firebaseToken: null,\n                });\n\n                sessionStorage.removeItem(\"phoneVerificationState\");\n                cleanupRecaptcha(false);\n              }}\n              error={formData.phone && !isValidPhoneFormat(formData.phone)}\n              helperText={\n                formData.phone && !isValidPhoneFormat(formData.phone)\n                  ? \"Enter valid phone number for selected country\"\n                  : \"\"\n              }\n              required\n            />\n\n            {/* Email */}\n            <TextField\n              label=\"Email \"\n              fullWidth\n              size=\"small\"\n              margin=\"dense\"\n              name=\"email\"\n              value={formData.email}\n              onChange={handleChange}\n              required\n            />\n\n            {/* Gender */}\n            <FormControl fullWidth size=\"small\" margin=\"dense\" required>\n              <InputLabel>Gender *</InputLabel>\n              <Select\n                value={formData.gender}\n                label=\"Gender *\"\n                onChange={handleChange}\n                name=\"gender\"\n              >\n                {GENDERS.map((g) => (\n                  <MenuItem key={g} value={g}>\n                    {g}\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n\n            {/* Organisation */}\n            {orgLoadError ? (\n              <Box sx={{ mt: 2 }}>\n                <Typography color=\"error\" fontSize={13}>\n                  âŒ Unable to load organizations. Please refresh or try again later.\n                </Typography>\n              </Box>\n            ) : (\n              <Autocomplete\n                options={orgOptions}\n                loading={orgLoading}\n                filterOptions={(x) => x}\n                getOptionLabel={(o) => o.label || \"\"}\n                isOptionEqualToValue={(option, value) =>\n                  option.orgRef?.id === value.orgRef?.id &&\n                  option.orgRef?.type === value.orgRef?.type\n                }\n                value={\n                  formData.organization\n                    ? {\n                        label: formData.organization.name,\n                        orgRef: formData.organization.ref,\n                        source: formData.organization.ref?.type,\n                        orgType: formData.organization.orgType\n                      }\n                    : null\n                }\n                onInputChange={(e, v) => handleOrgSearch(v)}\n                onChange={(e, value) => handleOrgChange(value)}\n                renderInput={(params) => (\n                  <TextField\n                    {...params}\n                    label=\"Organisation (type to search or select)\"\n                    size=\"small\"\n                    margin=\"dense\"\n                    required\n                    placeholder=\"Search for your organization...\"\n                  />\n                )}\n                sx={{ width: \"100%\" }}\n              />\n            )}\n\n            {/* Custom Organization Input (shown when \"Other\" is selected) */}\n            {showCustomOrg && (\n              <TextField\n                label=\"Enter Organization Name \"\n                fullWidth\n                size=\"small\"\n                margin=\"dense\"\n                required\n                value={formData.organization?.name || \"\"}\n                onChange={(e) => {\n                  isDirtyRef.current = true;\n                  setFormData({\n                    ...formData,\n                    organization: {\n                      ...formData.organization,\n                      name: e.target.value,\n                      ref: { type: \"custom\", id: null }\n                    }\n                  });\n                }}\n              />\n            )}\n\n            {/* Organization Type */}\n            {showCustomOrg ? (\n              <FormControl fullWidth size=\"small\" margin=\"dense\" required>\n                <InputLabel>Organization Type</InputLabel>\n                <Select\n                  label=\"Organization Type\"\n                  value={formData.organization?.orgType || \"\"}\n                  onChange={(e) => {\n                    isDirtyRef.current = true;\n                    setFormData({ \n                      ...formData, \n                      organization: {\n                        ...formData.organization,\n                        orgType: e.target.value\n                      }\n                    });\n                  }}\n                >\n                  <MenuItem value=\"Government\">Government</MenuItem>\n                  <MenuItem value=\"Corporate\">Corporate</MenuItem>\n                  <MenuItem value=\"Academic\">Academic</MenuItem>\n                  <MenuItem value=\"NGO\">NGO</MenuItem>\n                  <MenuItem value=\"Not For Profit\">Not For Profit</MenuItem>\n                  <MenuItem value=\"For Profit\">For Profit</MenuItem>\n                  <MenuItem value=\"Self\">Self</MenuItem>\n                </Select>\n              </FormControl>\n            ) : (\n              <TextField\n                label=\"Organization Type\"\n                fullWidth\n                size=\"small\"\n                margin=\"dense\"\n                value={formData.organization?.orgType || \"\"}\n                InputProps={{ readOnly: true }}\n              />\n            )}\n\n            {/* Role */}\n            <FormControl fullWidth size=\"small\" margin=\"dense\" required>\n              <InputLabel>Role *</InputLabel>\n              <Select\n                value={formData.role}\n                label=\"Role \"\n                name=\"role\"\n                onChange={(e) =>\n                  setFormData({ ...formData, role: e.target.value })\n                }\n              >\n                {ROLES.map((r) => (\n                  <MenuItem key={r.value} value={r.value}>\n                    {r.label}\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n\n            {/* Tech Skills - Collapsed */}\n            <Box sx={{ mt: 2, border: '1px solid #e0e0e0', borderRadius: 1 }}>\n              {(() => {\n                const isTechStackComplete = formData.skills?.length >= 1 && formData.skills?.length <= 6;\n                \n                return (\n                  <Box\n                    sx={{\n                      p: 1.5,\n                      cursor: 'pointer',\n                      bgcolor: '#f5f5f5',\n                      borderRadius: '4px 4px 0 0',\n                      display: 'flex',\n                      justifyContent: 'space-between',\n                      alignItems: 'center'\n                    }}\n                    onClick={() => setFormData({ ...formData, _skillsOpen: !formData._skillsOpen })}\n                  >\n                    <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\n                      <Typography fontWeight=\"bold\" fontSize={14}>\n                        Tech Skills ({formData.skills?.length || 0})\n                      </Typography>\n\n                      <Fade in={isTechStackComplete}>\n                        <Box>\n                          <FiCheckCircle size={16} color=\"#2e7d32\" />\n                        </Box>\n                      </Fade>\n                    </Box>\n\n                    <Typography>{formData._skillsOpen ? 'â–²' : 'â–¼'}</Typography>\n                  </Box>\n                );\n              })()}\n              {formData._skillsOpen && (\n                <Box sx={{ p: 1.5 }}>\n                  <Box\n                    sx={{\n                      animation: shakeSkills ? `${shake} 0.4s ease` : \"none\"\n                    }}\n                  >\n                    <Autocomplete\n                      multiple\n                      options={SKILLS}\n                      value={formData.skills || []}\n                      disableCloseOnSelect\n                      limitTags={3}\n                      getOptionDisabled={(option) =>\n                        formData.skills.length >= 6 && !formData.skills.includes(option)\n                      }\n                      onChange={(event, newValue) => {\n                        isDirtyRef.current = true;\n\n                        if (newValue.length <= 6) {\n                          setFormData({ ...formData, skills: newValue });\n                        } else {\n                          // Trigger shake\n                          setShakeSkills(true);\n                          setTimeout(() => setShakeSkills(false), 400);\n                        }\n                      }}\n                    renderInput={(params) => {\n                      const isMaxReached = formData.skills.length === 6;\n\n                      return (\n                        <TextField\n                          {...params}\n                          label=\"Select up to 6 skills *\"\n                          placeholder=\"Choose your skills\"\n                          size=\"small\"\n                          error={isMaxReached}\n                          helperText={\n                            isMaxReached\n                              ? \"Maximum 6 skills reached\"\n                              : `Select up to 6 skills (${formData.skills.length}/6)`\n                          }\n                          FormHelperTextProps={{\n                            sx: {\n                              color: isMaxReached ? \"#d32f2f\" : \"text.secondary\",\n                              fontWeight: isMaxReached ? 600 : 400,\n                            },\n                          }}\n                        />\n                      );\n                    }}\n                    />\n                  </Box>\n                </Box>\n              )}\n            </Box>\n\n            {/* Social - Collapsed */}\n            <Box sx={{ mt: 2, border: '1px solid #e0e0e0', borderRadius: 1 }}>\n              {(() => {\n                const isSocialFullyVerified = githubStatus.verified && discordVerified;\n                \n                return (\n                  <Box\n                    sx={{\n                      p: 1.5,\n                      cursor: 'pointer',\n                      bgcolor: '#f5f5f5',\n                      borderRadius: '4px 4px 0 0',\n                      display: 'flex',\n                      justifyContent: 'space-between',\n                      alignItems: 'center'\n                    }}\n                    onClick={() => setFormData({ ...formData, _socialOpen: !formData._socialOpen })}\n                  >\n                    <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\n                      <Typography fontWeight=\"bold\" fontSize={14}>\n                        Social Accounts\n                      </Typography>\n\n                      {isSocialFullyVerified && (\n                        <FiCheckCircle size={16} color=\"#2e7d32\" />\n                      )}\n                    </Box>\n\n                    <Typography>{formData._socialOpen ? 'â–²' : 'â–¼'}</Typography>\n                  </Box>\n                );\n              })()}\n              {formData._socialOpen && (\n                <Box sx={{ p: 1.5 }}>\n                  {/* GitHub Section */}\n                  <Typography fontWeight=\"bold\" fontSize={14} mb={1}>\n                    GitHub:\n                  </Typography>\n            <Box sx={{ display: \"flex\", flexDirection: \"column\", gap: 1, width: \"100%\", mt: 1 }}>\n              <Button\n                fullWidth\n                variant=\"contained\"\n                onClick={handleVerifyGithub}\n                disabled={githubStatus.verified || githubStatus.verifying}\n                sx={{\n                  borderRadius: \"10px\",\n                  fontWeight: \"bold\",\n                  backgroundColor: githubStatus.verified ? \"#4CAF50\" : \"#000\",\n                  color: \"white\",\n                  \"&:disabled\": {\n                    backgroundColor: githubStatus.verified ? \"#4CAF50\" : \"#9e9e9e\",\n                    color: \"white\",\n                  },\n                }}\n              >\n                {githubStatus.verified ? \"GitHub Verified âœ“\" : \"Verify GitHub\"}\n              </Button>\n\n              {githubStatus.verified && (\n                <Typography fontSize={13} color=\"#2e7d32\">\n                  âœ“ Verified as: {githubStatus.username}\n                </Typography>\n              )}\n\n              {!githubStatus.verified && githubStatus.error && (\n                <Typography fontSize={13} color=\"#d32f2f\">\n                  âŒ {githubStatus.error}\n                </Typography>\n              )}\n            </Box>\n\n            {/* Discord Section */}\n            <Typography fontWeight=\"bold\" fontSize={14} mt={2} mb={1}>\n              Discord:\n            </Typography>\n            <Box sx={{ display: \"flex\", flexDirection: \"column\", gap: 1, width: \"100%\", mt: 1 }}>\n              {discordVerified ? (\n                <>\n                  <Button\n                    fullWidth\n                    variant=\"contained\"\n                    disabled\n                    sx={{\n                      borderRadius: \"10px\",\n                      fontWeight: \"bold\",\n                      backgroundColor: \"#4CAF50\",\n                      color: \"white\",\n                      \"&.Mui-disabled\": {\n                        backgroundColor: \"#4CAF50\",\n                        color: \"white\",\n                      },\n                    }}\n                  >\n                    DISCORD VERIFIED âœ“\n                  </Button>\n\n                  <Typography fontSize={13} color=\"#2e7d32\">\n                    âœ“ Verified as: {sessionStorage.getItem(\"discordUsername\")}\n                  </Typography>\n                </>\n              ) : (\n                <>\n                  <Button\n                    fullWidth\n                    variant=\"contained\"\n                    sx={{\n                      borderRadius: \"10px\",\n                      fontWeight: \"bold\",\n                      backgroundColor: \"#1E4DD8\",\n                      \"&:hover\": { backgroundColor: \"#1536A1\" },\n                    }}\n                    onClick={handleVerifyDiscord}\n                    disabled={discordStatus.verifying}\n                    startIcon={discordStatus.verifying ? <CircularProgress size={20} color=\"inherit\" /> : null}\n                  >\n                    {discordStatus.verifying ? \"REDIRECTING...\" : \"VERIFY DISCORD\"}\n                  </Button>\n\n                  {discordNotMember && (\n                    <>\n                      <Button\n                        fullWidth\n                        variant=\"outlined\"\n                        sx={{ borderRadius: \"10px\", fontWeight: \"bold\" }}\n                        onClick={() => window.open(DISCORD_INVITE, \"_blank\")}\n                      >\n                        JOIN DISCORD SERVER\n                      </Button>\n                      <Typography fontSize={13} color=\"#d32f2f\">\n                        âŒ You must join our Discord server before verification.\n                      </Typography>\n                    </>\n                  )}\n                </>\n              )}\n            </Box>\n\n                  {/* LinkedIn Section */}\n                  <Typography fontWeight=\"bold\" fontSize={14} mt={2} mb={1}>\n                    LinkedIn URL (Optional):\n                  </Typography>\n                  <Box sx={{ display: \"flex\", flexDirection: \"column\", gap: 1, width: \"100%\" }}>\n                    <TextField\n                      label=\"Enter LinkedIn profile URL\"\n                      placeholder=\"https://www.linkedin.com/in/username\"\n                      value={formData.linkedinId}\n                      onChange={(e) => setFormData({ ...formData, linkedinId: e.target.value })}\n                      size=\"small\"\n                      fullWidth\n                    />\n                  </Box>\n                </Box>\n              )}\n            </Box>\n\n            {/* OTP Section - Compact */}\n            <Box mt={2}>\n              <Typography fontWeight=\"bold\" fontSize={14} mb={1}>\n                Phone Verification:\n              </Typography>\n              <div id=\"recaptcha-container-update\"></div>\n              {!phoneVerification.isVerified && (\n                <Stack direction=\"row\" spacing={1} mt={1}>\n                  <Button\n                    variant=\"outlined\"\n                    fullWidth\n                    onClick={handleRequestOtp}\n                    disabled={phoneVerification.isProcessing || timer > 0}\n                  >\n                    {timer > 0\n                      ? `Resend in ${timer}s`\n                      : phoneVerification.isProcessing\n                      ? \"Sending...\"\n                      : phoneVerification.showOtpInput\n                      ? \"Resend OTP\"\n                      : \"Send OTP\"}\n                  </Button>\n                  {phoneVerification.showOtpInput && (\n                    <TextField\n                      label=\"Enter 6-digit OTP\"\n                      size=\"small\"\n                      value={phoneVerification.otp}\n                      onChange={(e) => {\n                        const onlyNums = e.target.value.replace(/\\D/g, \"\");\n                        if (onlyNums.length <= 6)\n                          setPhoneVerification({\n                            ...phoneVerification,\n                            otp: onlyNums,\n                          });\n                      }}\n                      inputProps={{\n                        inputMode: \"numeric\",\n                        pattern: \"[0-9]*\",\n                        maxLength: 6,\n                        onKeyPress: (e) => {\n                          if (!/[0-9]/.test(e.key)) e.preventDefault();\n                        },\n                      }}\n                    />\n                  )}\n                  {phoneVerification.showOtpInput && (\n                    <Button\n                      variant=\"contained\"\n                      color=\"primary\"\n                      onClick={handleVerifyOtp}\n                      disabled={phoneVerification.isProcessing}\n                    >\n                      {phoneVerification.isProcessing ? (\n                        <CircularProgress size={18} color=\"inherit\" />\n                      ) : (\n                        \"Verify\"\n                      )}\n                    </Button>\n                  )}\n                </Stack>\n              )}\n              {phoneVerification.isVerified && (\n                <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1, mt: 1 }}>\n                  <FiCheckCircle size={18} color=\"#2e7d32\" />\n                  <Typography color=\"success.main\">\n                    Phone verified successfully!\n                  </Typography>\n                </Box>\n              )}\n            </Box>\n\n            {/* Actions */}\n            <Stack direction=\"row\" spacing={2} mt={3}>\n              <Button\n                type=\"submit\"\n                variant=\"contained\"\n                color=\"primary\"\n                fullWidth\n                disabled={!isFormComplete()}\n              >\n                Submit\n              </Button>\n              <Button \n                variant=\"outlined\" \n                fullWidth \n                onClick={handleDefer}\n                disabled={oauthInProgress}\n              >\n                Defer\n              </Button>\n            </Stack>\n          </Box>\n        )}\n      </Paper>\n    </Box>\n  );\n};\n\nexport default UpdateForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}