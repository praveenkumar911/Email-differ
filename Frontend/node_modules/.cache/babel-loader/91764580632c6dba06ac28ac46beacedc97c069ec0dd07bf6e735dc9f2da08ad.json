{"ast":null,"code":"// src/pages/Auth/OtpVerification.jsx\nimport React,{useState,useEffect}from\"react\";import{useLocation,useNavigate}from\"react-router-dom\";import{verifyOtp,signupUser}from\"../../api/apiService\";import{Box,Paper,Typography,TextField,Button,CircularProgress,IconButton}from\"@mui/material\";import ArrowBackIcon from\"@mui/icons-material/ArrowBack\";import{auth,signInWithPhoneNumber,PhoneAuthProvider,signInWithCredential}from\"../../firebase\";import{setupRecaptcha}from\"../../utils/setupRecaptcha\";import Swal from\"sweetalert2\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const OtpVerification=()=>{var _location$state;const[otp,setOtp]=useState(\"\");const[loading,setLoading]=useState(false);const[resending,setResending]=useState(false);const[timer,setTimer]=useState(0);const location=useLocation();const navigate=useNavigate();// Restore phone\nlet phone=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.phone;if(!phone){try{const saved=JSON.parse(sessionStorage.getItem(\"signupFormData\"));phone=saved===null||saved===void 0?void 0:saved.phone;}catch(_unused){phone=\"\";}}const showAlert=function(message){let icon=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"info\";Swal.fire({title:icon===\"success\"?\"Success!\":icon===\"error\"?\"Error!\":icon===\"warning\"?\"Warning!\":\"Info\",text:message,icon,confirmButtonColor:\"#1E4DD8\"});};// Warn on refresh\nuseEffect(()=>{const handleBeforeUnload=e=>{e.returnValue=\"Refreshing will clear OTP session.\";};window.addEventListener(\"beforeunload\",handleBeforeUnload);return()=>window.removeEventListener(\"beforeunload\",handleBeforeUnload);},[]);// Timer countdown\nuseEffect(()=>{if(timer>0){const interval=setInterval(()=>setTimer(t=>t-1),1000);return()=>clearInterval(interval);}},[timer]);// Verify OTP\nconst handleVerify=async()=>{if(!otp.trim())return showAlert(\"Please enter the OTP\",\"warning\");if(otp.length!==6)return showAlert(\"Please enter a valid 6-digit OTP\",\"warning\");if(!/^\\d{6}$/.test(otp))return showAlert(\"OTP should contain only numbers\",\"warning\");setLoading(true);try{const verificationId=sessionStorage.getItem(\"verificationId\")||localStorage.getItem(\"verificationId\");if(!verificationId){showAlert(\"Session expired. Please request a new OTP.\",\"error\");setLoading(false);return;}const credential=PhoneAuthProvider.credential(verificationId,otp.trim());const userCredential=await signInWithCredential(auth,credential);const firebaseToken=await userCredential.user.getIdToken();if(!firebaseToken){showAlert(\"Failed to obtain Firebase token. Try again.\",\"error\");setLoading(false);return;}const saved=sessionStorage.getItem(\"signupFormData\");const profile=saved?JSON.parse(saved):null;let backendRes=null;if(profile&&profile.fullName&&profile.phone){if(!profile.fullName||/^\\d+$/.test(String(profile.fullName).trim())){showAlert(\"Please enter a valid full name in the signup form before verifying OTP.\",\"warning\");setLoading(false);navigate(\"/signup\");return;}const signupPayload={name:profile.fullName,phoneNumber:\"+91\".concat(profile.phone.replace(/\\D/g,\"\").replace(/^91/,\"\")),email:profile.email,organization:profile.organisation,orgType:profile.orgType,role:profile.role,githubId:profile.githubId,githubUrl:profile.githubUrl,discordId:profile.discordId,// match backend field name\nlinkedInUrl:profile.linkedinId,// match backend field name\nacceptedTerms:profile.termsAccepted,firebaseToken};backendRes=await signupUser(signupPayload);}else{backendRes=await verifyOtp({firebaseToken,phoneNumber:phone});}console.log(\"Backend response:\",backendRes);showAlert(\"Signup successful! Redirecting to login.\",\"success\");sessionStorage.removeItem(\"verificationId\");localStorage.removeItem(\"verificationId\");setTimeout(()=>navigate(\"/signin\"),1500);}catch(err){console.error(\"OTP Verification Error:\",err);const friendlyMessage=err.code===\"auth/code-expired\"?\"OTP expired. Please request a new one.\":err.code===\"auth/invalid-verification-code\"?\"Invalid OTP. Please try again.\":err.code===\"auth/too-many-requests\"?\"Too many attempts. Try again later.\":(err===null||err===void 0?void 0:err.message)||\"Unexpected error occurred. Please try again.\";showAlert(friendlyMessage,\"error\");}finally{setLoading(false);}};// Resend OTP\nconst handleResendOtp=async()=>{if(resending||timer>0)return;setResending(true);try{const e164Phone=phone.toString().startsWith(\"+\")?phone:\"+91\".concat(phone);await setupRecaptcha(auth,\"recaptcha-container-signup-otp\");await new Promise(r=>setTimeout(r,500));const confirmationResult=await signInWithPhoneNumber(auth,e164Phone,window.recaptchaVerifier);sessionStorage.setItem(\"verificationId\",confirmationResult.verificationId);Swal.fire({icon:\"success\",title:\"OTP Resent!\",text:\"New OTP sent successfully\",timer:1500,showConfirmButton:false});setTimer(30);}catch(err){console.error(\"Resend failed:\",err);Swal.fire({icon:\"error\",title:\"Failed\",text:err.code===\"auth/too-many-requests\"?\"Too many attempts. Try again later.\":\"Failed to resend OTP\"});}finally{setResending(false);}};const handleOtpChange=e=>{const value=e.target.value;const onlyNums=value.replace(/\\D/g,\"\");if(onlyNums.length<=6)setOtp(onlyNums);if(value&&/\\D/.test(value)){Swal.fire({icon:\"info\",title:\"Numbers Only\",text:\"Please enter digits only (0–9).\",confirmButtonColor:\"#1E4DD8\",timer:1200,showConfirmButton:false});}};const handleBack=()=>{sessionStorage.setItem(\"cameFromOtp\",\"true\");navigate(\"/signup\");};if(!phone)return/*#__PURE__*/_jsx(Box,{sx:{height:\"100vh\",width:\"100%\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(Typography,{children:\"No phone number found. Please sign up again.\"})});return/*#__PURE__*/_jsx(Box,{sx:{minHeight:\"100vh\",width:\"100%\",background:\"linear-gradient(135deg, #1e3c72, #2a5298)\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",p:2},children:/*#__PURE__*/_jsxs(Paper,{elevation:8,sx:{width:\"100%\",maxWidth:420,p:4,borderRadius:4,background:\"rgba(255,255,255,0.96)\",position:\"relative\"},children:[/*#__PURE__*/_jsx(IconButton,{onClick:handleBack,sx:{position:\"absolute\",top:12,left:12,color:\"#333\",backgroundColor:\"#f1f1f1\",\"&:hover\":{backgroundColor:\"#e0e0e0\"}},children:/*#__PURE__*/_jsx(ArrowBackIcon,{})}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",align:\"center\",fontWeight:\"bold\",sx:{mb:1},color:\"#1E4DD8\",children:\"Verify OTP\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",align:\"center\",sx:{mb:3},children:[\"Enter the 6-digit OTP sent to\",\" \",/*#__PURE__*/_jsxs(\"strong\",{children:[\"+91 \",phone.toString().replace(\"+91\",\"\")]})]}),/*#__PURE__*/_jsx(TextField,{label:\"Enter 6-digit OTP\",placeholder:\"123456\",value:otp,onChange:handleOtpChange,fullWidth:true,size:\"small\",margin:\"normal\",inputProps:{inputMode:\"numeric\",pattern:\"[0-9]*\",maxLength:6},sx:{\"& .MuiInputBase-input\":{letterSpacing:\"6px\",textAlign:\"center\",fontSize:\"18px\",fontWeight:\"bold\"}},helperText:otp.length>0&&otp.length!==6?\"OTP must be 6 digits\":\"\",error:otp.length>0&&otp.length!==6}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",disabled:loading,sx:{mt:2,py:1.2,borderRadius:\"20px\",backgroundColor:\"#1E4DD8\",fontWeight:\"bold\",\"&:hover\":{backgroundColor:loading?\"#1E4DD8\":\"#1536A1\"}},onClick:handleVerify,children:loading?/*#__PURE__*/_jsx(CircularProgress,{size:20,sx:{color:\"white\"}}):\"Verify OTP\"}),/*#__PURE__*/_jsx(Button,{fullWidth:true,onClick:handleResendOtp,disabled:resending||timer>0,sx:{mt:2,borderRadius:\"20px\",color:\"#1E4DD8\",border:\"1px solid #1E4DD8\",textTransform:\"none\",py:1},children:resending?\"Resending...\":timer>0?\"Resend OTP in \".concat(timer,\"s\"):\"Resend OTP\"}),/*#__PURE__*/_jsx(\"div\",{id:\"recaptcha-container-signup-otp\"})]})});};export default OtpVerification;","map":{"version":3,"names":["React","useState","useEffect","useLocation","useNavigate","verifyOtp","signupUser","Box","Paper","Typography","TextField","Button","CircularProgress","IconButton","ArrowBackIcon","auth","signInWithPhoneNumber","PhoneAuthProvider","signInWithCredential","setupRecaptcha","Swal","jsx","_jsx","jsxs","_jsxs","OtpVerification","_location$state","otp","setOtp","loading","setLoading","resending","setResending","timer","setTimer","location","navigate","phone","state","saved","JSON","parse","sessionStorage","getItem","_unused","showAlert","message","icon","arguments","length","undefined","fire","title","text","confirmButtonColor","handleBeforeUnload","e","returnValue","window","addEventListener","removeEventListener","interval","setInterval","t","clearInterval","handleVerify","trim","test","verificationId","localStorage","credential","userCredential","firebaseToken","user","getIdToken","profile","backendRes","fullName","String","signupPayload","name","phoneNumber","concat","replace","email","organization","organisation","orgType","role","githubId","githubUrl","discordId","linkedInUrl","linkedinId","acceptedTerms","termsAccepted","console","log","removeItem","setTimeout","err","error","friendlyMessage","code","handleResendOtp","e164Phone","toString","startsWith","Promise","r","confirmationResult","recaptchaVerifier","setItem","showConfirmButton","handleOtpChange","value","target","onlyNums","handleBack","sx","height","width","display","alignItems","justifyContent","children","minHeight","background","p","elevation","maxWidth","borderRadius","position","onClick","top","left","color","backgroundColor","variant","align","fontWeight","mb","label","placeholder","onChange","fullWidth","size","margin","inputProps","inputMode","pattern","maxLength","letterSpacing","textAlign","fontSize","helperText","disabled","mt","py","border","textTransform","id"],"sources":["/home/rcts/Email-differ/Frontend/src/pages/Signin-otp/OtpVerification.jsx"],"sourcesContent":["// src/pages/Auth/OtpVerification.jsx\n\nimport React, { useState, useEffect } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { verifyOtp, signupUser } from \"../../api/apiService\";\nimport {\n  Box,\n  Paper,\n  Typography,\n  TextField,\n  Button,\n  CircularProgress,\n  IconButton,\n} from \"@mui/material\";\nimport ArrowBackIcon from \"@mui/icons-material/ArrowBack\";\nimport {\n  auth,\n  signInWithPhoneNumber,\n  PhoneAuthProvider,\n  signInWithCredential,\n} from \"../../firebase\";\nimport { setupRecaptcha } from \"../../utils/setupRecaptcha\";\n\nimport Swal from \"sweetalert2\";\n\nconst OtpVerification = () => {\n  const [otp, setOtp] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [resending, setResending] = useState(false);\n  const [timer, setTimer] = useState(0);\n\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  // Restore phone\n  let phone = location.state?.phone;\n  if (!phone) {\n    try {\n      const saved = JSON.parse(sessionStorage.getItem(\"signupFormData\"));\n      phone = saved?.phone;\n    } catch {\n      phone = \"\";\n    }\n  }\n\n  const showAlert = (message, icon = \"info\") => {\n    Swal.fire({\n      title:\n        icon === \"success\"\n          ? \"Success!\"\n          : icon === \"error\"\n          ? \"Error!\"\n          : icon === \"warning\"\n          ? \"Warning!\"\n          : \"Info\",\n      text: message,\n      icon,\n      confirmButtonColor: \"#1E4DD8\",\n    });\n  };\n\n  // Warn on refresh\n  useEffect(() => {\n    const handleBeforeUnload = (e) => {\n      e.returnValue = \"Refreshing will clear OTP session.\";\n    };\n    window.addEventListener(\"beforeunload\", handleBeforeUnload);\n    return () =>\n      window.removeEventListener(\"beforeunload\", handleBeforeUnload);\n  }, []);\n\n  // Timer countdown\n  useEffect(() => {\n    if (timer > 0) {\n      const interval = setInterval(() => setTimer((t) => t - 1), 1000);\n      return () => clearInterval(interval);\n    }\n  }, [timer]);\n\n  // Verify OTP\n  const handleVerify = async () => {\n    if (!otp.trim())\n      return showAlert(\"Please enter the OTP\", \"warning\");\n    if (otp.length !== 6)\n      return showAlert(\"Please enter a valid 6-digit OTP\", \"warning\");\n    if (!/^\\d{6}$/.test(otp))\n      return showAlert(\"OTP should contain only numbers\", \"warning\");\n\n    setLoading(true);\n    try {\n      const verificationId =\n        sessionStorage.getItem(\"verificationId\") ||\n        localStorage.getItem(\"verificationId\");\n\n      if (!verificationId) {\n        showAlert(\"Session expired. Please request a new OTP.\", \"error\");\n        setLoading(false);\n        return;\n      }\n\n      const credential = PhoneAuthProvider.credential(\n        verificationId,\n        otp.trim()\n      );\n      const userCredential = await signInWithCredential(auth, credential);\n      const firebaseToken = await userCredential.user.getIdToken();\n\n      if (!firebaseToken) {\n        showAlert(\"Failed to obtain Firebase token. Try again.\", \"error\");\n        setLoading(false);\n        return;\n      }\n\n      const saved = sessionStorage.getItem(\"signupFormData\");\n      const profile = saved ? JSON.parse(saved) : null;\n      let backendRes = null;\n\n      if (profile && profile.fullName && profile.phone) {\n        if (\n          !profile.fullName ||\n          /^\\d+$/.test(String(profile.fullName).trim())\n        ) {\n          showAlert(\n            \"Please enter a valid full name in the signup form before verifying OTP.\",\n            \"warning\"\n          );\n          setLoading(false);\n          navigate(\"/signup\");\n          return;\n        }\n\n        const signupPayload = {\n          name: profile.fullName,\n          phoneNumber: `+91${profile.phone\n            .replace(/\\D/g, \"\")\n            .replace(/^91/, \"\")}`,\n          email: profile.email,\n          organization: profile.organisation,\n          orgType: profile.orgType,\n          role: profile.role,\n          githubId: profile.githubId,\n          githubUrl: profile.githubUrl,\n          discordId: profile.discordId,     // match backend field name\n          linkedInUrl: profile.linkedinId,  // match backend field name\n          acceptedTerms: profile.termsAccepted,\n          \n          firebaseToken,\n        };\n\n        backendRes = await signupUser(signupPayload);\n      } else {\n        backendRes = await verifyOtp({\n          firebaseToken,\n          phoneNumber: phone,\n        });\n      }\n\n      console.log(\"Backend response:\", backendRes);\n      showAlert(\"Signup successful! Redirecting to login.\", \"success\");\n\n      sessionStorage.removeItem(\"verificationId\");\n      localStorage.removeItem(\"verificationId\");\n\n      setTimeout(() => navigate(\"/signin\"), 1500);\n    } catch (err) {\n      console.error(\"OTP Verification Error:\", err);\n      const friendlyMessage =\n        err.code === \"auth/code-expired\"\n          ? \"OTP expired. Please request a new one.\"\n          : err.code === \"auth/invalid-verification-code\"\n          ? \"Invalid OTP. Please try again.\"\n          : err.code === \"auth/too-many-requests\"\n          ? \"Too many attempts. Try again later.\"\n          : err?.message || \"Unexpected error occurred. Please try again.\";\n      showAlert(friendlyMessage, \"error\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Resend OTP\n  const handleResendOtp = async () => {\n    if (resending || timer > 0) return;\n\n    setResending(true);\n    try {\n      const e164Phone = phone.toString().startsWith(\"+\")\n        ? phone\n        : `+91${phone}`;\n\n      await setupRecaptcha(auth, \"recaptcha-container-signup-otp\");\n      await new Promise((r) => setTimeout(r, 500));\n\n      const confirmationResult = await signInWithPhoneNumber(\n        auth,\n        e164Phone,\n        window.recaptchaVerifier\n      );\n\n      sessionStorage.setItem(\n        \"verificationId\",\n        confirmationResult.verificationId\n      );\n\n      Swal.fire({\n        icon: \"success\",\n        title: \"OTP Resent!\",\n        text: \"New OTP sent successfully\",\n        timer: 1500,\n        showConfirmButton: false,\n      });\n\n      setTimer(30);\n    } catch (err) {\n      console.error(\"Resend failed:\", err);\n      Swal.fire({\n        icon: \"error\",\n        title: \"Failed\",\n        text:\n          err.code === \"auth/too-many-requests\"\n            ? \"Too many attempts. Try again later.\"\n            : \"Failed to resend OTP\",\n      });\n    } finally {\n      setResending(false);\n    }\n  };\n\n  const handleOtpChange = (e) => {\n    const value = e.target.value;\n    const onlyNums = value.replace(/\\D/g, \"\");\n    if (onlyNums.length <= 6) setOtp(onlyNums);\n\n    if (value && /\\D/.test(value)) {\n      Swal.fire({\n        icon: \"info\",\n        title: \"Numbers Only\",\n        text: \"Please enter digits only (0–9).\",\n        confirmButtonColor: \"#1E4DD8\",\n        timer: 1200,\n        showConfirmButton: false,\n      });\n    }\n  };\n\n  const handleBack = () => {\n    sessionStorage.setItem(\"cameFromOtp\", \"true\");\n    navigate(\"/signup\");\n  };\n\n  if (!phone)\n    return (\n      <Box\n        sx={{\n          height: \"100vh\",\n          width: \"100%\",\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n        }}\n      >\n        <Typography>No phone number found. Please sign up again.</Typography>\n      </Box>\n    );\n\n  return (\n    <Box\n      sx={{\n        minHeight: \"100vh\",\n        width: \"100%\",\n        background: \"linear-gradient(135deg, #1e3c72, #2a5298)\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        p: 2,\n      }}\n    >\n      <Paper\n        elevation={8}\n        sx={{\n          width: \"100%\",\n          maxWidth: 420,\n          p: 4,\n          borderRadius: 4,\n          background: \"rgba(255,255,255,0.96)\",\n          position: \"relative\",\n        }}\n      >\n        {/* Back Button */}\n        <IconButton\n          onClick={handleBack}\n          sx={{\n            position: \"absolute\",\n            top: 12,\n            left: 12,\n            color: \"#333\",\n            backgroundColor: \"#f1f1f1\",\n            \"&:hover\": { backgroundColor: \"#e0e0e0\" },\n          }}\n        >\n          <ArrowBackIcon />\n        </IconButton>\n\n        <Typography\n          variant=\"h5\"\n          align=\"center\"\n          fontWeight=\"bold\"\n          sx={{ mb: 1 }}\n          color=\"#1E4DD8\"\n        >\n          Verify OTP\n        </Typography>\n\n        <Typography\n          variant=\"body2\"\n          color=\"text.secondary\"\n          align=\"center\"\n          sx={{ mb: 3 }}\n        >\n          Enter the 6-digit OTP sent to{\" \"}\n          <strong>+91 {phone.toString().replace(\"+91\", \"\")}</strong>\n        </Typography>\n\n        {/* OTP Field */}\n        <TextField\n          label=\"Enter 6-digit OTP\"\n          placeholder=\"123456\"\n          value={otp}\n          onChange={handleOtpChange}\n          fullWidth\n          size=\"small\"\n          margin=\"normal\"\n          inputProps={{\n            inputMode: \"numeric\",\n            pattern: \"[0-9]*\",\n            maxLength: 6,\n          }}\n          sx={{\n            \"& .MuiInputBase-input\": {\n              letterSpacing: \"6px\",\n              textAlign: \"center\",\n              fontSize: \"18px\",\n              fontWeight: \"bold\",\n            },\n          }}\n          helperText={\n            otp.length > 0 && otp.length !== 6\n              ? \"OTP must be 6 digits\"\n              : \"\"\n          }\n          error={otp.length > 0 && otp.length !== 6}\n        />\n\n        {/* Verify Button */}\n        <Button\n          fullWidth\n          variant=\"contained\"\n          disabled={loading}\n          sx={{\n            mt: 2,\n            py: 1.2,\n            borderRadius: \"20px\",\n            backgroundColor: \"#1E4DD8\",\n            fontWeight: \"bold\",\n            \"&:hover\": {\n              backgroundColor: loading ? \"#1E4DD8\" : \"#1536A1\",\n            },\n          }}\n          onClick={handleVerify}\n        >\n          {loading ? (\n            <CircularProgress size={20} sx={{ color: \"white\" }} />\n          ) : (\n            \"Verify OTP\"\n          )}\n        </Button>\n\n        {/* Resend Button */}\n        <Button\n          fullWidth\n          onClick={handleResendOtp}\n          disabled={resending || timer > 0}\n          sx={{\n            mt: 2,\n            borderRadius: \"20px\",\n            color: \"#1E4DD8\",\n            border: \"1px solid #1E4DD8\",\n            textTransform: \"none\",\n            py: 1,\n          }}\n        >\n          {resending\n            ? \"Resending...\"\n            : timer > 0\n            ? `Resend OTP in ${timer}s`\n            : \"Resend OTP\"}\n        </Button>\n\n        <div id=\"recaptcha-container-signup-otp\" />\n      </Paper>\n    </Box>\n  );\n};\n\nexport default OtpVerification;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}