{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();export function AuthProvider(_ref){let{children}=_ref;// Load authData flat from localStorage\nconst[user,setUser]=useState(()=>{const stored=localStorage.getItem(\"authData\");return stored?JSON.parse(stored):null;});// Keep localStorage in sync (optional extra safety)\nuseEffect(()=>{if(user){localStorage.setItem(\"authData\",JSON.stringify(user));}else{localStorage.removeItem(\"authData\");}},[user]);// Extract token and userId from user object\n// Derive helpers\nconst token=(user===null||user===void 0?void 0:user.token)||null;const userId=(user===null||user===void 0?void 0:user.userId)||null;const roleId=(user===null||user===void 0?void 0:user.roleId)||null;const orgId=(user===null||user===void 0?void 0:user.orgId)||null;const permissions=(user===null||user===void 0?void 0:user.permissions)||[];const phone=(user===null||user===void 0?void 0:user.phone)||null;const logout=()=>{setUser(null);localStorage.removeItem(\"authData\");sessionStorage.removeItem(\"loginConfirmationResult\");sessionStorage.removeItem(\"loginRoleId\");};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,setUser,token,userId,roleId,orgId,permissions,phone,logout},children:children});}export function useAuth(){return useContext(AuthContext);}","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","stored","localStorage","getItem","JSON","parse","setItem","stringify","removeItem","token","userId","roleId","orgId","permissions","phone","logout","sessionStorage","Provider","value","useAuth"],"sources":["/home/rcts/Email-differ/Frontend/src/context/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from \"react\";\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport function AuthProvider({ children }) {\r\n  // Load authData flat from localStorage\r\n  const [user, setUser] = useState(() => {\r\n    const stored = localStorage.getItem(\"authData\");\r\n    return stored ? JSON.parse(stored) : null;\r\n  });\r\n\r\n  // Keep localStorage in sync (optional extra safety)\r\n  useEffect(() => {\r\n    if (user) {\r\n      localStorage.setItem(\"authData\", JSON.stringify(user));\r\n    } else {\r\n      localStorage.removeItem(\"authData\");\r\n    }\r\n  }, [user]);\r\n\r\n  // Extract token and userId from user object\r\n  // Derive helpers\r\n  const token = user?.token || null;\r\n  const userId = user?.userId || null;\r\n  const roleId = user?.roleId || null;\r\n  const orgId = user?.orgId || null;\r\n  const permissions = user?.permissions || [];\r\n  const phone = user?.phone || null;\r\n\r\n  const logout = () => {\r\n    setUser(null);\r\n    localStorage.removeItem(\"authData\");\r\n    sessionStorage.removeItem(\"loginConfirmationResult\");\r\n    sessionStorage.removeItem(\"loginRoleId\");\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        user,\r\n        setUser,\r\n        token,\r\n        userId,\r\n        roleId,\r\n        orgId,\r\n        permissions,\r\n        phone,\r\n        logout,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useAuth() {\r\n  return useContext(AuthContext);\r\n}"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE9E,KAAM,CAAAC,WAAW,cAAGN,aAAa,CAAC,CAAC,CAEnC,MAAO,SAAS,CAAAO,YAAYA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC;AACA,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGT,QAAQ,CAAC,IAAM,CACrC,KAAM,CAAAU,MAAM,CAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAC/C,MAAO,CAAAF,MAAM,CAAGG,IAAI,CAACC,KAAK,CAACJ,MAAM,CAAC,CAAG,IAAI,CAC3C,CAAC,CAAC,CAEF;AACAT,SAAS,CAAC,IAAM,CACd,GAAIO,IAAI,CAAE,CACRG,YAAY,CAACI,OAAO,CAAC,UAAU,CAAEF,IAAI,CAACG,SAAS,CAACR,IAAI,CAAC,CAAC,CACxD,CAAC,IAAM,CACLG,YAAY,CAACM,UAAU,CAAC,UAAU,CAAC,CACrC,CACF,CAAC,CAAE,CAACT,IAAI,CAAC,CAAC,CAEV;AACA;AACA,KAAM,CAAAU,KAAK,CAAG,CAAAV,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEU,KAAK,GAAI,IAAI,CACjC,KAAM,CAAAC,MAAM,CAAG,CAAAX,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEW,MAAM,GAAI,IAAI,CACnC,KAAM,CAAAC,MAAM,CAAG,CAAAZ,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEY,MAAM,GAAI,IAAI,CACnC,KAAM,CAAAC,KAAK,CAAG,CAAAb,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEa,KAAK,GAAI,IAAI,CACjC,KAAM,CAAAC,WAAW,CAAG,CAAAd,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEc,WAAW,GAAI,EAAE,CAC3C,KAAM,CAAAC,KAAK,CAAG,CAAAf,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEe,KAAK,GAAI,IAAI,CAEjC,KAAM,CAAAC,MAAM,CAAGA,CAAA,GAAM,CACnBf,OAAO,CAAC,IAAI,CAAC,CACbE,YAAY,CAACM,UAAU,CAAC,UAAU,CAAC,CACnCQ,cAAc,CAACR,UAAU,CAAC,yBAAyB,CAAC,CACpDQ,cAAc,CAACR,UAAU,CAAC,aAAa,CAAC,CAC1C,CAAC,CAED,mBACEd,IAAA,CAACC,WAAW,CAACsB,QAAQ,EACnBC,KAAK,CAAE,CACLnB,IAAI,CACJC,OAAO,CACPS,KAAK,CACLC,MAAM,CACNC,MAAM,CACNC,KAAK,CACLC,WAAW,CACXC,KAAK,CACLC,MACF,CAAE,CAAAjB,QAAA,CAEDA,QAAQ,CACW,CAAC,CAE3B,CAEA,MAAO,SAAS,CAAAqB,OAAOA,CAAA,CAAG,CACxB,MAAO,CAAA7B,UAAU,CAACK,WAAW,CAAC,CAChC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}