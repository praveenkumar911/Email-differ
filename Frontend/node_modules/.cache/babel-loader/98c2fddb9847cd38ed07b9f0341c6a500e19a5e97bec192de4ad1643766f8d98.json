{"ast":null,"code":"import _defineProperty from \"/home/rcts/Email-differ/Frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { loadSmithyRpcV2CborErrorCode, SmithyRpcV2CborProtocol } from \"@smithy/core/cbor\";\nimport { NormalizedSchema, TypeRegistry } from \"@smithy/core/schema\";\nimport { ProtocolLib } from \"../ProtocolLib\";\nexport class AwsSmithyRpcV2CborProtocol extends SmithyRpcV2CborProtocol {\n  constructor(_ref) {\n    let {\n      defaultNamespace,\n      awsQueryCompatible\n    } = _ref;\n    super({\n      defaultNamespace\n    });\n    _defineProperty(this, \"awsQueryCompatible\", void 0);\n    _defineProperty(this, \"mixin\", void 0);\n    this.awsQueryCompatible = !!awsQueryCompatible;\n    this.mixin = new ProtocolLib(this.awsQueryCompatible);\n  }\n  async serializeRequest(operationSchema, input, context) {\n    const request = await super.serializeRequest(operationSchema, input, context);\n    if (this.awsQueryCompatible) {\n      request.headers[\"x-amzn-query-mode\"] = \"true\";\n    }\n    return request;\n  }\n  async handleError(operationSchema, context, response, dataObject, metadata) {\n    var _ref2, _dataObject$message, _TypeRegistry$for$get;\n    if (this.awsQueryCompatible) {\n      this.mixin.setQueryCompatError(dataObject, response);\n    }\n    const errorName = (_loadSmithyRpcV2CborE => {\n      const compatHeader = response.headers[\"x-amzn-query-error\"];\n      if (compatHeader && this.awsQueryCompatible) {\n        return compatHeader.split(\";\")[0];\n      }\n      return (_loadSmithyRpcV2CborE = loadSmithyRpcV2CborErrorCode(response, dataObject)) !== null && _loadSmithyRpcV2CborE !== void 0 ? _loadSmithyRpcV2CborE : \"Unknown\";\n    })();\n    const {\n      errorSchema,\n      errorMetadata\n    } = await this.mixin.getErrorSchemaOrThrowBaseException(errorName, this.options.defaultNamespace, response, dataObject, metadata, this.awsQueryCompatible ? this.mixin.findQueryCompatibleError : undefined);\n    const ns = NormalizedSchema.of(errorSchema);\n    const message = (_ref2 = (_dataObject$message = dataObject.message) !== null && _dataObject$message !== void 0 ? _dataObject$message : dataObject.Message) !== null && _ref2 !== void 0 ? _ref2 : \"Unknown\";\n    const ErrorCtor = (_TypeRegistry$for$get = TypeRegistry.for(errorSchema[1]).getErrorCtor(errorSchema)) !== null && _TypeRegistry$for$get !== void 0 ? _TypeRegistry$for$get : Error;\n    const exception = new ErrorCtor(message);\n    const output = {};\n    for (const [name, member] of ns.structIterator()) {\n      if (dataObject[name] != null) {\n        output[name] = this.deserializer.readValue(member, dataObject[name]);\n      }\n    }\n    if (this.awsQueryCompatible) {\n      this.mixin.queryCompatOutput(dataObject, output);\n    }\n    throw this.mixin.decorateServiceException(Object.assign(exception, errorMetadata, {\n      $fault: ns.getMergedTraits().error,\n      message\n    }, output), dataObject);\n  }\n}","map":{"version":3,"names":["loadSmithyRpcV2CborErrorCode","SmithyRpcV2CborProtocol","NormalizedSchema","TypeRegistry","ProtocolLib","AwsSmithyRpcV2CborProtocol","constructor","_ref","defaultNamespace","awsQueryCompatible","_defineProperty","mixin","serializeRequest","operationSchema","input","context","request","headers","handleError","response","dataObject","metadata","_ref2","_dataObject$message","_TypeRegistry$for$get","setQueryCompatError","errorName","_loadSmithyRpcV2CborE","compatHeader","split","errorSchema","errorMetadata","getErrorSchemaOrThrowBaseException","options","findQueryCompatibleError","undefined","ns","of","message","Message","ErrorCtor","for","getErrorCtor","Error","exception","output","name","member","structIterator","deserializer","readValue","queryCompatOutput","decorateServiceException","Object","assign","$fault","getMergedTraits","error"],"sources":["/home/rcts/Email-differ/Frontend/node_modules/@aws-sdk/core/dist-es/submodules/protocols/cbor/AwsSmithyRpcV2CborProtocol.js"],"sourcesContent":["import { loadSmithyRpcV2CborErrorCode, SmithyRpcV2CborProtocol } from \"@smithy/core/cbor\";\nimport { NormalizedSchema, TypeRegistry } from \"@smithy/core/schema\";\nimport { ProtocolLib } from \"../ProtocolLib\";\nexport class AwsSmithyRpcV2CborProtocol extends SmithyRpcV2CborProtocol {\n    awsQueryCompatible;\n    mixin;\n    constructor({ defaultNamespace, awsQueryCompatible, }) {\n        super({ defaultNamespace });\n        this.awsQueryCompatible = !!awsQueryCompatible;\n        this.mixin = new ProtocolLib(this.awsQueryCompatible);\n    }\n    async serializeRequest(operationSchema, input, context) {\n        const request = await super.serializeRequest(operationSchema, input, context);\n        if (this.awsQueryCompatible) {\n            request.headers[\"x-amzn-query-mode\"] = \"true\";\n        }\n        return request;\n    }\n    async handleError(operationSchema, context, response, dataObject, metadata) {\n        if (this.awsQueryCompatible) {\n            this.mixin.setQueryCompatError(dataObject, response);\n        }\n        const errorName = (() => {\n            const compatHeader = response.headers[\"x-amzn-query-error\"];\n            if (compatHeader && this.awsQueryCompatible) {\n                return compatHeader.split(\";\")[0];\n            }\n            return loadSmithyRpcV2CborErrorCode(response, dataObject) ?? \"Unknown\";\n        })();\n        const { errorSchema, errorMetadata } = await this.mixin.getErrorSchemaOrThrowBaseException(errorName, this.options.defaultNamespace, response, dataObject, metadata, this.awsQueryCompatible ? this.mixin.findQueryCompatibleError : undefined);\n        const ns = NormalizedSchema.of(errorSchema);\n        const message = dataObject.message ?? dataObject.Message ?? \"Unknown\";\n        const ErrorCtor = TypeRegistry.for(errorSchema[1]).getErrorCtor(errorSchema) ?? Error;\n        const exception = new ErrorCtor(message);\n        const output = {};\n        for (const [name, member] of ns.structIterator()) {\n            if (dataObject[name] != null) {\n                output[name] = this.deserializer.readValue(member, dataObject[name]);\n            }\n        }\n        if (this.awsQueryCompatible) {\n            this.mixin.queryCompatOutput(dataObject, output);\n        }\n        throw this.mixin.decorateServiceException(Object.assign(exception, errorMetadata, {\n            $fault: ns.getMergedTraits().error,\n            message,\n        }, output), dataObject);\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}