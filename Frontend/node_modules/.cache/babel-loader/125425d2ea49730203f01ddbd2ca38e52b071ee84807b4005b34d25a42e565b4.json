{"ast":null,"code":"import _defineProperty from \"/home/rcts/Email-differ/Frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { RpcProtocol } from \"@smithy/core/protocols\";\nimport { deref, NormalizedSchema, TypeRegistry } from \"@smithy/core/schema\";\nimport { ProtocolLib } from \"../ProtocolLib\";\nimport { JsonCodec } from \"./JsonCodec\";\nimport { loadRestJsonErrorCode } from \"./parseJsonBody\";\nexport class AwsJsonRpcProtocol extends RpcProtocol {\n  constructor(_ref) {\n    let {\n      defaultNamespace,\n      serviceTarget,\n      awsQueryCompatible,\n      jsonCodec\n    } = _ref;\n    super({\n      defaultNamespace\n    });\n    _defineProperty(this, \"serializer\", void 0);\n    _defineProperty(this, \"deserializer\", void 0);\n    _defineProperty(this, \"serviceTarget\", void 0);\n    _defineProperty(this, \"codec\", void 0);\n    _defineProperty(this, \"mixin\", void 0);\n    _defineProperty(this, \"awsQueryCompatible\", void 0);\n    this.serviceTarget = serviceTarget;\n    this.codec = jsonCodec !== null && jsonCodec !== void 0 ? jsonCodec : new JsonCodec({\n      timestampFormat: {\n        useTrait: true,\n        default: 7\n      },\n      jsonName: false\n    });\n    this.serializer = this.codec.createSerializer();\n    this.deserializer = this.codec.createDeserializer();\n    this.awsQueryCompatible = !!awsQueryCompatible;\n    this.mixin = new ProtocolLib(this.awsQueryCompatible);\n  }\n  async serializeRequest(operationSchema, input, context) {\n    const request = await super.serializeRequest(operationSchema, input, context);\n    if (!request.path.endsWith(\"/\")) {\n      request.path += \"/\";\n    }\n    Object.assign(request.headers, {\n      \"content-type\": \"application/x-amz-json-\".concat(this.getJsonRpcVersion()),\n      \"x-amz-target\": \"\".concat(this.serviceTarget, \".\").concat(operationSchema.name)\n    });\n    if (this.awsQueryCompatible) {\n      request.headers[\"x-amzn-query-mode\"] = \"true\";\n    }\n    if (deref(operationSchema.input) === \"unit\" || !request.body) {\n      request.body = \"{}\";\n    }\n    return request;\n  }\n  getPayloadCodec() {\n    return this.codec;\n  }\n  async handleError(operationSchema, context, response, dataObject, metadata) {\n    var _loadRestJsonErrorCod, _ref2, _dataObject$message, _TypeRegistry$for$get;\n    if (this.awsQueryCompatible) {\n      this.mixin.setQueryCompatError(dataObject, response);\n    }\n    const errorIdentifier = (_loadRestJsonErrorCod = loadRestJsonErrorCode(response, dataObject)) !== null && _loadRestJsonErrorCod !== void 0 ? _loadRestJsonErrorCod : \"Unknown\";\n    const {\n      errorSchema,\n      errorMetadata\n    } = await this.mixin.getErrorSchemaOrThrowBaseException(errorIdentifier, this.options.defaultNamespace, response, dataObject, metadata, this.awsQueryCompatible ? this.mixin.findQueryCompatibleError : undefined);\n    const ns = NormalizedSchema.of(errorSchema);\n    const message = (_ref2 = (_dataObject$message = dataObject.message) !== null && _dataObject$message !== void 0 ? _dataObject$message : dataObject.Message) !== null && _ref2 !== void 0 ? _ref2 : \"Unknown\";\n    const ErrorCtor = (_TypeRegistry$for$get = TypeRegistry.for(errorSchema[1]).getErrorCtor(errorSchema)) !== null && _TypeRegistry$for$get !== void 0 ? _TypeRegistry$for$get : Error;\n    const exception = new ErrorCtor(message);\n    const output = {};\n    for (const [name, member] of ns.structIterator()) {\n      if (dataObject[name] != null) {\n        output[name] = this.codec.createDeserializer().readObject(member, dataObject[name]);\n      }\n    }\n    if (this.awsQueryCompatible) {\n      this.mixin.queryCompatOutput(dataObject, output);\n    }\n    throw this.mixin.decorateServiceException(Object.assign(exception, errorMetadata, {\n      $fault: ns.getMergedTraits().error,\n      message\n    }, output), dataObject);\n  }\n}","map":{"version":3,"names":["RpcProtocol","deref","NormalizedSchema","TypeRegistry","ProtocolLib","JsonCodec","loadRestJsonErrorCode","AwsJsonRpcProtocol","constructor","_ref","defaultNamespace","serviceTarget","awsQueryCompatible","jsonCodec","_defineProperty","codec","timestampFormat","useTrait","default","jsonName","serializer","createSerializer","deserializer","createDeserializer","mixin","serializeRequest","operationSchema","input","context","request","path","endsWith","Object","assign","headers","concat","getJsonRpcVersion","name","body","getPayloadCodec","handleError","response","dataObject","metadata","_loadRestJsonErrorCod","_ref2","_dataObject$message","_TypeRegistry$for$get","setQueryCompatError","errorIdentifier","errorSchema","errorMetadata","getErrorSchemaOrThrowBaseException","options","findQueryCompatibleError","undefined","ns","of","message","Message","ErrorCtor","for","getErrorCtor","Error","exception","output","member","structIterator","readObject","queryCompatOutput","decorateServiceException","$fault","getMergedTraits","error"],"sources":["/home/rcts/Email-differ/Frontend/node_modules/@aws-sdk/core/dist-es/submodules/protocols/json/AwsJsonRpcProtocol.js"],"sourcesContent":["import { RpcProtocol } from \"@smithy/core/protocols\";\nimport { deref, NormalizedSchema, TypeRegistry } from \"@smithy/core/schema\";\nimport { ProtocolLib } from \"../ProtocolLib\";\nimport { JsonCodec } from \"./JsonCodec\";\nimport { loadRestJsonErrorCode } from \"./parseJsonBody\";\nexport class AwsJsonRpcProtocol extends RpcProtocol {\n    serializer;\n    deserializer;\n    serviceTarget;\n    codec;\n    mixin;\n    awsQueryCompatible;\n    constructor({ defaultNamespace, serviceTarget, awsQueryCompatible, jsonCodec, }) {\n        super({\n            defaultNamespace,\n        });\n        this.serviceTarget = serviceTarget;\n        this.codec =\n            jsonCodec ??\n                new JsonCodec({\n                    timestampFormat: {\n                        useTrait: true,\n                        default: 7,\n                    },\n                    jsonName: false,\n                });\n        this.serializer = this.codec.createSerializer();\n        this.deserializer = this.codec.createDeserializer();\n        this.awsQueryCompatible = !!awsQueryCompatible;\n        this.mixin = new ProtocolLib(this.awsQueryCompatible);\n    }\n    async serializeRequest(operationSchema, input, context) {\n        const request = await super.serializeRequest(operationSchema, input, context);\n        if (!request.path.endsWith(\"/\")) {\n            request.path += \"/\";\n        }\n        Object.assign(request.headers, {\n            \"content-type\": `application/x-amz-json-${this.getJsonRpcVersion()}`,\n            \"x-amz-target\": `${this.serviceTarget}.${operationSchema.name}`,\n        });\n        if (this.awsQueryCompatible) {\n            request.headers[\"x-amzn-query-mode\"] = \"true\";\n        }\n        if (deref(operationSchema.input) === \"unit\" || !request.body) {\n            request.body = \"{}\";\n        }\n        return request;\n    }\n    getPayloadCodec() {\n        return this.codec;\n    }\n    async handleError(operationSchema, context, response, dataObject, metadata) {\n        if (this.awsQueryCompatible) {\n            this.mixin.setQueryCompatError(dataObject, response);\n        }\n        const errorIdentifier = loadRestJsonErrorCode(response, dataObject) ?? \"Unknown\";\n        const { errorSchema, errorMetadata } = await this.mixin.getErrorSchemaOrThrowBaseException(errorIdentifier, this.options.defaultNamespace, response, dataObject, metadata, this.awsQueryCompatible ? this.mixin.findQueryCompatibleError : undefined);\n        const ns = NormalizedSchema.of(errorSchema);\n        const message = dataObject.message ?? dataObject.Message ?? \"Unknown\";\n        const ErrorCtor = TypeRegistry.for(errorSchema[1]).getErrorCtor(errorSchema) ?? Error;\n        const exception = new ErrorCtor(message);\n        const output = {};\n        for (const [name, member] of ns.structIterator()) {\n            if (dataObject[name] != null) {\n                output[name] = this.codec.createDeserializer().readObject(member, dataObject[name]);\n            }\n        }\n        if (this.awsQueryCompatible) {\n            this.mixin.queryCompatOutput(dataObject, output);\n        }\n        throw this.mixin.decorateServiceException(Object.assign(exception, errorMetadata, {\n            $fault: ns.getMergedTraits().error,\n            message,\n        }, output), dataObject);\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}