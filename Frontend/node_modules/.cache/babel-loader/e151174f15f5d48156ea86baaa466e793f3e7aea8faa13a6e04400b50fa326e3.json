{"ast":null,"code":"import _objectSpread from\"/home/rcts/Email-differ/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState,useRef}from\"react\";import{useSearchParams}from\"react-router-dom\";import API,{validateToken,submitForm,deferForm,optOut}from\"../../api/apiService\";import{auth,signInWithPhoneNumber,RecaptchaVerifier}from\"../../firebase\";import{GithubAuthProvider,signInWithPopup,getAdditionalUserInfo,signOut}from\"firebase/auth\";import Swal from\"sweetalert2\";import{Box,Paper,Typography,TextField,Button,FormControl,InputLabel,Select,MenuItem,CircularProgress,Stack,Divider,Autocomplete}from\"@mui/material\";import logo1 from\"../../assets/badal_logo.png\";import logo2 from\"../../assets/c4gt_logo.png\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ORGANIZATIONS=[\"Self\",\"Government of India\",\"NITI Aayog\",\"Indian Institute of Technology\",\"Indian Institute of Science\",\"Microsoft India\",\"Google India\",\"TCS\",\"Infosys\",\"Wipro\",\"Other\"];const ORG_TYPE_MAPPINGS={\"Government of India\":\"Government\",\"NITI Aayog\":\"Government\",\"Indian Institute of Technology\":\"Academic\",\"Indian Institute of Science\":\"Academic\",\"Microsoft India\":\"Corporate\",\"Google India\":\"Corporate\",TCS:\"Corporate\",Infosys:\"Corporate\",Wipro:\"Corporate\",Self:\"Self\"};// âœ… Role List (matching SignUpPage)\nconst ROLES=[{value:\"R005\",label:\"Mentor\"},{value:\"R004\",label:\"Developer\"}];// âœ… Role codes to backend strings (consistent with SignUpPage)\n// eslint-disable-next-line no-unused-vars\nconst ROLE_MAP={R004:\"Student\",R005:\"Mentor\"};const GENDERS=[\"Male\",\"Female\",\"Other\",\"Prefer not to say\"];// âœ… Validation regex (available for future use)\n// eslint-disable-next-line no-unused-vars\nconst githubRegex=/^https:\\/\\/(www\\.)?github\\.com\\/[A-Za-z0-9_-]+\\/?$/;// eslint-disable-next-line no-unused-vars\nconst linkedinRegex=/^https:\\/\\/(www\\.)?linkedin\\.com\\/in\\/[A-Za-z0-9_-]+\\/?$/;const DISCORD_REDIRECT=\"http://127.0.0.1:3000/rcts/codeforgovtech/discord-callback\";const DISCORD_INVITE=\"https://discord.gg/BsbzbUHz\";// âœ… Generate OAuth state for CSRF protection\nconst generateOAuthState=()=>{return Math.random().toString(36).substring(2)+Date.now().toString(36);};const DISCORD_OAUTH=state=>\"https://discord.com/oauth2/authorize\"+\"?client_id=1450787791834447874\"+\"&redirect_uri=\"+encodeURIComponent(DISCORD_REDIRECT)+\"&response_type=code\"+\"&scope=identify%20guilds\"+\"&state=\"+encodeURIComponent(state);// LinkedIn OAuth removed: collecting URL via input field instead\nconst UpdateForm=()=>{const[searchParams]=useSearchParams();const token=searchParams.get(\"token\");const[formData,setFormData]=useState({fullName:\"\",email:\"\",phone:\"\",gender:\"\",organisation:\"\",orgType:\"\",role:\"\",githubId:\"\",githubUrl:\"\",discordId:\"\",linkedinId:\"\"});const[phoneVerification,setPhoneVerification]=useState({isVerified:false,showOtpInput:false,otp:\"\",isProcessing:false,firebaseToken:null// âœ… Store Firebase token for form submission\n});const[status,setStatus]=useState(\"loading\");const[errorMessage,setErrorMessage]=useState(\"\");const[interested,setInterested]=useState(null);const[optoutReason,setOptoutReason]=useState(\"\");const[optoutProcessing,setOptoutProcessing]=useState(false);const[timer,setTimer]=useState(0);const isDirtyRef=useRef(false);const[fadeOut,setFadeOut]=useState(false);const[countdown,setCountdown]=useState(5);const[timeRemaining,setTimeRemaining]=useState(600);// 10 minutes in seconds\nconst[showCustomOrg,setShowCustomOrg]=useState(false);// âœ… Add for custom org handling\nconst[isSubmitting,setIsSubmitting]=useState(false);// âœ… Prevent double submit\nconst recaptchaCleanedUp=useRef(false);// âœ… Track recaptcha cleanup\n// Form validation - check if all required fields are filled\nconst isFormComplete=()=>{var _formData$fullName,_formData$email,_formData$phone;// âœ… Check if submission is in progress\nif(isSubmitting)return false;// âœ… Handle organisation as string or ensure it exists\nconst orgValue=typeof formData.organisation==='string'?formData.organisation.trim():formData.organisation||\"\";const requiredFieldsFilled=((_formData$fullName=formData.fullName)===null||_formData$fullName===void 0?void 0:_formData$fullName.trim())!==\"\"&&((_formData$email=formData.email)===null||_formData$email===void 0?void 0:_formData$email.trim())!==\"\"&&((_formData$phone=formData.phone)===null||_formData$phone===void 0?void 0:_formData$phone.trim())!==\"\"&&formData.gender!==\"\"&&orgValue!==\"\"&&formData.orgType!==\"\"&&formData.role!==\"\";const socialVerified=githubStatus.verified&&discordVerified;const phoneVerified=phoneVerification.isVerified;return requiredFieldsFilled&&socialVerified&&phoneVerified;};// OAuth verification states\nconst[githubStatus,setGithubStatus]=useState({verifying:false,verified:false,username:\"\",avatar:\"\",// âœ… Store avatar URL\nerror:\"\"});const[discordVerified,setDiscordVerified]=useState(sessionStorage.getItem(\"discordVerified\")===\"true\");const[discordNotMember,setDiscordNotMember]=useState(sessionStorage.getItem(\"discordNotMember\")===\"true\");const[discordStatus,setDiscordStatus]=useState({verifying:false});const[oauthInProgress,setOauthInProgress]=useState(false);// ðŸ”” SweetAlert helper\nconst showAlert=function(text){let icon=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"info\";return Swal.fire({text,icon,confirmButtonColor:\"#1E4DD8\"});};// âœ… Restore UpdateForm context when returning from OAuth\nuseEffect(()=>{const isReturningFromOAuth=sessionStorage.getItem(\"isNavigating\");if(isReturningFromOAuth){const savedFormData=sessionStorage.getItem(\"updateFormData\");const savedToken=sessionStorage.getItem(\"updateFormToken\");if(savedFormData){try{const parsedData=JSON.parse(savedFormData);setFormData(prev=>_objectSpread(_objectSpread({},prev),parsedData));}catch(e){console.error(\"Failed to restore form data:\",e);}}// Clear OAuth in progress flag on backend\nif(savedToken){API.post('/form/oauth-status',{token:savedToken,inProgress:false}).catch(err=>console.error(\"Failed to clear OAuth flag:\",err));}sessionStorage.removeItem(\"isNavigating\");sessionStorage.removeItem(\"updateFormData\");sessionStorage.removeItem(\"updateFormToken\");setOauthInProgress(false);}},[]);// âœ… Token validation\nuseEffect(()=>{const activateAndValidate=async()=>{if(!token){setStatus(\"invalid\");setErrorMessage(\"No token provided\");return;}try{// âœ… Activate token and get activatedAt timestamp\nconst activateRes=await API.post(\"/form/activate\",{token});const res=await validateToken(token);if(res.data.valid){var _partialRes$data,_activateRes$data;setStatus(\"valid\");const partialRes=await API.get(\"/form/partial/\".concat(token));if((_partialRes$data=partialRes.data)!==null&&_partialRes$data!==void 0&&_partialRes$data.data){setFormData(prev=>_objectSpread(_objectSpread({},prev),partialRes.data.data));}// âœ… Calculate time remaining from backend activatedAt timestamp\nif((_activateRes$data=activateRes.data)!==null&&_activateRes$data!==void 0&&_activateRes$data.activatedAt){const activatedTime=new Date(activateRes.data.activatedAt).getTime();const now=Date.now();const elapsed=Math.floor((now-activatedTime)/1000);// seconds elapsed\nconst remaining=Math.max(0,600-elapsed);// 10 minutes = 600 seconds\nsetTimeRemaining(remaining);}// â° Token expires after 7 days (matches backend expiry window)\nconst timer=setTimeout(()=>{setStatus(\"expired\");alert(\"This link has expired. Please check your email for a new update link.\");},7*24*60*60*1000);// 7 days\nreturn()=>clearTimeout(timer);}else{setStatus(\"invalid\");setErrorMessage(res.data.message||\"Invalid token\");}}catch(err){var _err$response,_err$response$data;const errorMsg=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Failed to load form\";// âœ… Check if form was already submitted\nif(errorMsg===\"Form already submitted\"){setStatus(\"submitted\");}else{setStatus(\"invalid\");setErrorMessage(errorMsg);}}};activateAndValidate();},[token]);// âœ… Clean up reCAPTCHA on component unmount\nuseEffect(()=>{return()=>{if(window.recaptchaVerifier){try{window.recaptchaVerifier.clear();console.log(\"reCAPTCHA cleaned up on unmount\");}catch(e){console.warn('Failed to clear recaptcha on unmount:',e);}window.recaptchaVerifier=null;}const container=document.getElementById(\"recaptcha-container-update\");if(container){container.innerHTML=\"\";}};},[]);// âœ… Auto-save every 5 seconds (only if form data changed)\nuseEffect(()=>{if(status!==\"valid\")return;const timer=setInterval(async()=>{// âœ… Only save if form data has changed\nif(!isDirtyRef.current)return;try{await API.post(\"/form/save-partial\",{token,data:formData});isDirtyRef.current=false;// âœ… Reset dirty flag after successful save\n}catch(_unused){}},5000);return()=>clearInterval(timer);},[formData,status,token]);// â± Resend timer\nuseEffect(()=>{if(timer>0){const interval=setInterval(()=>setTimer(t=>t-1),1000);return()=>clearInterval(interval);}},[timer]);// Restore GitHub verification from sessionStorage\nuseEffect(()=>{const verified=sessionStorage.getItem(\"githubVerified\")===\"true\";const username=sessionStorage.getItem(\"githubUsername\");const url=sessionStorage.getItem(\"githubUrl\");if(verified&&username&&url){setGithubStatus({verifying:false,verified:true,username,error:\"\"});setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{githubUrl:url}));}},[]);// Restore Discord verification from sessionStorage\nuseEffect(()=>{const verified=sessionStorage.getItem(\"discordVerified\")===\"true\";const notMember=sessionStorage.getItem(\"discordNotMember\")===\"true\";setDiscordVerified(verified);setDiscordNotMember(notMember);if(verified){const discordUsername=sessionStorage.getItem(\"discordUsername\");if(discordUsername){// Use username (display name like \"user#1234\"), not numeric ID\nsetFormData(prev=>_objectSpread(_objectSpread({},prev),{},{discordId:discordUsername}));}}},[]);// âœ… Auto-close tab + countdown when deferred\nuseEffect(()=>{if(status===\"deferred\"){const interval=setInterval(()=>{setCountdown(prev=>{if(prev<=1){window.close();// auto-close after countdown\nclearInterval(interval);return 0;}return prev-1;});},1000);return()=>clearInterval(interval);}},[status]);// Restore GitHub verification from sessionStorage\nuseEffect(()=>{const verified=sessionStorage.getItem(\"githubVerified\")===\"true\";const username=sessionStorage.getItem(\"githubUsername\");const url=sessionStorage.getItem(\"githubUrl\");if(verified&&username&&url){setGithubStatus({verifying:false,verified:true,username,error:\"\"});setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{githubUrl:url}));}},[]);// âœ… 10-minute countdown timer with auto-expiry\nuseEffect(()=>{if(status===\"valid\"&&timeRemaining>0){const countdownInterval=setInterval(()=>{setTimeRemaining(prev=>{if(prev<=1){clearInterval(countdownInterval);setStatus(\"expired\");Swal.fire({icon:\"warning\",title:\"Token Expired\",html:\"\\n                <p>Your form session has expired after 10 minutes.</p>\\n                <p><strong>What happens next?</strong></p>\\n                <ul style=\\\"text-align: left; margin: 10px 20px;\\\">\\n                  <li>This form will be automatically closed</li>\\n                  <li>You will receive a new reminder email within 24 hours</li>\\n                  <li>You can complete the form using the new link</li>\\n                </ul>\\n              \",confirmButtonColor:\"#1E4DD8\",confirmButtonText:\"OK\"});return 0;}return prev-1;});},1000);return()=>clearInterval(countdownInterval);}},[status,timeRemaining]);// âœ… Verify GitHub\nconst handleVerifyGithub=async()=>{setGithubStatus({verifying:true,verified:false,username:\"\",avatar:\"\",error:\"\"});try{var _info$profile;const provider=new GithubAuthProvider();const result=await signInWithPopup(auth,provider);const info=getAdditionalUserInfo(result);const githubUsername=info===null||info===void 0?void 0:info.username;const githubAvatar=(info===null||info===void 0?void 0:(_info$profile=info.profile)===null||_info$profile===void 0?void 0:_info$profile.avatar_url)||\"\";if(!githubUsername)throw new Error(\"Unable to retrieve GitHub username\");const verifiedUrl=\"https://github.com/\".concat(githubUsername);setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{githubUrl:verifiedUrl}));// âœ… Store in sessionStorage for persistence\nsessionStorage.setItem(\"githubVerified\",\"true\");sessionStorage.setItem(\"githubUsername\",githubUsername);sessionStorage.setItem(\"githubUrl\",verifiedUrl);sessionStorage.setItem(\"githubAvatar\",githubAvatar);setGithubStatus({verifying:false,verified:true,username:githubUsername,avatar:githubAvatar,error:\"\"});await signOut(auth);showAlert(\"GitHub verified successfully!\",\"success\");}catch(err){var _err$message,_err$message2;console.error(\"GitHub verify error:\",err);// âœ… Handle different error types\nlet errorMsg=\"GitHub verification failed. Please try again.\";if(err.code===\"auth/popup-closed-by-user\"){errorMsg=\"Verification cancelled. Please try again.\";}else if(err.code===\"auth/popup-blocked\"){errorMsg=\"Popup was blocked by your browser. Please allow popups for this site and try again.\";}else if(err.code===\"auth/cancelled-popup-request\"){errorMsg=\"Verification cancelled. Please try again.\";}else if((_err$message=err.message)!==null&&_err$message!==void 0&&_err$message.includes(\"rate\")||(_err$message2=err.message)!==null&&_err$message2!==void 0&&_err$message2.includes(\"limit\")){errorMsg=\"Too many verification attempts. Please wait a few minutes and try again.\";}setGithubStatus({verifying:false,verified:false,username:\"\",avatar:\"\",error:errorMsg});if(err.code!==\"auth/popup-closed-by-user\"){showAlert(errorMsg,\"error\");}}};// âœ… Verify Discord (redirect-based)\nconst handleVerifyDiscord=async()=>{try{// âœ… Set verifying state\nsetDiscordStatus({verifying:true});// âœ… Generate OAuth state for CSRF protection\nconst state=generateOAuthState();sessionStorage.setItem(\"discordOAuthState\",state);// âœ… Clear stale member flag before starting\nsessionStorage.removeItem(\"discordNotMember\");setDiscordNotMember(false);// Mark OAuth as in progress to extend token expiry\nawait API.post('/form/oauth-status',{token,inProgress:true});// Save form data and token before redirect\nsessionStorage.setItem(\"updateFormData\",JSON.stringify(formData));sessionStorage.setItem(\"updateFormToken\",token);sessionStorage.setItem(\"oauthReturnPath\",\"/update-form?token=\".concat(token));setOauthInProgress(true);// âœ… Show loading state briefly before redirect\nshowAlert(\"Redirecting to Discord...\",\"info\");// Redirect to Discord OAuth with state\nsetTimeout(()=>{window.location.href=DISCORD_OAUTH(state);},500);}catch(err){console.error(\"Failed to mark OAuth in progress:\",err);setOauthInProgress(false);// âœ… Clear flag to allow retry\nsetDiscordStatus({verifying:false});// âœ… Reset verifying state\nshowAlert(\"Failed to start Discord verification. Please try again.\",\"error\");}};// âœ… Handle organization change (like SignUpPage)\nconst handleOrgChange=(event,value)=>{isDirtyRef.current=true;if(!value){setShowCustomOrg(false);setFormData(_objectSpread(_objectSpread({},formData),{},{organisation:\"\",orgType:\"\"}));return;}if(value===\"Other\"){setShowCustomOrg(true);setFormData(_objectSpread(_objectSpread({},formData),{},{organisation:\"\",orgType:\"\"}));}else{setShowCustomOrg(false);const orgType=ORG_TYPE_MAPPINGS[value]||\"\";setFormData(_objectSpread(_objectSpread({},formData),{},{organisation:value,orgType}));}};// âœ… Handle changes\nconst handleChange=e=>{isDirtyRef.current=true;const{name,value}=e.target;// âœ… Numeric-only phone input (10 digits)\nif(name===\"phone\"){const onlyNums=value.replace(/\\D/g,\"\");if(onlyNums.length<=10){setFormData(_objectSpread(_objectSpread({},formData),{},{phone:onlyNums}));// Reset phone verification when phone changes\nsetPhoneVerification({isVerified:false,showOtpInput:false,otp:\"\",isProcessing:false});// âœ… Clean up any existing reCAPTCHA when phone changes\nif(window.recaptchaVerifier){try{window.recaptchaVerifier.clear();}catch(e){console.warn('Failed to clear recaptcha on phone change:',e);}window.recaptchaVerifier=null;}const container=document.getElementById(\"recaptcha-container-update\");if(container){container.innerHTML=\"\";}}return;}setFormData(_objectSpread(_objectSpread({},formData),{},{[name]:value}));};// âœ… Request OTP\nconst handleRequestOtp=async()=>{var _formData$phone2;const phoneNumber=(_formData$phone2=formData.phone)===null||_formData$phone2===void 0?void 0:_formData$phone2.trim();if(!phoneNumber||phoneNumber.length!==10){return showAlert(\"Please enter a valid 10-digit phone number.\",\"warning\");}if(timer>0)return showAlert(\"Please wait \".concat(timer,\"s before resending OTP.\"),\"info\");setPhoneVerification(p=>_objectSpread(_objectSpread({},p),{},{isProcessing:true}));try{// âœ… Comprehensive cleanup of any existing reCAPTCHA\nconst container=document.getElementById(\"recaptcha-container-update\");// Clear existing verifier\nif(window.recaptchaVerifier){try{await window.recaptchaVerifier.clear();console.log(\"Cleared existing recaptchaVerifier\");}catch(e){console.warn('Failed to clear existing recaptcha:',e);}window.recaptchaVerifier=null;}// Clear container\nif(container){container.innerHTML=\"\";}// âœ… Wait longer to ensure Firebase/Google cleanup is complete\nawait new Promise(resolve=>setTimeout(resolve,300));// âœ… Create new RecaptchaVerifier\nwindow.recaptchaVerifier=new RecaptchaVerifier(auth,\"recaptcha-container-update\",{size:\"invisible\",callback:()=>console.log(\"reCAPTCHA solved\"),\"expired-callback\":()=>console.warn(\"reCAPTCHA expired\")});// âœ… Render with error handling\ntry{await window.recaptchaVerifier.render();console.log(\"reCAPTCHA rendered successfully\");}catch(renderError){console.warn(\"reCAPTCHA render error:\",renderError);// If render fails, do full cleanup and retry once\nif(window.recaptchaVerifier){try{await window.recaptchaVerifier.clear();}catch(e){console.warn('Failed to clear after render error:',e);}window.recaptchaVerifier=null;}if(container){container.innerHTML=\"\";}// Wait and create a fresh one\nawait new Promise(resolve=>setTimeout(resolve,300));window.recaptchaVerifier=new RecaptchaVerifier(auth,\"recaptcha-container-update\",{size:\"invisible\",callback:()=>console.log(\"reCAPTCHA solved\"),\"expired-callback\":()=>console.warn(\"reCAPTCHA expired\")});await window.recaptchaVerifier.render();console.log(\"reCAPTCHA rendered successfully on retry\");}const e164Phone=\"+91\".concat(phoneNumber);const confirmationResult=await signInWithPhoneNumber(auth,e164Phone,window.recaptchaVerifier);window.confirmationResult=confirmationResult;showAlert(\"OTP sent successfully to your phone!\",\"success\");setPhoneVerification({showOtpInput:true,isVerified:false,otp:\"\",isProcessing:false});setTimer(30);// cooldown\nrecaptchaCleanedUp.current=false;}catch(err){var _err$message3;console.error(\"OTP send error:\",err);// âœ… Provide user-friendly error messages\nlet errorMsg=\"Failed to send OTP. Please try again.\";if(err.code===\"auth/too-many-requests\"){errorMsg=\"Too many attempts. Please try again later.\";}else if(err.code===\"auth/invalid-phone-number\"){errorMsg=\"Invalid phone number format.\";}else if((_err$message3=err.message)!==null&&_err$message3!==void 0&&_err$message3.includes(\"reCAPTCHA\")){errorMsg=err.message;}showAlert(errorMsg,\"error\");// âœ… Clean up on error\nconst container=document.getElementById(\"recaptcha-container-update\");if(container){container.innerHTML=\"\";}if(window.recaptchaVerifier){try{window.recaptchaVerifier.clear();}catch(e){console.warn('Failed to clear recaptchaVerifier:',e);}window.recaptchaVerifier=null;}recaptchaCleanedUp.current=true;setPhoneVerification(p=>_objectSpread(_objectSpread({},p),{},{isProcessing:false}));}};// âœ… Verify OTP\nconst handleVerifyOtp=async()=>{if(!phoneVerification.otp.trim()||phoneVerification.otp.length!==6){return showAlert(\"Please enter a valid 6-digit OTP.\",\"warning\");}setPhoneVerification(p=>_objectSpread(_objectSpread({},p),{},{isProcessing:true}));try{const result=await window.confirmationResult.confirm(phoneVerification.otp);const user=result.user;const firebaseToken=await user.getIdToken();// âœ… Send phone with +91 prefix\nawait API.post(\"/form/verify-phone\",{token,phone:formData.phone,// Backend will normalize\nfirebaseToken});showAlert(\"Phone verified successfully!\",\"success\");setPhoneVerification(_objectSpread(_objectSpread({},phoneVerification),{},{isVerified:true,isProcessing:false,firebaseToken// âœ… Store token for form submission\n}));// âœ… Clean up recaptcha after successful verification\nif(window.recaptchaVerifier){try{await window.recaptchaVerifier.clear();recaptchaCleanedUp.current=true;}catch(e){console.warn('Failed to clear recaptchaVerifier:',e);}window.recaptchaVerifier=null;}}catch(err){console.error(\"OTP verification failed:\",err);// âœ… User-friendly error messages\nlet errorMsg=\"Invalid or expired OTP. Please try again.\";if(err.code===\"auth/invalid-verification-code\"){errorMsg=\"Invalid OTP code. Please check and try again.\";}else if(err.code===\"auth/code-expired\"){errorMsg=\"OTP has expired. Please request a new one.\";}showAlert(errorMsg,\"error\");// âœ… Clear verifier to allow retry without invisible reCAPTCHA crashing\nif(window.recaptchaVerifier){try{await window.recaptchaVerifier.clear();recaptchaCleanedUp.current=true;}catch(e){console.warn('Failed to clear recaptchaVerifier:',e);}window.recaptchaVerifier=null;}setPhoneVerification(p=>_objectSpread(_objectSpread({},p),{},{isProcessing:false}));}};// âœ… Submit\nconst handleSubmit=async e=>{var _formData$fullName2,_formData$email2,_formData$organisatio;e.preventDefault();// âœ… Prevent double submission\nif(isSubmitting){return;}// âœ… Detailed validation\nif(!((_formData$fullName2=formData.fullName)!==null&&_formData$fullName2!==void 0&&_formData$fullName2.trim())){return showAlert(\"Please enter your full name.\",\"warning\");}if(!formData.phone||formData.phone.length!==10){return showAlert(\"Please enter a valid 10-digit phone number.\",\"warning\");}if(!((_formData$email2=formData.email)!==null&&_formData$email2!==void 0&&_formData$email2.trim())||!formData.email.includes(\"@\")){return showAlert(\"Please enter a valid email address.\",\"warning\");}if(!formData.gender){return showAlert(\"Please select your gender.\",\"warning\");}if(!((_formData$organisatio=formData.organisation)!==null&&_formData$organisatio!==void 0&&_formData$organisatio.trim())){return showAlert(\"Please select or enter your organisation.\",\"warning\");}if(!formData.role){return showAlert(\"Please select your role.\",\"warning\");}if(!githubStatus.verified){return showAlert(\"Please verify your GitHub account before submitting.\",\"warning\");}if(!discordVerified){return showAlert(\"Please verify your Discord account before submitting.\",\"warning\");}if(!phoneVerification.isVerified){return showAlert(\"Please verify your phone number before submitting.\",\"warning\");}const confirm=await Swal.fire({title:\"Confirm Submission?\",text:\"Please review your information before submitting.\",icon:\"question\",showCancelButton:true,confirmButtonText:\"Submit\",confirmButtonColor:\"#1E4DD8\"});if(!confirm.isConfirmed)return;setIsSubmitting(true);try{var _formData$fullName3,_formData$email3,_formData$organisatio2,_formData$githubUrl,_formData$githubId,_formData$discordId,_formData$linkedinId;isDirtyRef.current=false;// âœ… Get verified social media data from sessionStorage\nconst githubUsername=sessionStorage.getItem(\"githubUsername\")||\"\";const githubUrl=sessionStorage.getItem(\"githubUrl\")||\"\";const discordId=sessionStorage.getItem(\"discordId\")||\"\";const discordUsername=sessionStorage.getItem(\"discordUsername\")||\"\";const cleanedData={fullName:(_formData$fullName3=formData.fullName)===null||_formData$fullName3===void 0?void 0:_formData$fullName3.trim(),email:(_formData$email3=formData.email)===null||_formData$email3===void 0?void 0:_formData$email3.trim(),phone:formData.phone,gender:formData.gender,organisation:(_formData$organisatio2=formData.organisation)===null||_formData$organisatio2===void 0?void 0:_formData$organisatio2.trim(),orgType:formData.orgType,role:formData.role,githubUrl:githubUrl||((_formData$githubUrl=formData.githubUrl)===null||_formData$githubUrl===void 0?void 0:_formData$githubUrl.trim())||null,githubId:githubUsername||((_formData$githubId=formData.githubId)===null||_formData$githubId===void 0?void 0:_formData$githubId.trim())||null,discordId:discordId||((_formData$discordId=formData.discordId)===null||_formData$discordId===void 0?void 0:_formData$discordId.trim())||null,linkedinId:((_formData$linkedinId=formData.linkedinId)===null||_formData$linkedinId===void 0?void 0:_formData$linkedinId.trim())||null,token,firebaseToken:phoneVerification.firebaseToken// âœ… Include Firebase token\n};// âœ… Remove null/empty fields\nObject.keys(cleanedData).forEach(key=>{if(cleanedData[key]===null||cleanedData[key]===\"\"){delete cleanedData[key];}});await submitForm(cleanedData);await API.delete(\"/form/partial/\".concat(token));sessionStorage.removeItem(\"updateFormData\");sessionStorage.removeItem(\"updateFormToken\");sessionStorage.removeItem(\"oauthReturnPath\");sessionStorage.removeItem(\"githubVerified\");sessionStorage.removeItem(\"githubUsername\");sessionStorage.removeItem(\"githubUrl\");sessionStorage.removeItem(\"githubAvatar\");sessionStorage.removeItem(\"discordVerified\");sessionStorage.removeItem(\"discordUsername\");sessionStorage.removeItem(\"discordId\");sessionStorage.removeItem(\"discordAvatarUrl\");sessionStorage.removeItem(\"discordNotMember\");sessionStorage.removeItem(\"discordOAuthState\");setStatus(\"submitted\");showAlert(\"Form submitted successfully!\",\"success\");}catch(err){var _err$response2,_err$response2$data;console.error(\"Submission error:\",err);const errorMessage=((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||\"Submission failed. Please try again.\";// âœ… If phone conflict error, reset phone verification so user can change number\nif(errorMessage.includes(\"phone number\")||errorMessage.includes(\"already registered\")){setPhoneVerification({isVerified:false,showOtpInput:false,otp:\"\",isProcessing:false});showAlert(\"This phone number is already registered with a different account. Please use a different number or verify with the correct account.\",\"error\");}else{showAlert(errorMessage,\"error\");}}finally{setIsSubmitting(false);}};// âœ… Defer\n// âœ… Defer (with confirmation + smooth exit)\nconst handleDefer=async()=>{const confirmDefer=window.confirm(\"Are you sure you want to defer filling this form?\\nYouâ€™ll receive a reminder email later.\");if(!confirmDefer)return;// user chose No â€” stay on form\ntry{await deferForm({token});setFadeOut(true);setTimeout(()=>setStatus(\"deferred\"),600);// fade-out animation time\n}catch(err){var _err$response3,_err$response3$data;showAlert(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.message)||\"Failed to defer form.\",\"error\");}};// âœ… Opt-out\nconst handleOptOut=async()=>{const confirm=await Swal.fire({title:\"Confirm Opt-Out?\",text:\"You wonâ€™t receive future communications.\",icon:\"warning\",showCancelButton:true,confirmButtonText:\"Opt Out\",confirmButtonColor:\"#d33\"});if(!confirm.isConfirmed)return;setOptoutProcessing(true);try{await optOut({token,reason:optoutReason});setOptoutProcessing(false);setInterested(\"no\");setStatus(\"deferred\");showAlert(\"You have been opted out successfully.\",\"success\");}catch(err){var _err$response4,_err$response4$data;setOptoutProcessing(false);showAlert(((_err$response4=err.response)===null||_err$response4===void 0?void 0:(_err$response4$data=_err$response4.data)===null||_err$response4$data===void 0?void 0:_err$response4$data.message)||\"Failed to opt out.\",\"error\");}};// âœ… Conditional Views\nif(status===\"loading\")return/*#__PURE__*/_jsx(Typography,{align:\"center\",children:\"Loading form...\"});if(status===\"invalid\")return/*#__PURE__*/_jsx(Box,{sx:{minHeight:\"100vh\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",bgcolor:\"#f8f9fa\",p:2},children:/*#__PURE__*/_jsxs(Paper,{sx:{width:\"100%\",maxWidth:480,p:4,borderRadius:3,boxShadow:4,textAlign:\"center\"},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"error\",fontWeight:\"bold\",gutterBottom:true,children:\"\\u274C Invalid or Expired Link\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mb:2},children:errorMessage||\"This link is no longer valid.\"}),/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",fontWeight:\"bold\",gutterBottom:true,children:\"What happened?\"}),/*#__PURE__*/_jsxs(Box,{sx:{textAlign:\"left\",mx:3,my:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:\"\\uD83D\\uDD17 The link may have already been used\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:\"\\u23F0 The link may have expired (7 days validity)\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:\"\\u2705 You may have already submitted the form\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"\\uD83D\\uDEAB You may have opted out or deferred\"})]}),/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",fontWeight:\"bold\",gutterBottom:true,children:\"What to do next?\"}),/*#__PURE__*/_jsxs(Box,{sx:{textAlign:\"left\",mx:3,my:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:\"\\uD83D\\uDCE7 Check your email for the latest update form link\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:\"\\u23F3 Wait for the next reminder email (sent automatically)\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"\\u2709\\uFE0F Contact support if you believe this is an error\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",sx:{mt:2,display:\"block\"},children:\"You can close this window now.\"})]})});if(status===\"expired\")return/*#__PURE__*/_jsx(Box,{sx:{minHeight:\"100vh\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",bgcolor:\"#f8f9fa\",p:2},children:/*#__PURE__*/_jsxs(Paper,{sx:{width:\"100%\",maxWidth:480,p:4,borderRadius:3,boxShadow:4,textAlign:\"center\"},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"warning.main\",fontWeight:\"bold\",gutterBottom:true,children:\"\\u23F0 Form Expired\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mb:2},children:\"Your 10-minute session has expired.\"}),/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",fontWeight:\"bold\",gutterBottom:true,children:\"What happens next?\"}),/*#__PURE__*/_jsxs(Box,{sx:{textAlign:\"left\",mx:3,my:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:\"\\u2709\\uFE0F You will receive a new reminder email within 24 hours\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:\"\\uD83D\\uDD17 Use the new link to complete your form\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:\"\\uD83D\\uDCBE Your progress has been saved automatically\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"\\u23F1\\uFE0F You'll have another 10 minutes when you return\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",sx:{mt:2,display:\"block\"},children:\"You can close this window now.\"})]})});if(status===\"submitted\")return/*#__PURE__*/_jsx(Box,{sx:{minHeight:\"100vh\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",bgcolor:\"#f8f9fa\",p:2},children:/*#__PURE__*/_jsxs(Paper,{sx:{width:\"100%\",maxWidth:480,p:4,borderRadius:3,boxShadow:4,textAlign:\"center\"},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"success.main\",fontWeight:\"bold\",gutterBottom:true,children:\"\\u2705 Form Already Submitted\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mb:2},children:\"You have already submitted this form successfully.\"}),/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",fontWeight:\"bold\",gutterBottom:true,children:\"What happened?\"}),/*#__PURE__*/_jsxs(Box,{sx:{textAlign:\"left\",mx:3,my:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:\"\\u2705 Your form submission was completed successfully\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:\"\\uD83D\\uDCBE Your information has been saved in our system\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"\\uD83D\\uDD12 This link can no longer be used to prevent duplicate submissions\"})]}),/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",fontWeight:\"bold\",gutterBottom:true,children:\"What to do next?\"}),/*#__PURE__*/_jsxs(Box,{sx:{textAlign:\"left\",mx:3,my:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:\"\\uD83D\\uDCE7 Check your email for confirmation\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:\"\\u2139\\uFE0F No further action is needed\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"\\u2709\\uFE0F Contact support if you need to update your information\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",sx:{mt:2,display:\"block\"},children:\"You can close this window now.\"})]})});// âœ… Deferred screen (auto-close + message)\nif(status===\"deferred\")return/*#__PURE__*/_jsx(Box,{sx:{minHeight:\"100vh\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",bgcolor:\"#f8f9fa\",textAlign:\"center\",p:3},children:/*#__PURE__*/_jsxs(Paper,{sx:{p:4,borderRadius:3,border:\"1px solid #ddd\",boxShadow:3,maxWidth:480},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"warning.main\",gutterBottom:true,children:\"\\u26A0\\uFE0F Form Deferred\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mb:1},children:\"You\\u2019ve chosen to defer filling this form.\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mb:2},children:\"You can complete it later using the reminder email link we\\u2019ll send soon.\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"This window will close automatically in \",/*#__PURE__*/_jsx(\"b\",{children:countdown}),\" seconds.\"]})]})});// âœ… Main Form UI\nreturn/*#__PURE__*/_jsx(Box,{sx:{minHeight:\"100vh\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",bgcolor:\"#f8f9fa\",p:2,flex:1,width:\"100%\"},children:/*#__PURE__*/_jsxs(Paper,{sx:{width:\"100%\",maxWidth:480,p:4,borderRadius:3,boxShadow:4,border:\"1px solid #ddd\",opacity:fadeOut?0:1,transition:\"opacity 0.6s ease-in-out\"},children:[/*#__PURE__*/_jsxs(Stack,{alignItems:\"center\",spacing:1,children:[/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:1,alignItems:\"center\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo1,alt:\"Logo1\",style:{width:45,height:45}}),/*#__PURE__*/_jsx(\"img\",{src:logo2,alt:\"Logo2\",style:{width:45,height:45}})]}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",fontWeight:\"bold\",children:\"Update Your Information\"}),/*#__PURE__*/_jsx(Box,{sx:{width:\"100%\",mt:1,p:1.5,borderRadius:2,backgroundColor:timeRemaining<=120?\"#ffebee\":timeRemaining<=300?\"#fff3e0\":\"#e3f2fd\",border:\"2px solid \".concat(timeRemaining<=120?\"#d32f2f\":timeRemaining<=300?\"#f57c00\":\"#1976d2\"),display:\"flex\",alignItems:\"center\",justifyContent:\"center\",gap:1},children:/*#__PURE__*/_jsxs(Typography,{sx:{fontSize:\"1.1rem\",fontWeight:\"bold\",color:timeRemaining<=120?\"#d32f2f\":timeRemaining<=300?\"#f57c00\":\"#1976d2\"},children:[\"\\u23F1\\uFE0F Time Remaining: \",Math.floor(timeRemaining/60),\":\",String(timeRemaining%60).padStart(2,\"0\")]})}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{color:timeRemaining<=120?\"#d32f2f\":\"text.secondary\",fontWeight:timeRemaining<=120?\"bold\":\"normal\"},children:timeRemaining<=120?\"âš ï¸ Hurry! Your session will expire soon!\":\"Complete the form within 10 minutes or it will expire\"}),/*#__PURE__*/_jsx(Divider,{sx:{width:\"100%\",my:1}})]}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,size:\"small\",sx:{mt:2},children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Continue as part of our organization?\"}),/*#__PURE__*/_jsxs(Select,{value:interested!==null&&interested!==void 0?interested:\"\",label:\"Continue?\",onChange:e=>setInterested(e.target.value),children:[/*#__PURE__*/_jsx(MenuItem,{value:\"yes\",children:\"Yes, I want to continue\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"no\",children:\"No, I want to opt out\"})]})]}),interested===\"no\"?/*#__PURE__*/_jsxs(Box,{mt:3,children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"We're sorry to see you go. You may share feedback (optional):\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,rows:3,placeholder:\"Your reason...\",value:optoutReason,onChange:e=>setOptoutReason(e.target.value),sx:{mt:1}}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",color:\"error\",sx:{mt:2,borderRadius:\"20px\"},onClick:handleOptOut,disabled:optoutProcessing,children:optoutProcessing?\"Processing...\":\"Confirm Opt-Out\"})]}):/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,mt:2,children:[/*#__PURE__*/_jsx(TextField,{label:\"Full Name *\",fullWidth:true,size:\"small\",margin:\"dense\",name:\"fullName\",value:formData.fullName,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(TextField,{label:\"Phone *\",fullWidth:true,size:\"small\",margin:\"dense\",name:\"phone\",value:formData.phone,onChange:handleChange,disabled:phoneVerification.isVerified,required:true}),/*#__PURE__*/_jsx(TextField,{label:\"Email *\",fullWidth:true,size:\"small\",margin:\"dense\",name:\"email\",value:formData.email,onChange:handleChange,required:true}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,size:\"small\",margin:\"dense\",required:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Gender *\"}),/*#__PURE__*/_jsx(Select,{value:formData.gender,label:\"Gender *\",onChange:handleChange,name:\"gender\",children:GENDERS.map(g=>/*#__PURE__*/_jsx(MenuItem,{value:g,children:g},g))})]}),/*#__PURE__*/_jsx(Autocomplete,{disablePortal:true,options:ORGANIZATIONS,value:formData.organisation||(showCustomOrg?\"Other\":\"\"),onChange:(e,newValue)=>handleOrgChange(e,newValue),renderInput:params=>/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Organisation *\",size:\"small\",margin:\"dense\",required:true})),sx:{width:\"100%\"}}),showCustomOrg&&/*#__PURE__*/_jsx(TextField,{label:\"Enter Custom Organisation *\",fullWidth:true,size:\"small\",margin:\"dense\",required:true,value:formData.organisation===\"Other\"?\"\":formData.organisation,onChange:e=>{isDirtyRef.current=true;setFormData(_objectSpread(_objectSpread({},formData),{},{organisation:e.target.value,orgType:\"\"}));}}),showCustomOrg?/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,size:\"small\",margin:\"dense\",required:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Organisation Type\"}),/*#__PURE__*/_jsxs(Select,{label:\"Organisation Type\",value:formData.orgType,onChange:e=>{isDirtyRef.current=true;setFormData(_objectSpread(_objectSpread({},formData),{},{orgType:e.target.value}));},children:[/*#__PURE__*/_jsx(MenuItem,{value:\"Government\",children:\"Government\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Corporate\",children:\"Corporate\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Academic\",children:\"Academic\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"NGO\",children:\"NGO\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Self\",children:\"Self\"})]})]}):/*#__PURE__*/_jsx(TextField,{label:\"Organisation Type\",fullWidth:true,size:\"small\",margin:\"dense\",value:formData.orgType,InputProps:{readOnly:true}}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,size:\"small\",margin:\"dense\",required:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Role *\"}),/*#__PURE__*/_jsx(Select,{value:formData.role,label:\"Role *\",name:\"role\",onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{role:e.target.value})),children:ROLES.map(r=>/*#__PURE__*/_jsx(MenuItem,{value:r.value,children:r.label},r.value))})]}),/*#__PURE__*/_jsx(Typography,{fontWeight:\"bold\",fontSize:14,mt:2,mb:1,children:\"Social:\"}),/*#__PURE__*/_jsx(Typography,{fontWeight:\"bold\",fontSize:14,mt:1,mb:1,children:\"GitHub:\"}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",flexDirection:\"column\",gap:1,width:\"100%\",mt:1},children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",onClick:handleVerifyGithub,disabled:githubStatus.verified||githubStatus.verifying,sx:{borderRadius:\"10px\",fontWeight:\"bold\",backgroundColor:githubStatus.verified?\"#4CAF50\":\"#000\",color:\"white\",\"&:disabled\":{backgroundColor:githubStatus.verified?\"#4CAF50\":\"#9e9e9e\",color:\"white\"}},children:githubStatus.verified?\"GitHub Verified âœ“\":\"Verify GitHub\"}),githubStatus.verified&&/*#__PURE__*/_jsxs(Typography,{fontSize:13,color:\"#2e7d32\",children:[\"\\u2713 Verified as: \",githubStatus.username]}),!githubStatus.verified&&githubStatus.error&&/*#__PURE__*/_jsxs(Typography,{fontSize:13,color:\"#d32f2f\",children:[\"\\u274C \",githubStatus.error]})]}),/*#__PURE__*/_jsx(Typography,{fontWeight:\"bold\",fontSize:14,mt:2,mb:1,children:\"Discord:\"}),/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\",flexDirection:\"column\",gap:1,width:\"100%\",mt:1},children:discordVerified?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",disabled:true,sx:{borderRadius:\"10px\",fontWeight:\"bold\",backgroundColor:\"#4CAF50\",color:\"white\",\"&.Mui-disabled\":{backgroundColor:\"#4CAF50\",color:\"white\"}},children:\"DISCORD VERIFIED \\u2713\"}),/*#__PURE__*/_jsxs(Typography,{fontSize:13,color:\"#2e7d32\",children:[\"\\u2713 Verified as: \",sessionStorage.getItem(\"discordUsername\")]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",sx:{borderRadius:\"10px\",fontWeight:\"bold\",backgroundColor:\"#1E4DD8\",\"&:hover\":{backgroundColor:\"#1536A1\"}},onClick:handleVerifyDiscord,disabled:discordStatus.verifying,startIcon:discordStatus.verifying?/*#__PURE__*/_jsx(CircularProgress,{size:20,color:\"inherit\"}):null,children:discordStatus.verifying?\"REDIRECTING...\":\"VERIFY DISCORD\"}),discordNotMember&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"outlined\",sx:{borderRadius:\"10px\",fontWeight:\"bold\"},onClick:()=>window.open(DISCORD_INVITE,\"_blank\"),children:\"JOIN DISCORD SERVER\"}),/*#__PURE__*/_jsx(Typography,{fontSize:13,color:\"#d32f2f\",children:\"\\u274C You must join our Discord server before verification.\"})]})]})}),/*#__PURE__*/_jsx(Typography,{fontWeight:\"bold\",fontSize:14,mt:2,mb:1,children:\"LinkedIn URL (Optional):\"}),/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\",flexDirection:\"column\",gap:1,width:\"100%\",mt:1},children:/*#__PURE__*/_jsx(TextField,{label:\"Enter LinkedIn profile URL\",placeholder:\"https://www.linkedin.com/in/username\",value:formData.linkedinId,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{linkedinId:e.target.value})),size:\"small\",fullWidth:true})}),/*#__PURE__*/_jsxs(Box,{mt:2,children:[/*#__PURE__*/_jsx(\"div\",{id:\"recaptcha-container-update\"}),!phoneVerification.isVerified&&/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:2,mt:1,children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",fullWidth:true,onClick:handleRequestOtp,disabled:phoneVerification.isProcessing||timer>0,children:timer>0?\"Resend in \".concat(timer,\"s\"):phoneVerification.isProcessing?\"Sending...\":\"Send OTP\"}),phoneVerification.showOtpInput&&/*#__PURE__*/_jsx(TextField,{label:\"Enter 6-digit OTP\",size:\"small\",value:phoneVerification.otp,onChange:e=>{const onlyNums=e.target.value.replace(/\\D/g,\"\");if(onlyNums.length<=6)setPhoneVerification(_objectSpread(_objectSpread({},phoneVerification),{},{otp:onlyNums}));},inputProps:{inputMode:\"numeric\",pattern:\"[0-9]*\",maxLength:6,onKeyPress:e=>{if(!/[0-9]/.test(e.key))e.preventDefault();}}}),phoneVerification.showOtpInput&&/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handleVerifyOtp,disabled:phoneVerification.isProcessing,children:phoneVerification.isProcessing?/*#__PURE__*/_jsx(CircularProgress,{size:18,color:\"inherit\"}):\"Verify\"})]}),phoneVerification.isVerified&&/*#__PURE__*/_jsx(Typography,{color:\"success.main\",mt:1,children:\"\\u2705 Phone verified successfully!\"})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:2,mt:3,children:[/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",fullWidth:true,disabled:!isFormComplete(),children:\"Submit\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",fullWidth:true,onClick:handleDefer,disabled:oauthInProgress,children:\"Defer\"})]})]})]})});};export default UpdateForm;","map":{"version":3,"names":["React","useEffect","useState","useRef","useSearchParams","API","validateToken","submitForm","deferForm","optOut","auth","signInWithPhoneNumber","RecaptchaVerifier","GithubAuthProvider","signInWithPopup","getAdditionalUserInfo","signOut","Swal","Box","Paper","Typography","TextField","Button","FormControl","InputLabel","Select","MenuItem","CircularProgress","Stack","Divider","Autocomplete","logo1","logo2","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ORGANIZATIONS","ORG_TYPE_MAPPINGS","TCS","Infosys","Wipro","Self","ROLES","value","label","ROLE_MAP","R004","R005","GENDERS","githubRegex","linkedinRegex","DISCORD_REDIRECT","DISCORD_INVITE","generateOAuthState","Math","random","toString","substring","Date","now","DISCORD_OAUTH","state","encodeURIComponent","UpdateForm","searchParams","token","get","formData","setFormData","fullName","email","phone","gender","organisation","orgType","role","githubId","githubUrl","discordId","linkedinId","phoneVerification","setPhoneVerification","isVerified","showOtpInput","otp","isProcessing","firebaseToken","status","setStatus","errorMessage","setErrorMessage","interested","setInterested","optoutReason","setOptoutReason","optoutProcessing","setOptoutProcessing","timer","setTimer","isDirtyRef","fadeOut","setFadeOut","countdown","setCountdown","timeRemaining","setTimeRemaining","showCustomOrg","setShowCustomOrg","isSubmitting","setIsSubmitting","recaptchaCleanedUp","isFormComplete","_formData$fullName","_formData$email","_formData$phone","orgValue","trim","requiredFieldsFilled","socialVerified","githubStatus","verified","discordVerified","phoneVerified","setGithubStatus","verifying","username","avatar","error","setDiscordVerified","sessionStorage","getItem","discordNotMember","setDiscordNotMember","discordStatus","setDiscordStatus","oauthInProgress","setOauthInProgress","showAlert","text","icon","arguments","length","undefined","fire","confirmButtonColor","isReturningFromOAuth","savedFormData","savedToken","parsedData","JSON","parse","prev","_objectSpread","e","console","post","inProgress","catch","err","removeItem","activateAndValidate","activateRes","res","data","valid","_partialRes$data","_activateRes$data","partialRes","concat","activatedAt","activatedTime","getTime","elapsed","floor","remaining","max","setTimeout","alert","clearTimeout","message","_err$response","_err$response$data","errorMsg","response","window","recaptchaVerifier","clear","log","warn","container","document","getElementById","innerHTML","setInterval","current","_unused","clearInterval","interval","t","url","notMember","discordUsername","close","countdownInterval","title","html","confirmButtonText","handleVerifyGithub","_info$profile","provider","result","info","githubUsername","githubAvatar","profile","avatar_url","Error","verifiedUrl","setItem","_err$message","_err$message2","code","includes","handleVerifyDiscord","stringify","location","href","handleOrgChange","event","handleChange","name","target","onlyNums","replace","handleRequestOtp","_formData$phone2","phoneNumber","p","Promise","resolve","size","callback","expired-callback","render","renderError","e164Phone","confirmationResult","_err$message3","handleVerifyOtp","confirm","user","getIdToken","handleSubmit","_formData$fullName2","_formData$email2","_formData$organisatio","preventDefault","showCancelButton","isConfirmed","_formData$fullName3","_formData$email3","_formData$organisatio2","_formData$githubUrl","_formData$githubId","_formData$discordId","_formData$linkedinId","cleanedData","Object","keys","forEach","key","delete","_err$response2","_err$response2$data","handleDefer","confirmDefer","_err$response3","_err$response3$data","handleOptOut","reason","_err$response4","_err$response4$data","align","children","sx","minHeight","display","justifyContent","alignItems","bgcolor","width","maxWidth","borderRadius","boxShadow","textAlign","variant","color","fontWeight","gutterBottom","mb","my","mx","mt","border","flex","opacity","transition","spacing","direction","src","alt","style","height","backgroundColor","gap","fontSize","String","padStart","fullWidth","onChange","multiline","rows","placeholder","onClick","disabled","component","onSubmit","margin","required","map","g","disablePortal","options","newValue","renderInput","params","InputProps","readOnly","r","flexDirection","startIcon","open","id","inputProps","inputMode","pattern","maxLength","onKeyPress","test","type"],"sources":["/home/rcts/Email-differ/Frontend/src/pages/Signin-otp/UpdateForm.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { useSearchParams } from \"react-router-dom\";\nimport API, {\n  validateToken,\n  submitForm,\n  deferForm,\n  optOut,\n} from \"../../api/apiService\";\nimport { auth, signInWithPhoneNumber, RecaptchaVerifier } from \"../../firebase\";\nimport {\n  GithubAuthProvider,\n  signInWithPopup,\n  getAdditionalUserInfo,\n  signOut,\n} from \"firebase/auth\";\n\nimport Swal from \"sweetalert2\";\nimport {\n  Box,\n  Paper,\n  Typography,\n  TextField,\n  Button,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  CircularProgress,\n  Stack,\n  Divider,\n  Autocomplete,\n} from \"@mui/material\";\nimport logo1 from \"../../assets/badal_logo.png\";\nimport logo2 from \"../../assets/c4gt_logo.png\";\n\nconst ORGANIZATIONS = [\n  \"Self\",\n  \"Government of India\",\n  \"NITI Aayog\",\n  \"Indian Institute of Technology\",\n  \"Indian Institute of Science\",\n  \"Microsoft India\",\n  \"Google India\",\n  \"TCS\",\n  \"Infosys\",\n  \"Wipro\",\n  \"Other\",\n];\n\nconst ORG_TYPE_MAPPINGS = {\n  \"Government of India\": \"Government\",\n  \"NITI Aayog\": \"Government\",\n  \"Indian Institute of Technology\": \"Academic\",\n  \"Indian Institute of Science\": \"Academic\",\n  \"Microsoft India\": \"Corporate\",\n  \"Google India\": \"Corporate\",\n  TCS: \"Corporate\",\n  Infosys: \"Corporate\",\n  Wipro: \"Corporate\",\n  Self: \"Self\",\n};\n\n// âœ… Role List (matching SignUpPage)\nconst ROLES = [\n  { value: \"R005\", label: \"Mentor\" },\n  { value: \"R004\", label: \"Developer\" },\n];\n\n// âœ… Role codes to backend strings (consistent with SignUpPage)\n// eslint-disable-next-line no-unused-vars\nconst ROLE_MAP = {\n  R004: \"Student\",\n  R005: \"Mentor\",\n};\n\nconst GENDERS = [\"Male\", \"Female\", \"Other\", \"Prefer not to say\"];\n\n// âœ… Validation regex (available for future use)\n// eslint-disable-next-line no-unused-vars\nconst githubRegex = /^https:\\/\\/(www\\.)?github\\.com\\/[A-Za-z0-9_-]+\\/?$/;\n// eslint-disable-next-line no-unused-vars\nconst linkedinRegex = /^https:\\/\\/(www\\.)?linkedin\\.com\\/in\\/[A-Za-z0-9_-]+\\/?$/;\n\nconst DISCORD_REDIRECT = \"http://127.0.0.1:3000/rcts/codeforgovtech/discord-callback\";\nconst DISCORD_INVITE = \"https://discord.gg/BsbzbUHz\";\n\n// âœ… Generate OAuth state for CSRF protection\nconst generateOAuthState = () => {\n  return Math.random().toString(36).substring(2) + Date.now().toString(36);\n};\n\nconst DISCORD_OAUTH = (state) =>\n  \"https://discord.com/oauth2/authorize\" +\n  \"?client_id=1450787791834447874\" +\n  \"&redirect_uri=\" +\n  encodeURIComponent(DISCORD_REDIRECT) +\n  \"&response_type=code\" +\n  \"&scope=identify%20guilds\" +\n  \"&state=\" + encodeURIComponent(state);\n\n// LinkedIn OAuth removed: collecting URL via input field instead\n\nconst UpdateForm = () => {\n  const [searchParams] = useSearchParams();\n  const token = searchParams.get(\"token\");\n\n  const [formData, setFormData] = useState({\n    fullName: \"\",\n    email: \"\",\n    phone: \"\",\n    gender: \"\",\n    organisation: \"\",\n    orgType: \"\",\n    role: \"\",\n    githubId: \"\",\n    githubUrl: \"\",\n    discordId: \"\",\n    linkedinId: \"\",\n  });\n\n  const [phoneVerification, setPhoneVerification] = useState({\n    isVerified: false,\n    showOtpInput: false,\n    otp: \"\",\n    isProcessing: false,\n    firebaseToken: null, // âœ… Store Firebase token for form submission\n  });\n\n  const [status, setStatus] = useState(\"loading\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [interested, setInterested] = useState(null);\n  const [optoutReason, setOptoutReason] = useState(\"\");\n  const [optoutProcessing, setOptoutProcessing] = useState(false);\n  const [timer, setTimer] = useState(0);\n  const isDirtyRef = useRef(false);\n  const [fadeOut, setFadeOut] = useState(false);\n  const [countdown, setCountdown] = useState(5);\n  const [timeRemaining, setTimeRemaining] = useState(600); // 10 minutes in seconds\n  const [showCustomOrg, setShowCustomOrg] = useState(false); // âœ… Add for custom org handling\n  const [isSubmitting, setIsSubmitting] = useState(false); // âœ… Prevent double submit\n  const recaptchaCleanedUp = useRef(false); // âœ… Track recaptcha cleanup\n\n  // Form validation - check if all required fields are filled\n  const isFormComplete = () => {\n    // âœ… Check if submission is in progress\n    if (isSubmitting) return false;\n    \n    // âœ… Handle organisation as string or ensure it exists\n    const orgValue = typeof formData.organisation === 'string' \n      ? formData.organisation.trim() \n      : formData.organisation || \"\";\n    \n    const requiredFieldsFilled = \n      formData.fullName?.trim() !== \"\" &&\n      formData.email?.trim() !== \"\" &&\n      formData.phone?.trim() !== \"\" &&\n      formData.gender !== \"\" &&\n      orgValue !== \"\" &&\n      formData.orgType !== \"\" &&\n      formData.role !== \"\";\n    \n    const socialVerified = githubStatus.verified && discordVerified;\n    const phoneVerified = phoneVerification.isVerified;\n    \n    return requiredFieldsFilled && socialVerified && phoneVerified;\n  };\n\n  // OAuth verification states\n  const [githubStatus, setGithubStatus] = useState({\n    verifying: false,\n    verified: false,\n    username: \"\",\n    avatar: \"\", // âœ… Store avatar URL\n    error: \"\",\n  });\n  const [discordVerified, setDiscordVerified] = useState(\n    sessionStorage.getItem(\"discordVerified\") === \"true\"\n  );\n  const [discordNotMember, setDiscordNotMember] = useState(\n    sessionStorage.getItem(\"discordNotMember\") === \"true\"\n  );\n  const [discordStatus, setDiscordStatus] = useState({\n    verifying: false,\n  });\n  const [oauthInProgress, setOauthInProgress] = useState(false);\n\n  // ðŸ”” SweetAlert helper\n  const showAlert = (text, icon = \"info\") =>\n    Swal.fire({\n      text,\n      icon,\n      confirmButtonColor: \"#1E4DD8\",\n    });\n\n  // âœ… Restore UpdateForm context when returning from OAuth\n  useEffect(() => {\n    const isReturningFromOAuth = sessionStorage.getItem(\"isNavigating\");\n    if (isReturningFromOAuth) {\n      const savedFormData = sessionStorage.getItem(\"updateFormData\");\n      const savedToken = sessionStorage.getItem(\"updateFormToken\");\n      \n      if (savedFormData) {\n        try {\n          const parsedData = JSON.parse(savedFormData);\n          setFormData(prev => ({ ...prev, ...parsedData }));\n        } catch (e) {\n          console.error(\"Failed to restore form data:\", e);\n        }\n      }\n      \n      // Clear OAuth in progress flag on backend\n      if (savedToken) {\n        API.post('/form/oauth-status', { token: savedToken, inProgress: false })\n          .catch(err => console.error(\"Failed to clear OAuth flag:\", err));\n      }\n      \n      sessionStorage.removeItem(\"isNavigating\");\n      sessionStorage.removeItem(\"updateFormData\");\n      sessionStorage.removeItem(\"updateFormToken\");\n      setOauthInProgress(false);\n    }\n  }, []);\n\n  // âœ… Token validation\n  useEffect(() => {\n    const activateAndValidate = async () => {\n      if (!token) {\n        setStatus(\"invalid\");\n        setErrorMessage(\"No token provided\");\n        return;\n      }\n\n      try {\n        // âœ… Activate token and get activatedAt timestamp\n        const activateRes = await API.post(\"/form/activate\", { token });\n        const res = await validateToken(token);\n\n        if (res.data.valid) {\n          setStatus(\"valid\");\n\n          const partialRes = await API.get(`/form/partial/${token}`);\n          if (partialRes.data?.data) {\n            setFormData((prev) => ({ ...prev, ...partialRes.data.data }));\n          }\n\n          // âœ… Calculate time remaining from backend activatedAt timestamp\n          if (activateRes.data?.activatedAt) {\n            const activatedTime = new Date(activateRes.data.activatedAt).getTime();\n            const now = Date.now();\n            const elapsed = Math.floor((now - activatedTime) / 1000); // seconds elapsed\n            const remaining = Math.max(0, 600 - elapsed); // 10 minutes = 600 seconds\n            setTimeRemaining(remaining);\n          }\n\n          // â° Token expires after 7 days (matches backend expiry window)\n          const timer = setTimeout(() => {\n            setStatus(\"expired\");\n            alert(\n              \"This link has expired. Please check your email for a new update link.\"\n            );\n          }, 7 * 24 * 60 * 60 * 1000); // 7 days\n\n          return () => clearTimeout(timer);\n        } else {\n          setStatus(\"invalid\");\n          setErrorMessage(res.data.message || \"Invalid token\");\n        }\n      } catch (err) {\n        const errorMsg = err.response?.data?.message || \"Failed to load form\";\n        \n        // âœ… Check if form was already submitted\n        if (errorMsg === \"Form already submitted\") {\n          setStatus(\"submitted\");\n        } else {\n          setStatus(\"invalid\");\n          setErrorMessage(errorMsg);\n        }\n      }\n    };\n    activateAndValidate();\n  }, [token]);\n\n  // âœ… Clean up reCAPTCHA on component unmount\n  useEffect(() => {\n    return () => {\n      if (window.recaptchaVerifier) {\n        try {\n          window.recaptchaVerifier.clear();\n          console.log(\"reCAPTCHA cleaned up on unmount\");\n        } catch (e) {\n          console.warn('Failed to clear recaptcha on unmount:', e);\n        }\n        window.recaptchaVerifier = null;\n      }\n      \n      const container = document.getElementById(\"recaptcha-container-update\");\n      if (container) {\n        container.innerHTML = \"\";\n      }\n    };\n  }, []);\n\n  // âœ… Auto-save every 5 seconds (only if form data changed)\n  useEffect(() => {\n    if (status !== \"valid\") return;\n    const timer = setInterval(async () => {\n      // âœ… Only save if form data has changed\n      if (!isDirtyRef.current) return;\n      \n      try {\n        await API.post(`/form/save-partial`, { token, data: formData });\n        isDirtyRef.current = false; // âœ… Reset dirty flag after successful save\n      } catch {}\n    }, 5000);\n    return () => clearInterval(timer);\n  }, [formData, status, token]);\n\n  // â± Resend timer\n  useEffect(() => {\n    if (timer > 0) {\n      const interval = setInterval(() => setTimer((t) => t - 1), 1000);\n      return () => clearInterval(interval);\n    }\n  }, [timer]);\n  \n  // Restore GitHub verification from sessionStorage\n  useEffect(() => {\n    const verified = sessionStorage.getItem(\"githubVerified\") === \"true\";\n    const username = sessionStorage.getItem(\"githubUsername\");\n    const url = sessionStorage.getItem(\"githubUrl\");\n\n    if (verified && username && url) {\n      setGithubStatus({\n        verifying: false,\n        verified: true,\n        username,\n        error: \"\",\n      });\n      setFormData(prev => ({ ...prev, githubUrl: url }));\n    }\n  }, []);\n  \n  // Restore Discord verification from sessionStorage\n  useEffect(() => {\n    const verified = sessionStorage.getItem(\"discordVerified\") === \"true\";\n    const notMember = sessionStorage.getItem(\"discordNotMember\") === \"true\";\n\n    setDiscordVerified(verified);\n    setDiscordNotMember(notMember);\n\n    if (verified) {\n      const discordUsername = sessionStorage.getItem(\"discordUsername\");\n      if (discordUsername) {\n        // Use username (display name like \"user#1234\"), not numeric ID\n        setFormData((prev) => ({ ...prev, discordId: discordUsername }));\n      }\n    }\n  }, []);\n  // âœ… Auto-close tab + countdown when deferred\n  useEffect(() => {\n    if (status === \"deferred\") {\n      const interval = setInterval(() => {\n        setCountdown((prev) => {\n          if (prev <= 1) {\n            window.close(); // auto-close after countdown\n            clearInterval(interval);\n            return 0;\n          }\n          return prev - 1;\n        });\n      }, 1000);\n      return () => clearInterval(interval);\n    }\n  }, [status]);\n\n  // Restore GitHub verification from sessionStorage\n  useEffect(() => {\n    const verified = sessionStorage.getItem(\"githubVerified\") === \"true\";\n    const username = sessionStorage.getItem(\"githubUsername\");\n    const url = sessionStorage.getItem(\"githubUrl\");\n\n    if (verified && username && url) {\n      setGithubStatus({\n        verifying: false,\n        verified: true,\n        username,\n        error: \"\",\n      });\n      setFormData(prev => ({ ...prev, githubUrl: url }));\n    }\n  }, []);\n\n  // âœ… 10-minute countdown timer with auto-expiry\n  useEffect(() => {\n    if (status === \"valid\" && timeRemaining > 0) {\n      const countdownInterval = setInterval(() => {\n        setTimeRemaining((prev) => {\n          if (prev <= 1) {\n            clearInterval(countdownInterval);\n            setStatus(\"expired\");\n            Swal.fire({\n              icon: \"warning\",\n              title: \"Token Expired\",\n              html: `\n                <p>Your form session has expired after 10 minutes.</p>\n                <p><strong>What happens next?</strong></p>\n                <ul style=\"text-align: left; margin: 10px 20px;\">\n                  <li>This form will be automatically closed</li>\n                  <li>You will receive a new reminder email within 24 hours</li>\n                  <li>You can complete the form using the new link</li>\n                </ul>\n              `,\n              confirmButtonColor: \"#1E4DD8\",\n              confirmButtonText: \"OK\",\n            });\n            return 0;\n          }\n          return prev - 1;\n        });\n      }, 1000);\n\n      return () => clearInterval(countdownInterval);\n    }\n  }, [status, timeRemaining]);\n\n  // âœ… Verify GitHub\n  const handleVerifyGithub = async () => {\n    setGithubStatus({\n      verifying: true,\n      verified: false,\n      username: \"\",\n      avatar: \"\",\n      error: \"\",\n    });\n\n    try {\n      const provider = new GithubAuthProvider();\n      const result = await signInWithPopup(auth, provider);\n\n      const info = getAdditionalUserInfo(result);\n      const githubUsername = info?.username;\n      const githubAvatar = info?.profile?.avatar_url || \"\";\n\n      if (!githubUsername) throw new Error(\"Unable to retrieve GitHub username\");\n\n      const verifiedUrl = `https://github.com/${githubUsername}`;\n      \n      setFormData(prev => ({ ...prev, githubUrl: verifiedUrl }));\n\n      // âœ… Store in sessionStorage for persistence\n      sessionStorage.setItem(\"githubVerified\", \"true\");\n      sessionStorage.setItem(\"githubUsername\", githubUsername);\n      sessionStorage.setItem(\"githubUrl\", verifiedUrl);\n      sessionStorage.setItem(\"githubAvatar\", githubAvatar);\n\n      setGithubStatus({\n        verifying: false,\n        verified: true,\n        username: githubUsername,\n        avatar: githubAvatar,\n        error: \"\",\n      });\n\n      await signOut(auth);\n      showAlert(\"GitHub verified successfully!\", \"success\");\n    } catch (err) {\n      console.error(\"GitHub verify error:\", err);\n      \n      // âœ… Handle different error types\n      let errorMsg = \"GitHub verification failed. Please try again.\";\n      \n      if (err.code === \"auth/popup-closed-by-user\") {\n        errorMsg = \"Verification cancelled. Please try again.\";\n      } else if (err.code === \"auth/popup-blocked\") {\n        errorMsg = \"Popup was blocked by your browser. Please allow popups for this site and try again.\";\n      } else if (err.code === \"auth/cancelled-popup-request\") {\n        errorMsg = \"Verification cancelled. Please try again.\";\n      } else if (err.message?.includes(\"rate\") || err.message?.includes(\"limit\")) {\n        errorMsg = \"Too many verification attempts. Please wait a few minutes and try again.\";\n      }\n      \n      setGithubStatus({\n        verifying: false,\n        verified: false,\n        username: \"\",\n        avatar: \"\",\n        error: errorMsg,\n      });\n      \n      if (err.code !== \"auth/popup-closed-by-user\") {\n        showAlert(errorMsg, \"error\");\n      }\n    }\n  };\n\n  // âœ… Verify Discord (redirect-based)\n  const handleVerifyDiscord = async () => {\n    try {\n      // âœ… Set verifying state\n      setDiscordStatus({ verifying: true });\n      \n      // âœ… Generate OAuth state for CSRF protection\n      const state = generateOAuthState();\n      sessionStorage.setItem(\"discordOAuthState\", state);\n      \n      // âœ… Clear stale member flag before starting\n      sessionStorage.removeItem(\"discordNotMember\");\n      setDiscordNotMember(false);\n      \n      // Mark OAuth as in progress to extend token expiry\n      await API.post('/form/oauth-status', { token, inProgress: true });\n      \n      // Save form data and token before redirect\n      sessionStorage.setItem(\"updateFormData\", JSON.stringify(formData));\n      sessionStorage.setItem(\"updateFormToken\", token);\n      sessionStorage.setItem(\"oauthReturnPath\", `/update-form?token=${token}`);\n      \n      setOauthInProgress(true);\n      \n      // âœ… Show loading state briefly before redirect\n      showAlert(\"Redirecting to Discord...\", \"info\");\n      \n      // Redirect to Discord OAuth with state\n      setTimeout(() => {\n        window.location.href = DISCORD_OAUTH(state);\n      }, 500);\n    } catch (err) {\n      console.error(\"Failed to mark OAuth in progress:\", err);\n      setOauthInProgress(false); // âœ… Clear flag to allow retry\n      setDiscordStatus({ verifying: false }); // âœ… Reset verifying state\n      showAlert(\"Failed to start Discord verification. Please try again.\", \"error\");\n    }\n  };\n\n  // âœ… Handle organization change (like SignUpPage)\n  const handleOrgChange = (event, value) => {\n    isDirtyRef.current = true;\n    \n    if (!value) {\n      setShowCustomOrg(false);\n      setFormData({ ...formData, organisation: \"\", orgType: \"\" });\n      return;\n    }\n\n    if (value === \"Other\") {\n      setShowCustomOrg(true);\n      setFormData({ ...formData, organisation: \"\", orgType: \"\" });\n    } else {\n      setShowCustomOrg(false);\n      const orgType = ORG_TYPE_MAPPINGS[value] || \"\";\n      setFormData({ ...formData, organisation: value, orgType });\n    }\n  };\n\n  // âœ… Handle changes\n  const handleChange = (e) => {\n    isDirtyRef.current = true;\n    const { name, value } = e.target;\n\n    // âœ… Numeric-only phone input (10 digits)\n    if (name === \"phone\") {\n      const onlyNums = value.replace(/\\D/g, \"\");\n      if (onlyNums.length <= 10) {\n        setFormData({ ...formData, phone: onlyNums });\n        // Reset phone verification when phone changes\n        setPhoneVerification({\n          isVerified: false,\n          showOtpInput: false,\n          otp: \"\",\n          isProcessing: false,\n        });\n        \n        // âœ… Clean up any existing reCAPTCHA when phone changes\n        if (window.recaptchaVerifier) {\n          try {\n            window.recaptchaVerifier.clear();\n          } catch (e) {\n            console.warn('Failed to clear recaptcha on phone change:', e);\n          }\n          window.recaptchaVerifier = null;\n        }\n        const container = document.getElementById(\"recaptcha-container-update\");\n        if (container) {\n          container.innerHTML = \"\";\n        }\n      }\n      return;\n    }\n\n    setFormData({ ...formData, [name]: value });\n  };\n\n  // âœ… Request OTP\n  const handleRequestOtp = async () => {\n    const phoneNumber = formData.phone?.trim();\n    if (!phoneNumber || phoneNumber.length !== 10) {\n      return showAlert(\n        \"Please enter a valid 10-digit phone number.\",\n        \"warning\"\n      );\n    }\n\n    if (timer > 0)\n      return showAlert(`Please wait ${timer}s before resending OTP.`, \"info\");\n\n    setPhoneVerification((p) => ({ ...p, isProcessing: true }));\n\n    try {\n      // âœ… Comprehensive cleanup of any existing reCAPTCHA\n      const container = document.getElementById(\"recaptcha-container-update\");\n      \n      // Clear existing verifier\n      if (window.recaptchaVerifier) {\n        try {\n          await window.recaptchaVerifier.clear();\n          console.log(\"Cleared existing recaptchaVerifier\");\n        } catch (e) {\n          console.warn('Failed to clear existing recaptcha:', e);\n        }\n        window.recaptchaVerifier = null;\n      }\n      \n      // Clear container\n      if (container) {\n        container.innerHTML = \"\";\n      }\n\n      // âœ… Wait longer to ensure Firebase/Google cleanup is complete\n      await new Promise(resolve => setTimeout(resolve, 300));\n\n      // âœ… Create new RecaptchaVerifier\n      window.recaptchaVerifier = new RecaptchaVerifier(\n        auth,\n        \"recaptcha-container-update\",\n        {\n          size: \"invisible\",\n          callback: () => console.log(\"reCAPTCHA solved\"),\n          \"expired-callback\": () => console.warn(\"reCAPTCHA expired\"),\n        }\n      );\n\n      // âœ… Render with error handling\n      try {\n        await window.recaptchaVerifier.render();\n        console.log(\"reCAPTCHA rendered successfully\");\n      } catch (renderError) {\n        console.warn(\"reCAPTCHA render error:\", renderError);\n        \n        // If render fails, do full cleanup and retry once\n        if (window.recaptchaVerifier) {\n          try {\n            await window.recaptchaVerifier.clear();\n          } catch (e) {\n            console.warn('Failed to clear after render error:', e);\n          }\n          window.recaptchaVerifier = null;\n        }\n        \n        if (container) {\n          container.innerHTML = \"\";\n        }\n        \n        // Wait and create a fresh one\n        await new Promise(resolve => setTimeout(resolve, 300));\n        \n        window.recaptchaVerifier = new RecaptchaVerifier(\n          auth,\n          \"recaptcha-container-update\",\n          {\n            size: \"invisible\",\n            callback: () => console.log(\"reCAPTCHA solved\"),\n            \"expired-callback\": () => console.warn(\"reCAPTCHA expired\"),\n          }\n        );\n        \n        await window.recaptchaVerifier.render();\n        console.log(\"reCAPTCHA rendered successfully on retry\");\n      }\n\n      const e164Phone = `+91${phoneNumber}`;\n      const confirmationResult = await signInWithPhoneNumber(\n        auth,\n        e164Phone,\n        window.recaptchaVerifier\n      );\n      window.confirmationResult = confirmationResult;\n\n      showAlert(\"OTP sent successfully to your phone!\", \"success\");\n      setPhoneVerification({\n        showOtpInput: true,\n        isVerified: false,\n        otp: \"\",\n        isProcessing: false,\n      });\n      setTimer(30); // cooldown\n      recaptchaCleanedUp.current = false;\n    } catch (err) {\n      console.error(\"OTP send error:\", err);\n      \n      // âœ… Provide user-friendly error messages\n      let errorMsg = \"Failed to send OTP. Please try again.\";\n      if (err.code === \"auth/too-many-requests\") {\n        errorMsg = \"Too many attempts. Please try again later.\";\n      } else if (err.code === \"auth/invalid-phone-number\") {\n        errorMsg = \"Invalid phone number format.\";\n      } else if (err.message?.includes(\"reCAPTCHA\")) {\n        errorMsg = err.message;\n      }\n      \n      showAlert(errorMsg, \"error\");\n      \n      // âœ… Clean up on error\n      const container = document.getElementById(\"recaptcha-container-update\");\n      if (container) {\n        container.innerHTML = \"\";\n      }\n      \n      if (window.recaptchaVerifier) {\n        try {\n          window.recaptchaVerifier.clear();\n        } catch (e) {\n          console.warn('Failed to clear recaptchaVerifier:', e);\n        }\n        window.recaptchaVerifier = null;\n      }\n      \n      recaptchaCleanedUp.current = true;\n      \n      setPhoneVerification((p) => ({ ...p, isProcessing: false }));\n    }\n  };\n\n  // âœ… Verify OTP\n  const handleVerifyOtp = async () => {\n    if (!phoneVerification.otp.trim() || phoneVerification.otp.length !== 6) {\n      return showAlert(\"Please enter a valid 6-digit OTP.\", \"warning\");\n    }\n\n    setPhoneVerification((p) => ({ ...p, isProcessing: true }));\n\n    try {\n      const result = await window.confirmationResult.confirm(\n        phoneVerification.otp\n      );\n      const user = result.user;\n      const firebaseToken = await user.getIdToken();\n\n      // âœ… Send phone with +91 prefix\n      await API.post(`/form/verify-phone`, {\n        token,\n        phone: formData.phone, // Backend will normalize\n        firebaseToken,\n      });\n\n      showAlert(\"Phone verified successfully!\", \"success\");\n\n      setPhoneVerification({\n        ...phoneVerification,\n        isVerified: true,\n        isProcessing: false,\n        firebaseToken, // âœ… Store token for form submission\n      });\n      \n      // âœ… Clean up recaptcha after successful verification\n      if (window.recaptchaVerifier) {\n        try {\n          await window.recaptchaVerifier.clear();\n          recaptchaCleanedUp.current = true;\n        } catch (e) {\n          console.warn('Failed to clear recaptchaVerifier:', e);\n        }\n        window.recaptchaVerifier = null;\n      }\n    } catch (err) {\n      console.error(\"OTP verification failed:\", err);\n      \n      // âœ… User-friendly error messages\n      let errorMsg = \"Invalid or expired OTP. Please try again.\";\n      if (err.code === \"auth/invalid-verification-code\") {\n        errorMsg = \"Invalid OTP code. Please check and try again.\";\n      } else if (err.code === \"auth/code-expired\") {\n        errorMsg = \"OTP has expired. Please request a new one.\";\n      }\n      \n      showAlert(errorMsg, \"error\");\n      \n      // âœ… Clear verifier to allow retry without invisible reCAPTCHA crashing\n      if (window.recaptchaVerifier) {\n        try {\n          await window.recaptchaVerifier.clear();\n          recaptchaCleanedUp.current = true;\n        } catch (e) {\n          console.warn('Failed to clear recaptchaVerifier:', e);\n        }\n        window.recaptchaVerifier = null;\n      }\n      setPhoneVerification((p) => ({ ...p, isProcessing: false }));\n    }\n  };\n\n  // âœ… Submit\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    // âœ… Prevent double submission\n    if (isSubmitting) {\n      return;\n    }\n\n    // âœ… Detailed validation\n    if (!formData.fullName?.trim()) {\n      return showAlert(\"Please enter your full name.\", \"warning\");\n    }\n    if (!formData.phone || formData.phone.length !== 10) {\n      return showAlert(\"Please enter a valid 10-digit phone number.\", \"warning\");\n    }\n    if (!formData.email?.trim() || !formData.email.includes(\"@\")) {\n      return showAlert(\"Please enter a valid email address.\", \"warning\");\n    }\n    if (!formData.gender) {\n      return showAlert(\"Please select your gender.\", \"warning\");\n    }\n    if (!formData.organisation?.trim()) {\n      return showAlert(\"Please select or enter your organisation.\", \"warning\");\n    }\n    if (!formData.role) {\n      return showAlert(\"Please select your role.\", \"warning\");\n    }\n    if (!githubStatus.verified) {\n      return showAlert(\"Please verify your GitHub account before submitting.\", \"warning\");\n    }\n    if (!discordVerified) {\n      return showAlert(\"Please verify your Discord account before submitting.\", \"warning\");\n    }\n    if (!phoneVerification.isVerified) {\n      return showAlert(\"Please verify your phone number before submitting.\", \"warning\");\n    }\n\n    const confirm = await Swal.fire({\n      title: \"Confirm Submission?\",\n      text: \"Please review your information before submitting.\",\n      icon: \"question\",\n      showCancelButton: true,\n      confirmButtonText: \"Submit\",\n      confirmButtonColor: \"#1E4DD8\",\n    });\n\n    if (!confirm.isConfirmed) return;\n\n    setIsSubmitting(true);\n\n    try {\n      isDirtyRef.current = false;\n      \n      // âœ… Get verified social media data from sessionStorage\n      const githubUsername = sessionStorage.getItem(\"githubUsername\") || \"\";\n      const githubUrl = sessionStorage.getItem(\"githubUrl\") || \"\";\n      const discordId = sessionStorage.getItem(\"discordId\") || \"\";\n      const discordUsername = sessionStorage.getItem(\"discordUsername\") || \"\";\n      \n      const cleanedData = {\n        fullName: formData.fullName?.trim(),\n        email: formData.email?.trim(),\n        phone: formData.phone,\n        gender: formData.gender,\n        organisation: formData.organisation?.trim(),\n        orgType: formData.orgType,\n        role: formData.role,\n        githubUrl: githubUrl || formData.githubUrl?.trim() || null,\n        githubId: githubUsername || formData.githubId?.trim() || null,\n        discordId: discordId || formData.discordId?.trim() || null,\n        linkedinId: formData.linkedinId?.trim() || null,\n        token,\n        firebaseToken: phoneVerification.firebaseToken, // âœ… Include Firebase token\n      };\n      \n      // âœ… Remove null/empty fields\n      Object.keys(cleanedData).forEach(key => {\n        if (cleanedData[key] === null || cleanedData[key] === \"\") {\n          delete cleanedData[key];\n        }\n      });\n      \n      await submitForm(cleanedData);\n      await API.delete(`/form/partial/${token}`);\n      \n      sessionStorage.removeItem(\"updateFormData\");\n      sessionStorage.removeItem(\"updateFormToken\");\n      sessionStorage.removeItem(\"oauthReturnPath\");\n      sessionStorage.removeItem(\"githubVerified\");\n      sessionStorage.removeItem(\"githubUsername\");\n      sessionStorage.removeItem(\"githubUrl\");\n      sessionStorage.removeItem(\"githubAvatar\");\n      sessionStorage.removeItem(\"discordVerified\");\n      sessionStorage.removeItem(\"discordUsername\");\n      sessionStorage.removeItem(\"discordId\");\n      sessionStorage.removeItem(\"discordAvatarUrl\");\n      sessionStorage.removeItem(\"discordNotMember\");\n      sessionStorage.removeItem(\"discordOAuthState\");\n      \n      setStatus(\"submitted\");\n      showAlert(\"Form submitted successfully!\", \"success\");\n    } catch (err) {\n      console.error(\"Submission error:\", err);\n      const errorMessage = err.response?.data?.message || \"Submission failed. Please try again.\";\n      \n      // âœ… If phone conflict error, reset phone verification so user can change number\n      if (errorMessage.includes(\"phone number\") || errorMessage.includes(\"already registered\")) {\n        setPhoneVerification({\n          isVerified: false,\n          showOtpInput: false,\n          otp: \"\",\n          isProcessing: false,\n        });\n        showAlert(\n          \"This phone number is already registered with a different account. Please use a different number or verify with the correct account.\",\n          \"error\"\n        );\n      } else {\n        showAlert(errorMessage, \"error\");\n      }\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // âœ… Defer\n  // âœ… Defer (with confirmation + smooth exit)\n  const handleDefer = async () => {\n    const confirmDefer = window.confirm(\n      \"Are you sure you want to defer filling this form?\\nYouâ€™ll receive a reminder email later.\"\n    );\n    if (!confirmDefer) return; // user chose No â€” stay on form\n\n    try {\n      await deferForm({ token });\n      setFadeOut(true);\n      setTimeout(() => setStatus(\"deferred\"), 600); // fade-out animation time\n    } catch (err) {\n      showAlert(\n        err.response?.data?.message || \"Failed to defer form.\",\n        \"error\"\n      );\n    }\n  };\n\n  // âœ… Opt-out\n  const handleOptOut = async () => {\n    const confirm = await Swal.fire({\n      title: \"Confirm Opt-Out?\",\n      text: \"You wonâ€™t receive future communications.\",\n      icon: \"warning\",\n      showCancelButton: true,\n      confirmButtonText: \"Opt Out\",\n      confirmButtonColor: \"#d33\",\n    });\n\n    if (!confirm.isConfirmed) return;\n\n    setOptoutProcessing(true);\n    try {\n      await optOut({ token, reason: optoutReason });\n      setOptoutProcessing(false);\n      setInterested(\"no\");\n      setStatus(\"deferred\");\n      showAlert(\"You have been opted out successfully.\", \"success\");\n    } catch (err) {\n      setOptoutProcessing(false);\n      showAlert(err.response?.data?.message || \"Failed to opt out.\", \"error\");\n    }\n  };\n\n  // âœ… Conditional Views\n  if (status === \"loading\")\n    return <Typography align=\"center\">Loading form...</Typography>;\n  if (status === \"invalid\")\n    return (\n      <Box\n        sx={{\n          minHeight: \"100vh\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          bgcolor: \"#f8f9fa\",\n          p: 2,\n        }}\n      >\n        <Paper\n          sx={{\n            width: \"100%\",\n            maxWidth: 480,\n            p: 4,\n            borderRadius: 3,\n            boxShadow: 4,\n            textAlign: \"center\",\n          }}\n        >\n          <Typography variant=\"h5\" color=\"error\" fontWeight=\"bold\" gutterBottom>\n            âŒ Invalid or Expired Link\n          </Typography>\n          <Typography variant=\"body1\" sx={{ mb: 2 }}>\n            {errorMessage || \"This link is no longer valid.\"}\n          </Typography>\n          <Divider sx={{ my: 2 }} />\n          <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n            What happened?\n          </Typography>\n          <Box sx={{ textAlign: \"left\", mx: 3, my: 2 }}>\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>\n              ðŸ”— The link may have already been used\n            </Typography>\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>\n              â° The link may have expired (7 days validity)\n            </Typography>\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>\n              âœ… You may have already submitted the form\n            </Typography>\n            <Typography variant=\"body2\">\n              ðŸš« You may have opted out or deferred\n            </Typography>\n          </Box>\n          <Divider sx={{ my: 2 }} />\n          <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n            What to do next?\n          </Typography>\n          <Box sx={{ textAlign: \"left\", mx: 3, my: 2 }}>\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>\n              ðŸ“§ Check your email for the latest update form link\n            </Typography>\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>\n              â³ Wait for the next reminder email (sent automatically)\n            </Typography>\n            <Typography variant=\"body2\">\n              âœ‰ï¸ Contact support if you believe this is an error\n            </Typography>\n          </Box>\n          <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 2, display: \"block\" }}>\n            You can close this window now.\n          </Typography>\n        </Paper>\n      </Box>\n    );\n  if (status === \"expired\")\n    return (\n      <Box\n        sx={{\n          minHeight: \"100vh\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          bgcolor: \"#f8f9fa\",\n          p: 2,\n        }}\n      >\n        <Paper\n          sx={{\n            width: \"100%\",\n            maxWidth: 480,\n            p: 4,\n            borderRadius: 3,\n            boxShadow: 4,\n            textAlign: \"center\",\n          }}\n        >\n          <Typography variant=\"h5\" color=\"warning.main\" fontWeight=\"bold\" gutterBottom>\n            â° Form Expired\n          </Typography>\n          <Typography variant=\"body1\" sx={{ mb: 2 }}>\n            Your 10-minute session has expired.\n          </Typography>\n          <Divider sx={{ my: 2 }} />\n          <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n            What happens next?\n          </Typography>\n          <Box sx={{ textAlign: \"left\", mx: 3, my: 2 }}>\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>\n              âœ‰ï¸ You will receive a new reminder email within 24 hours\n            </Typography>\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>\n              ðŸ”— Use the new link to complete your form\n            </Typography>\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>\n              ðŸ’¾ Your progress has been saved automatically\n            </Typography>\n            <Typography variant=\"body2\">\n              â±ï¸ You'll have another 10 minutes when you return\n            </Typography>\n          </Box>\n          <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 2, display: \"block\" }}>\n            You can close this window now.\n          </Typography>\n        </Paper>\n      </Box>\n    );\n  if (status === \"submitted\")\n    return (\n      <Box\n        sx={{\n          minHeight: \"100vh\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          bgcolor: \"#f8f9fa\",\n          p: 2,\n        }}\n      >\n        <Paper\n          sx={{\n            width: \"100%\",\n            maxWidth: 480,\n            p: 4,\n            borderRadius: 3,\n            boxShadow: 4,\n            textAlign: \"center\",\n          }}\n        >\n          <Typography variant=\"h5\" color=\"success.main\" fontWeight=\"bold\" gutterBottom>\n            âœ… Form Already Submitted\n          </Typography>\n          <Typography variant=\"body1\" sx={{ mb: 2 }}>\n            You have already submitted this form successfully.\n          </Typography>\n          <Divider sx={{ my: 2 }} />\n          <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n            What happened?\n          </Typography>\n          <Box sx={{ textAlign: \"left\", mx: 3, my: 2 }}>\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>\n              âœ… Your form submission was completed successfully\n            </Typography>\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>\n              ðŸ’¾ Your information has been saved in our system\n            </Typography>\n            <Typography variant=\"body2\">\n              ðŸ”’ This link can no longer be used to prevent duplicate submissions\n            </Typography>\n          </Box>\n          <Divider sx={{ my: 2 }} />\n          <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n            What to do next?\n          </Typography>\n          <Box sx={{ textAlign: \"left\", mx: 3, my: 2 }}>\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>\n              ðŸ“§ Check your email for confirmation\n            </Typography>\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>\n              â„¹ï¸ No further action is needed\n            </Typography>\n            <Typography variant=\"body2\">\n              âœ‰ï¸ Contact support if you need to update your information\n            </Typography>\n          </Box>\n          <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 2, display: \"block\" }}>\n            You can close this window now.\n          </Typography>\n        </Paper>\n      </Box>\n    );\n  // âœ… Deferred screen (auto-close + message)\n  if (status === \"deferred\")\n    return (\n      <Box\n        sx={{\n          minHeight: \"100vh\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          bgcolor: \"#f8f9fa\",\n          textAlign: \"center\",\n          p: 3,\n        }}\n      >\n        <Paper\n          sx={{\n            p: 4,\n            borderRadius: 3,\n            border: \"1px solid #ddd\",\n            boxShadow: 3,\n            maxWidth: 480,\n          }}\n        >\n          <Typography variant=\"h5\" color=\"warning.main\" gutterBottom>\n            âš ï¸ Form Deferred\n          </Typography>\n          <Typography variant=\"body1\" sx={{ mb: 1 }}>\n            Youâ€™ve chosen to defer filling this form.\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n            You can complete it later using the reminder email link weâ€™ll send\n            soon.\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            This window will close automatically in <b>{countdown}</b> seconds.\n          </Typography>\n        </Paper>\n      </Box>\n    );\n\n  // âœ… Main Form UI\n  return (\n    <Box\n      sx={{\n        minHeight: \"100vh\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        bgcolor: \"#f8f9fa\",\n        p: 2,\n        flex: 1,\n        width: \"100%\",\n      }}\n    >\n      <Paper\n        sx={{\n          width: \"100%\",\n          maxWidth: 480,\n          p: 4,\n          borderRadius: 3,\n          boxShadow: 4,\n          border: \"1px solid #ddd\",\n          opacity: fadeOut ? 0 : 1,\n          transition: \"opacity 0.6s ease-in-out\",\n        }}\n      >\n        <Stack alignItems=\"center\" spacing={1}>\n          <Stack direction=\"row\" spacing={1} alignItems=\"center\">\n            <img src={logo1} alt=\"Logo1\" style={{ width: 45, height: 45 }} />\n            <img src={logo2} alt=\"Logo2\" style={{ width: 45, height: 45 }} />\n          </Stack>\n          <Typography variant=\"h6\" fontWeight=\"bold\">\n            Update Your Information\n          </Typography>\n          \n          {/* Countdown Timer */}\n          <Box\n            sx={{\n              width: \"100%\",\n              mt: 1,\n              p: 1.5,\n              borderRadius: 2,\n              backgroundColor: timeRemaining <= 120 ? \"#ffebee\" : timeRemaining <= 300 ? \"#fff3e0\" : \"#e3f2fd\",\n              border: `2px solid ${timeRemaining <= 120 ? \"#d32f2f\" : timeRemaining <= 300 ? \"#f57c00\" : \"#1976d2\"}`,\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              gap: 1,\n            }}\n          >\n            <Typography\n              sx={{\n                fontSize: \"1.1rem\",\n                fontWeight: \"bold\",\n                color: timeRemaining <= 120 ? \"#d32f2f\" : timeRemaining <= 300 ? \"#f57c00\" : \"#1976d2\",\n              }}\n            >\n              â±ï¸ Time Remaining: {Math.floor(timeRemaining / 60)}:{String(timeRemaining % 60).padStart(2, \"0\")}\n            </Typography>\n          </Box>\n          <Typography\n            variant=\"caption\"\n            sx={{\n              color: timeRemaining <= 120 ? \"#d32f2f\" : \"text.secondary\",\n              fontWeight: timeRemaining <= 120 ? \"bold\" : \"normal\",\n            }}\n          >\n            {timeRemaining <= 120\n              ? \"âš ï¸ Hurry! Your session will expire soon!\"\n              : \"Complete the form within 10 minutes or it will expire\"}\n          </Typography>\n          \n          <Divider sx={{ width: \"100%\", my: 1 }} />\n        </Stack>\n\n        {/* Opt-in/out */}\n        <FormControl fullWidth size=\"small\" sx={{ mt: 2 }}>\n          <InputLabel>Continue as part of our organization?</InputLabel>\n          <Select\n            value={interested ?? \"\"}\n            label=\"Continue?\"\n            onChange={(e) => setInterested(e.target.value)}\n          >\n            <MenuItem value=\"yes\">Yes, I want to continue</MenuItem>\n            <MenuItem value=\"no\">No, I want to opt out</MenuItem>\n          </Select>\n        </FormControl>\n\n        {interested === \"no\" ? (\n          <Box mt={3}>\n            <Typography variant=\"body2\">\n              We're sorry to see you go. You may share feedback (optional):\n            </Typography>\n            <TextField\n              fullWidth\n              multiline\n              rows={3}\n              placeholder=\"Your reason...\"\n              value={optoutReason}\n              onChange={(e) => setOptoutReason(e.target.value)}\n              sx={{ mt: 1 }}\n            />\n            <Button\n              fullWidth\n              variant=\"contained\"\n              color=\"error\"\n              sx={{ mt: 2, borderRadius: \"20px\" }}\n              onClick={handleOptOut}\n              disabled={optoutProcessing}\n            >\n              {optoutProcessing ? \"Processing...\" : \"Confirm Opt-Out\"}\n            </Button>\n          </Box>\n        ) : (\n          <Box component=\"form\" onSubmit={handleSubmit} mt={2}>\n            {/* Full Name */}\n            <TextField\n              label=\"Full Name *\"\n              fullWidth\n              size=\"small\"\n              margin=\"dense\"\n              name=\"fullName\"\n              value={formData.fullName}\n              onChange={handleChange}\n              required\n            />\n\n            {/* Phone */}\n            <TextField\n              label=\"Phone *\"\n              fullWidth\n              size=\"small\"\n              margin=\"dense\"\n              name=\"phone\"\n              value={formData.phone}\n              onChange={handleChange}\n              disabled={phoneVerification.isVerified}\n              required\n            />\n\n            {/* Email */}\n            <TextField\n              label=\"Email *\"\n              fullWidth\n              size=\"small\"\n              margin=\"dense\"\n              name=\"email\"\n              value={formData.email}\n              onChange={handleChange}\n              required\n            />\n\n            {/* Gender */}\n            <FormControl fullWidth size=\"small\" margin=\"dense\" required>\n              <InputLabel>Gender *</InputLabel>\n              <Select\n                value={formData.gender}\n                label=\"Gender *\"\n                onChange={handleChange}\n                name=\"gender\"\n              >\n                {GENDERS.map((g) => (\n                  <MenuItem key={g} value={g}>\n                    {g}\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n\n            {/* Organisation */}\n            <Autocomplete\n              disablePortal\n              options={ORGANIZATIONS}\n              value={formData.organisation || (showCustomOrg ? \"Other\" : \"\")}\n              onChange={(e, newValue) => handleOrgChange(e, newValue)}\n              renderInput={(params) => (\n                <TextField\n                  {...params}\n                  label=\"Organisation *\"\n                  size=\"small\"\n                  margin=\"dense\"\n                  required\n                />\n              )}\n              sx={{ width: \"100%\" }}\n            />\n\n            {/* Custom Organisation Input (shown when \"Other\" is selected) */}\n            {showCustomOrg && (\n              <TextField\n                label=\"Enter Custom Organisation *\"\n                fullWidth\n                size=\"small\"\n                margin=\"dense\"\n                required\n                value={formData.organisation === \"Other\" ? \"\" : formData.organisation}\n                onChange={(e) => {\n                  isDirtyRef.current = true;\n                  setFormData({\n                    ...formData,\n                    organisation: e.target.value,\n                    orgType: \"\",\n                  });\n                }}\n              />\n            )}\n\n            {/* Organisation Type */}\n            {showCustomOrg ? (\n              <FormControl fullWidth size=\"small\" margin=\"dense\" required>\n                <InputLabel>Organisation Type</InputLabel>\n                <Select\n                  label=\"Organisation Type\"\n                  value={formData.orgType}\n                  onChange={(e) => {\n                    isDirtyRef.current = true;\n                    setFormData({ ...formData, orgType: e.target.value });\n                  }}\n                >\n                  <MenuItem value=\"Government\">Government</MenuItem>\n                  <MenuItem value=\"Corporate\">Corporate</MenuItem>\n                  <MenuItem value=\"Academic\">Academic</MenuItem>\n                  <MenuItem value=\"NGO\">NGO</MenuItem>\n                  <MenuItem value=\"Self\">Self</MenuItem>\n                </Select>\n              </FormControl>\n            ) : (\n              <TextField\n                label=\"Organisation Type\"\n                fullWidth\n                size=\"small\"\n                margin=\"dense\"\n                value={formData.orgType}\n                InputProps={{ readOnly: true }}\n              />\n            )}\n\n            {/* Role */}\n            <FormControl fullWidth size=\"small\" margin=\"dense\" required>\n              <InputLabel>Role *</InputLabel>\n              <Select\n                value={formData.role}\n                label=\"Role *\"\n                name=\"role\"\n                onChange={(e) =>\n                  setFormData({ ...formData, role: e.target.value })\n                }\n              >\n                {ROLES.map((r) => (\n                  <MenuItem key={r.value} value={r.value}>\n                    {r.label}\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n\n            <Typography fontWeight=\"bold\" fontSize={14} mt={2} mb={1}>\n              Social:\n            </Typography>\n\n            {/* GitHub Section */}\n            <Typography fontWeight=\"bold\" fontSize={14} mt={1} mb={1}>\n              GitHub:\n            </Typography>\n            <Box sx={{ display: \"flex\", flexDirection: \"column\", gap: 1, width: \"100%\", mt: 1 }}>\n              <Button\n                fullWidth\n                variant=\"contained\"\n                onClick={handleVerifyGithub}\n                disabled={githubStatus.verified || githubStatus.verifying}\n                sx={{\n                  borderRadius: \"10px\",\n                  fontWeight: \"bold\",\n                  backgroundColor: githubStatus.verified ? \"#4CAF50\" : \"#000\",\n                  color: \"white\",\n                  \"&:disabled\": {\n                    backgroundColor: githubStatus.verified ? \"#4CAF50\" : \"#9e9e9e\",\n                    color: \"white\",\n                  },\n                }}\n              >\n                {githubStatus.verified ? \"GitHub Verified âœ“\" : \"Verify GitHub\"}\n              </Button>\n\n              {githubStatus.verified && (\n                <Typography fontSize={13} color=\"#2e7d32\">\n                  âœ“ Verified as: {githubStatus.username}\n                </Typography>\n              )}\n\n              {!githubStatus.verified && githubStatus.error && (\n                <Typography fontSize={13} color=\"#d32f2f\">\n                  âŒ {githubStatus.error}\n                </Typography>\n              )}\n            </Box>\n\n            {/* Discord Section */}\n            <Typography fontWeight=\"bold\" fontSize={14} mt={2} mb={1}>\n              Discord:\n            </Typography>\n            <Box sx={{ display: \"flex\", flexDirection: \"column\", gap: 1, width: \"100%\", mt: 1 }}>\n              {discordVerified ? (\n                <>\n                  <Button\n                    fullWidth\n                    variant=\"contained\"\n                    disabled\n                    sx={{\n                      borderRadius: \"10px\",\n                      fontWeight: \"bold\",\n                      backgroundColor: \"#4CAF50\",\n                      color: \"white\",\n                      \"&.Mui-disabled\": {\n                        backgroundColor: \"#4CAF50\",\n                        color: \"white\",\n                      },\n                    }}\n                  >\n                    DISCORD VERIFIED âœ“\n                  </Button>\n\n                  <Typography fontSize={13} color=\"#2e7d32\">\n                    âœ“ Verified as: {sessionStorage.getItem(\"discordUsername\")}\n                  </Typography>\n                </>\n              ) : (\n                <>\n                  <Button\n                    fullWidth\n                    variant=\"contained\"\n                    sx={{\n                      borderRadius: \"10px\",\n                      fontWeight: \"bold\",\n                      backgroundColor: \"#1E4DD8\",\n                      \"&:hover\": { backgroundColor: \"#1536A1\" },\n                    }}\n                    onClick={handleVerifyDiscord}\n                    disabled={discordStatus.verifying}\n                    startIcon={discordStatus.verifying ? <CircularProgress size={20} color=\"inherit\" /> : null}\n                  >\n                    {discordStatus.verifying ? \"REDIRECTING...\" : \"VERIFY DISCORD\"}\n                  </Button>\n\n                  {discordNotMember && (\n                    <>\n                      <Button\n                        fullWidth\n                        variant=\"outlined\"\n                        sx={{ borderRadius: \"10px\", fontWeight: \"bold\" }}\n                        onClick={() => window.open(DISCORD_INVITE, \"_blank\")}\n                      >\n                        JOIN DISCORD SERVER\n                      </Button>\n                      <Typography fontSize={13} color=\"#d32f2f\">\n                        âŒ You must join our Discord server before verification.\n                      </Typography>\n                    </>\n                  )}\n                </>\n              )}\n            </Box>\n\n            {/* LinkedIn Section */}\n            <Typography fontWeight=\"bold\" fontSize={14} mt={2} mb={1}>\n              LinkedIn URL (Optional):\n            </Typography>\n            <Box sx={{ display: \"flex\", flexDirection: \"column\", gap: 1, width: \"100%\", mt: 1 }}>\n              <TextField\n                label=\"Enter LinkedIn profile URL\"\n                placeholder=\"https://www.linkedin.com/in/username\"\n                value={formData.linkedinId}\n                onChange={(e) => setFormData({ ...formData, linkedinId: e.target.value })}\n                size=\"small\"\n                fullWidth\n              />\n            </Box>\n\n            {/* OTP Section */}\n            <Box mt={2}>\n              <div id=\"recaptcha-container-update\"></div>\n              {!phoneVerification.isVerified && (\n                <Stack direction=\"row\" spacing={2} mt={1}>\n                  <Button\n                    variant=\"outlined\"\n                    fullWidth\n                    onClick={handleRequestOtp}\n                    disabled={phoneVerification.isProcessing || timer > 0}\n                  >\n                    {timer > 0\n                      ? `Resend in ${timer}s`\n                      : phoneVerification.isProcessing\n                      ? \"Sending...\"\n                      : \"Send OTP\"}\n                  </Button>\n                  {phoneVerification.showOtpInput && (\n                    <TextField\n                      label=\"Enter 6-digit OTP\"\n                      size=\"small\"\n                      value={phoneVerification.otp}\n                      onChange={(e) => {\n                        const onlyNums = e.target.value.replace(/\\D/g, \"\");\n                        if (onlyNums.length <= 6)\n                          setPhoneVerification({\n                            ...phoneVerification,\n                            otp: onlyNums,\n                          });\n                      }}\n                      inputProps={{\n                        inputMode: \"numeric\",\n                        pattern: \"[0-9]*\",\n                        maxLength: 6,\n                        onKeyPress: (e) => {\n                          if (!/[0-9]/.test(e.key)) e.preventDefault();\n                        },\n                      }}\n                    />\n                  )}\n                  {phoneVerification.showOtpInput && (\n                    <Button\n                      variant=\"contained\"\n                      color=\"primary\"\n                      onClick={handleVerifyOtp}\n                      disabled={phoneVerification.isProcessing}\n                    >\n                      {phoneVerification.isProcessing ? (\n                        <CircularProgress size={18} color=\"inherit\" />\n                      ) : (\n                        \"Verify\"\n                      )}\n                    </Button>\n                  )}\n                </Stack>\n              )}\n              {phoneVerification.isVerified && (\n                <Typography color=\"success.main\" mt={1}>\n                  âœ… Phone verified successfully!\n                </Typography>\n              )}\n            </Box>\n\n            {/* Actions */}\n            <Stack direction=\"row\" spacing={2} mt={3}>\n              <Button\n                type=\"submit\"\n                variant=\"contained\"\n                color=\"primary\"\n                fullWidth\n                disabled={!isFormComplete()}\n              >\n                Submit\n              </Button>\n              <Button \n                variant=\"outlined\" \n                fullWidth \n                onClick={handleDefer}\n                disabled={oauthInProgress}\n              >\n                Defer\n              </Button>\n            </Stack>\n          </Box>\n        )}\n      </Paper>\n    </Box>\n  );\n};\n\nexport default UpdateForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}