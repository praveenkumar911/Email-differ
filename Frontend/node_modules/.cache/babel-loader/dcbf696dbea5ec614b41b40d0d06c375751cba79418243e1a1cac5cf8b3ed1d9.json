{"ast":null,"code":"import _defineProperty from \"/home/rcts/Email-differ/Frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { determineTimestampFormat } from \"@smithy/core/protocols\";\nimport { NormalizedSchema } from \"@smithy/core/schema\";\nimport { LazyJsonString, NumericValue, parseEpochTimestamp, parseRfc3339DateTimeWithOffset, parseRfc7231DateTime } from \"@smithy/core/serde\";\nimport { fromBase64 } from \"@smithy/util-base64\";\nimport { SerdeContextConfig } from \"../ConfigurableSerdeContext\";\nimport { deserializingStructIterator } from \"../structIterator\";\nimport { UnionSerde } from \"../UnionSerde\";\nimport { jsonReviver } from \"./jsonReviver\";\nimport { parseJsonBody } from \"./parseJsonBody\";\nexport class JsonShapeDeserializer extends SerdeContextConfig {\n  constructor(settings) {\n    super();\n    _defineProperty(this, \"settings\", void 0);\n    this.settings = settings;\n  }\n  async read(schema, data) {\n    return this._read(schema, typeof data === \"string\" ? JSON.parse(data, jsonReviver) : await parseJsonBody(data, this.serdeContext));\n  }\n  readObject(schema, data) {\n    return this._read(schema, data);\n  }\n  _read(schema, value) {\n    const isObject = value !== null && typeof value === \"object\";\n    const ns = NormalizedSchema.of(schema);\n    if (isObject) {\n      if (ns.isStructSchema()) {\n        const union = ns.isUnionSchema();\n        const out = {};\n        let unionSerde;\n        if (union) {\n          unionSerde = new UnionSerde(value, out);\n        }\n        for (const [memberName, memberSchema] of deserializingStructIterator(ns, value, this.settings.jsonName ? \"jsonName\" : false)) {\n          var _memberSchema$getMerg;\n          const fromKey = this.settings.jsonName ? (_memberSchema$getMerg = memberSchema.getMergedTraits().jsonName) !== null && _memberSchema$getMerg !== void 0 ? _memberSchema$getMerg : memberName : memberName;\n          if (union) {\n            unionSerde.mark(fromKey);\n          }\n          if (value[fromKey] != null) {\n            out[memberName] = this._read(memberSchema, value[fromKey]);\n          }\n        }\n        if (union) {\n          unionSerde.writeUnknown();\n        }\n        return out;\n      }\n      if (Array.isArray(value) && ns.isListSchema()) {\n        const listMember = ns.getValueSchema();\n        const out = [];\n        const sparse = !!ns.getMergedTraits().sparse;\n        for (const item of value) {\n          if (sparse || item != null) {\n            out.push(this._read(listMember, item));\n          }\n        }\n        return out;\n      }\n      if (ns.isMapSchema()) {\n        const mapMember = ns.getValueSchema();\n        const out = {};\n        const sparse = !!ns.getMergedTraits().sparse;\n        for (const [_k, _v] of Object.entries(value)) {\n          if (sparse || _v != null) {\n            out[_k] = this._read(mapMember, _v);\n          }\n        }\n        return out;\n      }\n    }\n    if (ns.isBlobSchema() && typeof value === \"string\") {\n      return fromBase64(value);\n    }\n    const mediaType = ns.getMergedTraits().mediaType;\n    if (ns.isStringSchema() && typeof value === \"string\" && mediaType) {\n      const isJson = mediaType === \"application/json\" || mediaType.endsWith(\"+json\");\n      if (isJson) {\n        return LazyJsonString.from(value);\n      }\n      return value;\n    }\n    if (ns.isTimestampSchema() && value != null) {\n      const format = determineTimestampFormat(ns, this.settings);\n      switch (format) {\n        case 5:\n          return parseRfc3339DateTimeWithOffset(value);\n        case 6:\n          return parseRfc7231DateTime(value);\n        case 7:\n          return parseEpochTimestamp(value);\n        default:\n          console.warn(\"Missing timestamp format, parsing value with Date constructor:\", value);\n          return new Date(value);\n      }\n    }\n    if (ns.isBigIntegerSchema() && (typeof value === \"number\" || typeof value === \"string\")) {\n      return BigInt(value);\n    }\n    if (ns.isBigDecimalSchema() && value != undefined) {\n      if (value instanceof NumericValue) {\n        return value;\n      }\n      const untyped = value;\n      if (untyped.type === \"bigDecimal\" && \"string\" in untyped) {\n        return new NumericValue(untyped.string, untyped.type);\n      }\n      return new NumericValue(String(value), \"bigDecimal\");\n    }\n    if (ns.isNumericSchema() && typeof value === \"string\") {\n      switch (value) {\n        case \"Infinity\":\n          return Infinity;\n        case \"-Infinity\":\n          return -Infinity;\n        case \"NaN\":\n          return NaN;\n      }\n      return value;\n    }\n    if (ns.isDocumentSchema()) {\n      if (isObject) {\n        const out = Array.isArray(value) ? [] : {};\n        for (const [k, v] of Object.entries(value)) {\n          if (v instanceof NumericValue) {\n            out[k] = v;\n          } else {\n            out[k] = this._read(ns, v);\n          }\n        }\n        return out;\n      } else {\n        return structuredClone(value);\n      }\n    }\n    return value;\n  }\n}","map":{"version":3,"names":["determineTimestampFormat","NormalizedSchema","LazyJsonString","NumericValue","parseEpochTimestamp","parseRfc3339DateTimeWithOffset","parseRfc7231DateTime","fromBase64","SerdeContextConfig","deserializingStructIterator","UnionSerde","jsonReviver","parseJsonBody","JsonShapeDeserializer","constructor","settings","_defineProperty","read","schema","data","_read","JSON","parse","serdeContext","readObject","value","isObject","ns","of","isStructSchema","union","isUnionSchema","out","unionSerde","memberName","memberSchema","jsonName","_memberSchema$getMerg","fromKey","getMergedTraits","mark","writeUnknown","Array","isArray","isListSchema","listMember","getValueSchema","sparse","item","push","isMapSchema","mapMember","_k","_v","Object","entries","isBlobSchema","mediaType","isStringSchema","isJson","endsWith","from","isTimestampSchema","format","console","warn","Date","isBigIntegerSchema","BigInt","isBigDecimalSchema","undefined","untyped","type","string","String","isNumericSchema","Infinity","NaN","isDocumentSchema","k","v","structuredClone"],"sources":["/home/rcts/Email-differ/Frontend/node_modules/@aws-sdk/core/dist-es/submodules/protocols/json/JsonShapeDeserializer.js"],"sourcesContent":["import { determineTimestampFormat } from \"@smithy/core/protocols\";\nimport { NormalizedSchema } from \"@smithy/core/schema\";\nimport { LazyJsonString, NumericValue, parseEpochTimestamp, parseRfc3339DateTimeWithOffset, parseRfc7231DateTime, } from \"@smithy/core/serde\";\nimport { fromBase64 } from \"@smithy/util-base64\";\nimport { SerdeContextConfig } from \"../ConfigurableSerdeContext\";\nimport { deserializingStructIterator } from \"../structIterator\";\nimport { UnionSerde } from \"../UnionSerde\";\nimport { jsonReviver } from \"./jsonReviver\";\nimport { parseJsonBody } from \"./parseJsonBody\";\nexport class JsonShapeDeserializer extends SerdeContextConfig {\n    settings;\n    constructor(settings) {\n        super();\n        this.settings = settings;\n    }\n    async read(schema, data) {\n        return this._read(schema, typeof data === \"string\" ? JSON.parse(data, jsonReviver) : await parseJsonBody(data, this.serdeContext));\n    }\n    readObject(schema, data) {\n        return this._read(schema, data);\n    }\n    _read(schema, value) {\n        const isObject = value !== null && typeof value === \"object\";\n        const ns = NormalizedSchema.of(schema);\n        if (isObject) {\n            if (ns.isStructSchema()) {\n                const union = ns.isUnionSchema();\n                const out = {};\n                let unionSerde;\n                if (union) {\n                    unionSerde = new UnionSerde(value, out);\n                }\n                for (const [memberName, memberSchema] of deserializingStructIterator(ns, value, this.settings.jsonName ? \"jsonName\" : false)) {\n                    const fromKey = this.settings.jsonName ? memberSchema.getMergedTraits().jsonName ?? memberName : memberName;\n                    if (union) {\n                        unionSerde.mark(fromKey);\n                    }\n                    if (value[fromKey] != null) {\n                        out[memberName] = this._read(memberSchema, value[fromKey]);\n                    }\n                }\n                if (union) {\n                    unionSerde.writeUnknown();\n                }\n                return out;\n            }\n            if (Array.isArray(value) && ns.isListSchema()) {\n                const listMember = ns.getValueSchema();\n                const out = [];\n                const sparse = !!ns.getMergedTraits().sparse;\n                for (const item of value) {\n                    if (sparse || item != null) {\n                        out.push(this._read(listMember, item));\n                    }\n                }\n                return out;\n            }\n            if (ns.isMapSchema()) {\n                const mapMember = ns.getValueSchema();\n                const out = {};\n                const sparse = !!ns.getMergedTraits().sparse;\n                for (const [_k, _v] of Object.entries(value)) {\n                    if (sparse || _v != null) {\n                        out[_k] = this._read(mapMember, _v);\n                    }\n                }\n                return out;\n            }\n        }\n        if (ns.isBlobSchema() && typeof value === \"string\") {\n            return fromBase64(value);\n        }\n        const mediaType = ns.getMergedTraits().mediaType;\n        if (ns.isStringSchema() && typeof value === \"string\" && mediaType) {\n            const isJson = mediaType === \"application/json\" || mediaType.endsWith(\"+json\");\n            if (isJson) {\n                return LazyJsonString.from(value);\n            }\n            return value;\n        }\n        if (ns.isTimestampSchema() && value != null) {\n            const format = determineTimestampFormat(ns, this.settings);\n            switch (format) {\n                case 5:\n                    return parseRfc3339DateTimeWithOffset(value);\n                case 6:\n                    return parseRfc7231DateTime(value);\n                case 7:\n                    return parseEpochTimestamp(value);\n                default:\n                    console.warn(\"Missing timestamp format, parsing value with Date constructor:\", value);\n                    return new Date(value);\n            }\n        }\n        if (ns.isBigIntegerSchema() && (typeof value === \"number\" || typeof value === \"string\")) {\n            return BigInt(value);\n        }\n        if (ns.isBigDecimalSchema() && value != undefined) {\n            if (value instanceof NumericValue) {\n                return value;\n            }\n            const untyped = value;\n            if (untyped.type === \"bigDecimal\" && \"string\" in untyped) {\n                return new NumericValue(untyped.string, untyped.type);\n            }\n            return new NumericValue(String(value), \"bigDecimal\");\n        }\n        if (ns.isNumericSchema() && typeof value === \"string\") {\n            switch (value) {\n                case \"Infinity\":\n                    return Infinity;\n                case \"-Infinity\":\n                    return -Infinity;\n                case \"NaN\":\n                    return NaN;\n            }\n            return value;\n        }\n        if (ns.isDocumentSchema()) {\n            if (isObject) {\n                const out = Array.isArray(value) ? [] : {};\n                for (const [k, v] of Object.entries(value)) {\n                    if (v instanceof NumericValue) {\n                        out[k] = v;\n                    }\n                    else {\n                        out[k] = this._read(ns, v);\n                    }\n                }\n                return out;\n            }\n            else {\n                return structuredClone(value);\n            }\n        }\n        return value;\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}