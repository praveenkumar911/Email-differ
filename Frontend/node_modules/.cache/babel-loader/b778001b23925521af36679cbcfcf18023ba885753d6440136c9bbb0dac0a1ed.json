{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/rcts/Email-differ/Frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2;// src/pages/Auth/LoginOtpVerification.jsx\nimport React,{useState,useEffect}from\"react\";import{useLocation,useNavigate}from\"react-router-dom\";import{verifyLoginOtp}from\"../../api/apiService\";import{Box,Paper,Typography,TextField,Button,CircularProgress,IconButton,Stack,Fade,Alert}from\"@mui/material\";import{keyframes}from\"@mui/system\";import ArrowBackIcon from\"@mui/icons-material/ArrowBack\";import Swal from\"sweetalert2\";import{auth,signInWithPhoneNumber}from\"../../firebase\";import{PhoneAuthProvider,signInWithCredential}from\"firebase/auth\";import{setupRecaptcha}from\"../../utils/setupRecaptcha\";import{useAuth}from\"../../context/AuthContext\";// Animations\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const shake=keyframes(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  0% { transform: translateX(0); }\\n  15% { transform: translateX(-4px); }\\n  30% { transform: translateX(4px); }\\n  45% { transform: translateX(-3px); }\\n  60% { transform: translateX(3px); }\\n  75% { transform: translateX(-2px); }\\n  90% { transform: translateX(2px); }\\n  100% { transform: translateX(0); }\\n\"])));const fadeError=keyframes(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  from { opacity: 0; transform: translateY(-4px); }\\n  to { opacity: 1; transform: translateY(0); }\\n\"])));const LoginOtpVerification=()=>{var _location$state;const[otp,setOtp]=useState(\"\");const[loading,setLoading]=useState(false);const[resending,setResending]=useState(false);const[timer,setTimer]=useState(0);const[errorBanner,setErrorBanner]=useState(\"\");const[shakeOtp,setShakeOtp]=useState(false);const location=useLocation();const navigate=useNavigate();const{setUser}=useAuth();// Restore phone\nlet phone=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.phone;if(!phone){try{const saved=JSON.parse(sessionStorage.getItem(\"loginConfirmationResult\"));phone=saved===null||saved===void 0?void 0:saved.phone;}catch(_unused){}}// Before Unload Warning\nuseEffect(()=>{const handler=e=>{e.returnValue=\"Refreshing will clear OTP verification progress.\";};window.addEventListener(\"beforeunload\",handler);return()=>window.removeEventListener(\"beforeunload\",handler);},[]);// Timer Countdown\nuseEffect(()=>{if(timer>0){const intv=setInterval(()=>setTimer(t=>t-1),1000);return()=>clearInterval(intv);}},[timer]);const triggerOtpError=msg=>{setErrorBanner(msg);setShakeOtp(true);setTimeout(()=>setShakeOtp(false),500);};const handleVerify=async()=>{if(otp.trim().length!==6){Swal.fire({icon:\"warning\",title:\"Invalid OTP\",text:\"Please enter a valid 6-digit OTP.\"});triggerOtpError(\"Please enter a valid 6-digit OTP.\");return;}setLoading(true);setErrorBanner(\"\");try{const storedData=JSON.parse(sessionStorage.getItem(\"loginConfirmationResult\"));if(!storedData){Swal.fire({icon:\"info\",title:\"Session Expired\",text:\"Your OTP session has expired. Please sign in again.\"});return navigate(\"/signin\");}const credential=PhoneAuthProvider.credential(storedData.verificationId,otp.trim());const userCredential=await signInWithCredential(auth,credential);const firebaseToken=await userCredential.user.getIdToken();const payload={firebaseToken,phoneNumber:phone.startsWith(\"+91\")?phone:\"+91\".concat(phone)};const response=await verifyLoginOtp(payload);const appUser=response.user||response;setUser({token:response.token,userId:appUser.userId||appUser.id||appUser._id,roleId:appUser.roleId,orgId:appUser.orgId,permissions:appUser.permissions,phone});sessionStorage.removeItem(\"loginConfirmationResult\");Swal.fire({icon:\"success\",title:\"Login Successful\",timer:1500,showConfirmButton:false});navigate(\"/home\",{replace:true});}catch(err){console.error(\"OTP verification error:\",err);let message=\"OTP verification failed. Please try again.\";// Friendly error mapping\nconst code=(err===null||err===void 0?void 0:err.code)||(err===null||err===void 0?void 0:err.message)||\"\";if(code.includes(\"invalid-verification-code\")){message=\"The OTP you entered is incorrect. Please check and try again.\";}else if(code.includes(\"missing-verification-code\")){message=\"Please enter the OTP before verifying.\";}else if(code.includes(\"session-expired\")){message=\"The OTP has expired. Please request a new one.\";}else if(code.includes(\"too-many-requests\")){message=\"Too many attempts. Please wait a moment before retrying.\";}else if(code.includes(\"network-request-failed\")){message=\"Network error. Check your internet connection and try again.\";}else if(code.includes(\"invalid-phone-number\")){message=\"Phone number invalid. Try again.\";}else if(code.includes(\"quota-exceeded\")){message=\"Too many OTP requests. Please try again later.\";}Swal.fire({icon:\"error\",title:\"OTP Verification Failed\",text:message,confirmButtonColor:\"#1E4DD8\"});triggerOtpError(message);}setLoading(false);};const handleResendOtp=async()=>{if(resending||timer>0)return;setResending(true);setErrorBanner(\"\");try{// Clear existing recaptcha verifier if any\nif(window.recaptchaVerifier){var _window$recaptchaVeri,_window$recaptchaVeri2;(_window$recaptchaVeri=(_window$recaptchaVeri2=window.recaptchaVerifier).clear)===null||_window$recaptchaVeri===void 0?void 0:_window$recaptchaVeri.call(_window$recaptchaVeri2);window.recaptchaVerifier=null;}await setupRecaptcha(auth,\"recaptcha-container-login-otp\");const confirmation=await signInWithPhoneNumber(auth,phone,window.recaptchaVerifier);sessionStorage.setItem(\"loginConfirmationResult\",JSON.stringify({verificationId:confirmation.verificationId,phone}));Swal.fire({icon:\"success\",title:\"OTP Resent!\",text:\"OTP sent to \".concat(phone)});setTimer(30);}catch(err){console.error(\"Resend OTP error:\",err);Swal.fire({icon:\"error\",title:\"Failed\",text:\"Could not resend OTP. Please try again.\"});triggerOtpError(\"Could not resend OTP. Please try again.\");}finally{setResending(false);}};return/*#__PURE__*/_jsx(Box,{sx:{minHeight:\"100vh\",width:\"100%\",background:\"linear-gradient(135deg, #1e3c72, #2a5298)\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",py:4,px:2},children:/*#__PURE__*/_jsx(Box,{sx:{width:\"100%\",maxWidth:1400,display:\"flex\",alignItems:\"center\",flexDirection:\"column\"},children:/*#__PURE__*/_jsx(Fade,{in:true,timeout:500,children:/*#__PURE__*/_jsxs(Paper,{elevation:8,sx:{width:\"100%\",maxWidth:420,p:3,pb:2,borderRadius:4,textAlign:\"center\",background:\"rgba(255,255,255,0.96)\",position:\"relative\",overflow:\"hidden\"},children:[/*#__PURE__*/_jsx(Box,{sx:{position:\"absolute\",top:0,left:0,right:0,height:4,background:\"linear-gradient(90deg, #1E4DD8, #22c55e, #1E4DD8)\"}}),/*#__PURE__*/_jsx(IconButton,{onClick:()=>navigate(\"/signin\"),sx:{position:\"absolute\",top:16,left:16,bgcolor:\"#f1f1f1\",\"&:hover\":{bgcolor:\"#e0e0e0\"},zIndex:2},children:/*#__PURE__*/_jsx(ArrowBackIcon,{})}),errorBanner&&/*#__PURE__*/_jsx(Box,{sx:{mb:2,animation:\"\".concat(fadeError,\" 0.25s ease-out\")},children:/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{borderRadius:2,fontSize:13,py:0.75},children:errorBanner})}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",fontWeight:800,color:\"#1E4DD8\",mb:1,children:\"Verify OTP\"}),/*#__PURE__*/_jsxs(Typography,{sx:{mb:3},children:[\"Enter the 6-digit OTP sent to\",/*#__PURE__*/_jsxs(\"strong\",{children:[\" \",phone]})]}),/*#__PURE__*/_jsx(Box,{sx:{mb:3,animation:shakeOtp?\"\".concat(shake,\" 0.4s ease-in-out\"):\"none\"},children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,placeholder:\"123456\",value:otp,onChange:e=>setOtp(e.target.value.replace(/\\D/g,\"\").slice(0,6)),inputProps:{maxLength:6,style:{textAlign:\"center\",letterSpacing:\"6px\",fontSize:\"20px\",fontWeight:700}}})}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",disabled:loading,onClick:handleVerify,sx:{py:1.5,borderRadius:3,bgcolor:\"#1E4DD8\",\"&:hover\":{bgcolor:\"#1536A1\"},color:\"white\",fontWeight:600,textTransform:\"none\",boxShadow:\"0 8px 18px rgba(30,77,216,0.35)\"},children:loading?/*#__PURE__*/_jsx(CircularProgress,{size:24,sx:{color:\"white\"}}):\"Verify OTP\"}),/*#__PURE__*/_jsx(Button,{fullWidth:true,sx:{mt:2,borderRadius:3,color:\"#1E4DD8\",fontWeight:700,textTransform:\"none\",opacity:resending||timer>0?0.7:1},disabled:resending||timer>0,onClick:handleResendOtp,children:resending?\"Resending...\":timer>0?\"Resend OTP in \".concat(timer,\"s\"):\"Resend OTP\"}),/*#__PURE__*/_jsx(Box,{id:\"recaptcha-container-login-otp\",sx:{mt:1}})]})})})});};export default LoginOtpVerification;","map":{"version":3,"names":["React","useState","useEffect","useLocation","useNavigate","verifyLoginOtp","Box","Paper","Typography","TextField","Button","CircularProgress","IconButton","Stack","Fade","Alert","keyframes","ArrowBackIcon","Swal","auth","signInWithPhoneNumber","PhoneAuthProvider","signInWithCredential","setupRecaptcha","useAuth","jsx","_jsx","jsxs","_jsxs","shake","_templateObject","_taggedTemplateLiteral","fadeError","_templateObject2","LoginOtpVerification","_location$state","otp","setOtp","loading","setLoading","resending","setResending","timer","setTimer","errorBanner","setErrorBanner","shakeOtp","setShakeOtp","location","navigate","setUser","phone","state","saved","JSON","parse","sessionStorage","getItem","_unused","handler","e","returnValue","window","addEventListener","removeEventListener","intv","setInterval","t","clearInterval","triggerOtpError","msg","setTimeout","handleVerify","trim","length","fire","icon","title","text","storedData","credential","verificationId","userCredential","firebaseToken","user","getIdToken","payload","phoneNumber","startsWith","concat","response","appUser","token","userId","id","_id","roleId","orgId","permissions","removeItem","showConfirmButton","replace","err","console","error","message","code","includes","confirmButtonColor","handleResendOtp","recaptchaVerifier","_window$recaptchaVeri","_window$recaptchaVeri2","clear","call","confirmation","setItem","stringify","sx","minHeight","width","background","display","justifyContent","alignItems","py","px","children","maxWidth","flexDirection","in","timeout","elevation","p","pb","borderRadius","textAlign","position","overflow","top","left","right","height","onClick","bgcolor","zIndex","mb","animation","severity","fontSize","variant","fontWeight","color","fullWidth","placeholder","value","onChange","target","slice","inputProps","maxLength","style","letterSpacing","disabled","textTransform","boxShadow","size","mt","opacity"],"sources":["/home/rcts/Email-differ/Frontend/src/pages/Signin-otp/LoginOtpVerification.jsx"],"sourcesContent":["// src/pages/Auth/LoginOtpVerification.jsx\n\nimport React, { useState, useEffect } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { verifyLoginOtp } from \"../../api/apiService\";\n\nimport {\n  Box,\n  Paper,\n  Typography,\n  TextField,\n  Button,\n  CircularProgress,\n  IconButton,\n  Stack,\n  Fade,\n  Alert,\n} from \"@mui/material\";\n\nimport { keyframes } from \"@mui/system\";\n\nimport ArrowBackIcon from \"@mui/icons-material/ArrowBack\";\nimport Swal from \"sweetalert2\";\nimport { auth, signInWithPhoneNumber } from \"../../firebase\";\nimport { PhoneAuthProvider, signInWithCredential } from \"firebase/auth\";\nimport { setupRecaptcha } from \"../../utils/setupRecaptcha\";\n\nimport { useAuth } from \"../../context/AuthContext\";\n\n// Animations\nconst shake = keyframes`\n  0% { transform: translateX(0); }\n  15% { transform: translateX(-4px); }\n  30% { transform: translateX(4px); }\n  45% { transform: translateX(-3px); }\n  60% { transform: translateX(3px); }\n  75% { transform: translateX(-2px); }\n  90% { transform: translateX(2px); }\n  100% { transform: translateX(0); }\n`;\n\nconst fadeError = keyframes`\n  from { opacity: 0; transform: translateY(-4px); }\n  to { opacity: 1; transform: translateY(0); }\n`;\n\nconst LoginOtpVerification = () => {\n  const [otp, setOtp] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [resending, setResending] = useState(false);\n  const [timer, setTimer] = useState(0);\n  const [errorBanner, setErrorBanner] = useState(\"\");\n  const [shakeOtp, setShakeOtp] = useState(false);\n\n  const location = useLocation();\n  const navigate = useNavigate();\n  const { setUser } = useAuth();\n\n  // Restore phone\n  let phone = location.state?.phone;\n  if (!phone) {\n    try {\n      const saved = JSON.parse(\n        sessionStorage.getItem(\"loginConfirmationResult\")\n      );\n      phone = saved?.phone;\n    } catch {}\n  }\n\n  // Before Unload Warning\n  useEffect(() => {\n    const handler = (e) => {\n      e.returnValue = \"Refreshing will clear OTP verification progress.\";\n    };\n    window.addEventListener(\"beforeunload\", handler);\n    return () => window.removeEventListener(\"beforeunload\", handler);\n  }, []);\n\n  // Timer Countdown\n  useEffect(() => {\n    if (timer > 0) {\n      const intv = setInterval(() => setTimer((t) => t - 1), 1000);\n      return () => clearInterval(intv);\n    }\n  }, [timer]);\n\n  const triggerOtpError = (msg) => {\n    setErrorBanner(msg);\n    setShakeOtp(true);\n    setTimeout(() => setShakeOtp(false), 500);\n  };\n\n  const handleVerify = async () => {\n    if (otp.trim().length !== 6) {\n      Swal.fire({\n        icon: \"warning\",\n        title: \"Invalid OTP\",\n        text: \"Please enter a valid 6-digit OTP.\",\n      });\n      triggerOtpError(\"Please enter a valid 6-digit OTP.\");\n      return;\n    }\n\n    setLoading(true);\n    setErrorBanner(\"\");\n\n    try {\n      const storedData = JSON.parse(\n        sessionStorage.getItem(\"loginConfirmationResult\")\n      );\n\n      if (!storedData) {\n        Swal.fire({\n          icon: \"info\",\n          title: \"Session Expired\",\n          text: \"Your OTP session has expired. Please sign in again.\",\n        });\n        return navigate(\"/signin\");\n      }\n\n      const credential = PhoneAuthProvider.credential(\n        storedData.verificationId,\n        otp.trim()\n      );\n\n      const userCredential = await signInWithCredential(auth, credential);\n      const firebaseToken = await userCredential.user.getIdToken();\n\n      const payload = {\n        firebaseToken,\n        phoneNumber: phone.startsWith(\"+91\") ? phone : `+91${phone}`,\n      };\n\n      const response = await verifyLoginOtp(payload);\n      const appUser = response.user || response;\n\n      setUser({\n        token: response.token,\n        userId: appUser.userId || appUser.id || appUser._id,\n        roleId: appUser.roleId,\n        orgId: appUser.orgId,\n        permissions: appUser.permissions,\n        phone,\n      });\n\n      sessionStorage.removeItem(\"loginConfirmationResult\");\n\n      Swal.fire({\n        icon: \"success\",\n        title: \"Login Successful\",\n        timer: 1500,\n        showConfirmButton: false,\n      });\n\n      navigate(\"/home\", { replace: true });\n    } catch (err) {\n      console.error(\"OTP verification error:\", err);\n\n      let message = \"OTP verification failed. Please try again.\";\n\n      // Friendly error mapping\n      const code = err?.code || err?.message || \"\";\n\n      if (code.includes(\"invalid-verification-code\")) {\n        message = \"The OTP you entered is incorrect. Please check and try again.\";\n      }\n      else if (code.includes(\"missing-verification-code\")) {\n        message = \"Please enter the OTP before verifying.\";\n      }\n      else if (code.includes(\"session-expired\")) {\n        message = \"The OTP has expired. Please request a new one.\";\n      }\n      else if (code.includes(\"too-many-requests\")) {\n        message = \"Too many attempts. Please wait a moment before retrying.\";\n      }\n      else if (code.includes(\"network-request-failed\")) {\n        message = \"Network error. Check your internet connection and try again.\";\n      }\n      else if (code.includes(\"invalid-phone-number\")) {\n        message = \"Phone number invalid. Try again.\";\n      }\n      else if (code.includes(\"quota-exceeded\")) {\n        message = \"Too many OTP requests. Please try again later.\";\n      }\n\n      Swal.fire({\n        icon: \"error\",\n        title: \"OTP Verification Failed\",\n        text: message,\n        confirmButtonColor: \"#1E4DD8\",\n      });\n\n      triggerOtpError(message);\n    }\n\n    setLoading(false);\n  };\n\n  const handleResendOtp = async () => {\n    if (resending || timer > 0) return;\n\n    setResending(true);\n    setErrorBanner(\"\");\n\n    try {\n      // Clear existing recaptcha verifier if any\n      if (window.recaptchaVerifier) {\n        window.recaptchaVerifier.clear?.();\n        window.recaptchaVerifier = null;\n      }\n\n      await setupRecaptcha(auth, \"recaptcha-container-login-otp\");\n\n      const confirmation = await signInWithPhoneNumber(\n        auth,\n        phone,\n        window.recaptchaVerifier\n      );\n\n      sessionStorage.setItem(\n        \"loginConfirmationResult\",\n        JSON.stringify({\n          verificationId: confirmation.verificationId,\n          phone,\n        })\n      );\n\n      Swal.fire({\n        icon: \"success\",\n        title: \"OTP Resent!\",\n        text: `OTP sent to ${phone}`,\n      });\n\n      setTimer(30);\n    } catch (err) {\n      console.error(\"Resend OTP error:\", err);\n      Swal.fire({\n        icon: \"error\",\n        title: \"Failed\",\n        text: \"Could not resend OTP. Please try again.\",\n      });\n      triggerOtpError(\"Could not resend OTP. Please try again.\");\n    } finally {\n      setResending(false);\n    }\n  };\n\n  return (\n    <Box\n      sx={{\n        minHeight: \"100vh\",\n        width: \"100%\",\n        background: \"linear-gradient(135deg, #1e3c72, #2a5298)\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        py: 4,\n        px: 2,\n      }}\n    >\n      {/* WRAPPER - Matches Sign In UI */}\n      <Box\n        sx={{\n          width: \"100%\",\n          maxWidth: 1400,\n          display: \"flex\",\n          alignItems: \"center\",\n          flexDirection: \"column\",\n        }}\n      >\n        {/* CENTERED CARD */}\n        <Fade in timeout={500}>\n          <Paper\n            elevation={8}\n            sx={{\n              width: \"100%\",\n              maxWidth: 420,\n              p: 3,\n              pb: 2,\n              borderRadius: 4,\n              textAlign: \"center\",\n              background: \"rgba(255,255,255,0.96)\",\n              position: \"relative\",\n              overflow: \"hidden\",\n            }}\n          >\n            {/* Top gradient border */}\n            <Box\n              sx={{\n                position: \"absolute\",\n                top: 0,\n                left: 0,\n                right: 0,\n                height: 4,\n                background:\n                  \"linear-gradient(90deg, #1E4DD8, #22c55e, #1E4DD8)\",\n              }}\n            />\n\n            {/* BACK BUTTON */}\n            <IconButton\n              onClick={() => navigate(\"/signin\")}\n              sx={{\n                position: \"absolute\",\n                top: 16,\n                left: 16,\n                bgcolor: \"#f1f1f1\",\n                \"&:hover\": { bgcolor: \"#e0e0e0\" },\n                zIndex: 2,\n              }}\n            >\n              <ArrowBackIcon />\n            </IconButton>\n\n            \n            {errorBanner && (\n              <Box\n                sx={{\n                  mb: 2,\n                  animation: `${fadeError} 0.25s ease-out`,\n                }}\n              >\n                <Alert\n                  severity=\"error\"\n                  sx={{\n                    borderRadius: 2,\n                    fontSize: 13,\n                    py: 0.75,\n                  }}\n                >\n                  {errorBanner}\n                </Alert>\n              </Box>\n            )}\n\n            <Typography variant=\"h4\" fontWeight={800} color=\"#1E4DD8\" mb={1}>\n              Verify OTP\n            </Typography>\n\n            <Typography sx={{ mb: 3 }}>\n              Enter the 6-digit OTP sent to\n              <strong> {phone}</strong>\n            </Typography>\n\n            {/* OTP INPUT */}\n            <Box\n              sx={{\n                mb: 3,\n                animation: shakeOtp ? `${shake} 0.4s ease-in-out` : \"none\",\n              }}\n            >\n              <TextField\n                fullWidth\n                placeholder=\"123456\"\n                value={otp}\n                onChange={(e) =>\n                  setOtp(e.target.value.replace(/\\D/g, \"\").slice(0, 6))\n                }\n                inputProps={{\n                  maxLength: 6,\n                  style: {\n                    textAlign: \"center\",\n                    letterSpacing: \"6px\",\n                    fontSize: \"20px\",\n                    fontWeight: 700,\n                  },\n                }}\n              />\n            </Box>\n\n            {/* VERIFY BUTTON */}\n            <Button\n              fullWidth\n              variant=\"contained\"\n              disabled={loading}\n              onClick={handleVerify}\n              sx={{\n                py: 1.5,\n                borderRadius: 3,\n                bgcolor: \"#1E4DD8\",\n                \"&:hover\": { bgcolor: \"#1536A1\" },\n                color: \"white\",\n                fontWeight: 600,\n                textTransform: \"none\",\n                boxShadow: \"0 8px 18px rgba(30,77,216,0.35)\",\n              }}\n            >\n              {loading ? (\n                <CircularProgress size={24} sx={{ color: \"white\" }} />\n              ) : (\n                \"Verify OTP\"\n              )}\n            </Button>\n\n            {/* RESEND OTP */}\n            <Button\n              fullWidth\n              sx={{\n                mt: 2,\n                borderRadius: 3,\n                color: \"#1E4DD8\",\n                fontWeight: 700,\n                textTransform: \"none\",\n                opacity: resending || timer > 0 ? 0.7 : 1,\n              }}\n              disabled={resending || timer > 0}\n              onClick={handleResendOtp}\n            >\n              {resending\n                ? \"Resending...\"\n                : timer > 0\n                ? `Resend OTP in ${timer}s`\n                : \"Resend OTP\"}\n            </Button>\n\n            <Box\n              id=\"recaptcha-container-login-otp\"\n              sx={{ mt: 1 }}\n            />\n          </Paper>\n        </Fade>\n      </Box>\n    </Box>\n  );\n};\n\nexport default LoginOtpVerification;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}