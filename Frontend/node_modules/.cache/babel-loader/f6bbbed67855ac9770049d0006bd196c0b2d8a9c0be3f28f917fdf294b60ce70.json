{"ast":null,"code":"import _objectSpread from\"/home/rcts/Email-differ/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState,useRef}from\"react\";import{useSearchParams}from\"react-router-dom\";import API,{validateToken,submitForm,deferForm,optOut,searchOrgs}from\"../../api/apiService\";import{auth,signInWithPhoneNumber,RecaptchaVerifier}from\"../../firebase\";import{GithubAuthProvider,signInWithPopup,getAdditionalUserInfo,signOut}from\"firebase/auth\";import Swal from\"sweetalert2\";import{Box,Paper,Typography,TextField,Button,FormControl,InputLabel,Select,MenuItem,CircularProgress,Stack,Divider,Autocomplete}from\"@mui/material\";import{MuiTelInput}from'mui-tel-input';import{parsePhoneNumber,isValidPhoneFormat}from\"../../utils/phoneUtils\";import logo1 from\"../../assets/badal_logo.png\";import logo2 from\"../../assets/c4gt_logo.png\";// âœ… Role List (matching SignUpPage)\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ROLES=[{value:\"R004\",label:\"Developer\"}];// âœ… Role codes to backend strings (consistent with SignUpPage)\n// eslint-disable-next-line no-unused-vars\nconst ROLE_MAP={R004:\"Developer\"};const GENDERS=[\"Male\",\"Female\",\"Other\",\"Prefer not to say\"];// âœ… Tech Skills (same as SignUpPage)\nconst SKILLS=[\"Frontend Development\",\"Backend Development\",\"Full Stack Development\",\"UI/UX Design\",\"Data Science\",\"Machine Learning\",\"DevOps\",\"Cloud Computing\",\"Cybersecurity\",\"Mobile App Development\",\"Blockchain\",\"Product Management\",\"Public Policy\",\"Research\",\"Technical Writing\"];// âœ… Validation regex (available for future use)\n// eslint-disable-next-line no-unused-vars\nconst githubRegex=/^https:\\/\\/(www\\.)?github\\.com\\/[A-Za-z0-9_-]+\\/?$/;// eslint-disable-next-line no-unused-vars\nconst linkedinRegex=/^https:\\/\\/(www\\.)?linkedin\\.com\\/in\\/[A-Za-z0-9_-]+\\/?$/;const DISCORD_REDIRECT=\"https://pl-app.iiit.ac.in/rcts/account-setup/discord-callback\";const DISCORD_INVITE=\"https://discord.gg/BsbzbUHz\";// âœ… Generate OAuth state for CSRF protection\nconst generateOAuthState=()=>{return Math.random().toString(36).substring(2)+Date.now().toString(36);};const DISCORD_OAUTH=state=>\"https://discord.com/oauth2/authorize\"+\"?client_id=1450787791834447874\"+\"&redirect_uri=\"+encodeURIComponent(DISCORD_REDIRECT)+\"&response_type=code\"+\"&scope=identify%20guilds\"+\"&state=\"+encodeURIComponent(state);// LinkedIn OAuth removed: collecting URL via input field instead\nconst UpdateForm=()=>{var _formData$organizatio4,_formData$organizatio5,_formData$organizatio6,_formData$organizatio7,_formData$skills;const[searchParams]=useSearchParams();const token=searchParams.get(\"token\");const[formData,setFormData]=useState({fullName:\"\",email:\"\",phone:\"\",gender:\"\",organization:null,role:\"\",skills:[],githubId:\"\",githubUrl:\"\",discordId:\"\",linkedinId:\"\"});const[phoneVerification,setPhoneVerification]=useState({isVerified:false,showOtpInput:false,otp:\"\",isProcessing:false,firebaseToken:null// âœ… Store Firebase token for form submission\n});const[status,setStatus]=useState(\"loading\");const[errorMessage,setErrorMessage]=useState(\"\");const[interested,setInterested]=useState(null);const[optoutReason,setOptoutReason]=useState(\"\");const[optoutProcessing,setOptoutProcessing]=useState(false);const[timer,setTimer]=useState(0);// ---------------- ORG STATE ----------------\nconst[orgLoadError,setOrgLoadError]=useState(false);const[showCustomOrg,setShowCustomOrg]=useState(false);const[orgOptions,setOrgOptions]=useState([]);const[orgLoading,setOrgLoading]=useState(false);const isDirtyRef=useRef(false);const[fadeOut,setFadeOut]=useState(false);const[countdown,setCountdown]=useState(5);const[timeRemaining,setTimeRemaining]=useState(600);// 10 minutes in seconds\nconst[isSubmitting,setIsSubmitting]=useState(false);// âœ… Prevent double submit\nconst recaptchaCleanedUp=useRef(false);// âœ… Track recaptcha cleanup\nconst recaptchaContainerIdRef=useRef(0);// âœ… Track unique container IDs\nconst recaptchaWidgetIdRef=useRef(null);// âœ… Track widget ID for proper cleanup\n// âœ… Reusable reCAPTCHA cleanup function\nconst cleanupRecaptcha=async function(){let aggressive=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;console.log(\"\\uD83E\\uDDF9 Cleaning up reCAPTCHA (aggressive: \".concat(aggressive,\")...\"));// Step 1: Clear Firebase RecaptchaVerifier\nif(window.recaptchaVerifier){try{await window.recaptchaVerifier.clear();console.log('âœ“ Cleared recaptchaVerifier');}catch(e){console.warn('Failed to clear recaptchaVerifier:',e);}delete window.recaptchaVerifier;window.recaptchaVerifier=null;}// Step 2: Reset ALL grecaptcha widgets aggressively\nif(window.grecaptcha&&window.grecaptcha.reset){try{// Try to reset by widget ID first\nif(recaptchaWidgetIdRef.current!==null){try{window.grecaptcha.reset(recaptchaWidgetIdRef.current);console.log(\"\\u2713 Reset grecaptcha widget \".concat(recaptchaWidgetIdRef.current));}catch(e){console.warn('Failed to reset specific widget:',e);}}// Always try to reset without ID (resets all widgets)\ntry{window.grecaptcha.reset();console.log('âœ“ Reset all grecaptcha widgets');}catch(e){console.warn('Failed to reset all widgets:',e);}}catch(e){console.warn('Failed to reset grecaptcha:',e);}}recaptchaWidgetIdRef.current=null;// Step 3: Completely remove and recreate DOM container\nconst container=document.getElementById(\"recaptcha-container-update\");if(container){// Remove ALL content and event listeners\ncontainer.innerHTML=\"\";container.textContent=\"\";// Remove all data attributes that grecaptcha might have added\nArray.from(container.attributes).forEach(attr=>{if(attr.name.startsWith('data-')){container.removeAttribute(attr.name);}});console.log('âœ“ Cleared DOM container completely');}recaptchaCleanedUp.current=true;};// Form validation - check if all required fields are filled\nconst isFormComplete=()=>{var _formData$fullName,_formData$email,_formData$phone;// âœ… Check if submission is in progress\nif(isSubmitting)return false;// âœ… Check organization object structure\nconst hasValidOrg=formData.organization&&formData.organization.name&&formData.organization.ref&&formData.organization.ref.type&&(formData.organization.ref.type!==\"custom\"||formData.organization.orgType);const requiredFieldsFilled=((_formData$fullName=formData.fullName)===null||_formData$fullName===void 0?void 0:_formData$fullName.trim())!==\"\"&&((_formData$email=formData.email)===null||_formData$email===void 0?void 0:_formData$email.trim())!==\"\"&&((_formData$phone=formData.phone)===null||_formData$phone===void 0?void 0:_formData$phone.trim())!==\"\"&&formData.gender!==\"\"&&hasValidOrg&&formData.role!==\"\";const socialVerified=githubStatus.verified&&discordVerified;const phoneVerified=phoneVerification.isVerified;return requiredFieldsFilled&&socialVerified&&phoneVerified;};// OAuth verification states\nconst[githubStatus,setGithubStatus]=useState({verifying:false,verified:false,username:\"\",avatar:\"\",// âœ… Store avatar URL\nerror:\"\"});const[discordVerified,setDiscordVerified]=useState(sessionStorage.getItem(\"discordVerified\")===\"true\");const[discordNotMember,setDiscordNotMember]=useState(sessionStorage.getItem(\"discordNotMember\")===\"true\");const[discordStatus,setDiscordStatus]=useState({verifying:false});const[oauthInProgress,setOauthInProgress]=useState(false);// ðŸ”” SweetAlert helper\nconst showAlert=function(text){let icon=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"info\";return Swal.fire({text,icon,confirmButtonColor:\"#1E4DD8\"});};// âœ… Restore UpdateForm context when returning from OAuth\nuseEffect(()=>{const isReturningFromOAuth=sessionStorage.getItem(\"isNavigating\");if(isReturningFromOAuth){const savedFormData=sessionStorage.getItem(\"updateFormData\");const savedToken=sessionStorage.getItem(\"updateFormToken\");if(savedFormData){try{const parsedData=JSON.parse(savedFormData);setFormData(prev=>_objectSpread(_objectSpread({},prev),parsedData));}catch(e){console.error(\"Failed to restore form data:\",e);}}// âœ… Restore phone verification state\nconst savedPhoneVerification=sessionStorage.getItem(\"phoneVerificationState\");if(savedPhoneVerification){try{const parsedPhoneData=JSON.parse(savedPhoneVerification);setPhoneVerification(prev=>_objectSpread(_objectSpread({},prev),{},{isVerified:parsedPhoneData.isVerified,firebaseToken:parsedPhoneData.firebaseToken,showOtpInput:false// Hide OTP input since already verified\n}));console.log(\"âœ… Restored phone verification state from sessionStorage\");}catch(e){console.error(\"Failed to restore phone verification:\",e);}}// Clear OAuth in progress flag on backend\nif(savedToken){API.post('/form/oauth-status',{token:savedToken,inProgress:false}).catch(err=>console.error(\"Failed to clear OAuth flag:\",err));}sessionStorage.removeItem(\"isNavigating\");sessionStorage.removeItem(\"updateFormData\");sessionStorage.removeItem(\"updateFormToken\");setOauthInProgress(false);}},[]);// âœ… Token validation\nuseEffect(()=>{const activateAndValidate=async()=>{if(!token){setStatus(\"invalid\");setErrorMessage(\"No token provided\");return;}try{// âœ… Activate token and get activatedAt timestamp\nconst activateRes=await API.post(\"/form/activate\",{token});const res=await validateToken(token);if(res.data.valid){var _partialRes$data,_activateRes$data;setStatus(\"valid\");const partialRes=await API.get(\"/form/partial/\".concat(token));if((_partialRes$data=partialRes.data)!==null&&_partialRes$data!==void 0&&_partialRes$data.data){const partial=partialRes.data.data;setFormData(prev=>_objectSpread(_objectSpread(_objectSpread({},prev),partial),{},{skills:partial.techStack||partial.skills||[]// âœ… map correctly\n}));}// âœ… Calculate time remaining from backend activatedAt timestamp\nif((_activateRes$data=activateRes.data)!==null&&_activateRes$data!==void 0&&_activateRes$data.activatedAt){const activatedTime=new Date(activateRes.data.activatedAt).getTime();const now=Date.now();const elapsed=Math.floor((now-activatedTime)/1000);// seconds elapsed\nconst remaining=Math.max(0,600-elapsed);// 10 minutes = 600 seconds\nsetTimeRemaining(remaining);}// â° Token expires after 7 days (matches backend expiry window)\nconst timer=setTimeout(()=>{setStatus(\"expired\");alert(\"This link has expired. Please check your email for a new update link.\");},7*24*60*60*1000);// 7 days\nreturn()=>clearTimeout(timer);}else{setStatus(\"invalid\");setErrorMessage(res.data.message||\"Invalid token\");}}catch(err){var _err$response,_err$response$data;const errorMsg=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Failed to load form\";// âœ… Check if form was already submitted\nif(errorMsg===\"Form already submitted\"){setStatus(\"submitted\");}else{setStatus(\"invalid\");setErrorMessage(errorMsg);}}};activateAndValidate();},[token]);// âœ… Clean up reCAPTCHA on component unmount\nuseEffect(()=>{return()=>{cleanupRecaptcha(true);// Aggressive cleanup on unmount\n};},[]);// âœ… Auto-save every 5 seconds (only if form data changed)\nuseEffect(()=>{if(status!==\"valid\")return;const timer=setInterval(async()=>{// âœ… Only save if form data has changed\nif(!isDirtyRef.current)return;try{await API.post(\"/form/save-partial\",{token,data:formData});isDirtyRef.current=false;// âœ… Reset dirty flag after successful save\n}catch(_unused){}},5000);return()=>clearInterval(timer);},[formData,status,token]);// â± Resend timer\nuseEffect(()=>{if(timer>0){const interval=setInterval(()=>setTimer(t=>t-1),1000);return()=>clearInterval(interval);}},[timer]);// Restore GitHub verification from sessionStorage\nuseEffect(()=>{const verified=sessionStorage.getItem(\"githubVerified\")===\"true\";const username=sessionStorage.getItem(\"githubUsername\");const url=sessionStorage.getItem(\"githubUrl\");if(verified&&username&&url){setGithubStatus({verifying:false,verified:true,username,error:\"\"});setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{githubUrl:url}));}},[]);// Restore Discord verification from sessionStorage\nuseEffect(()=>{const verified=sessionStorage.getItem(\"discordVerified\")===\"true\";const notMember=sessionStorage.getItem(\"discordNotMember\")===\"true\";setDiscordVerified(verified);setDiscordNotMember(notMember);if(verified){const discordUsername=sessionStorage.getItem(\"discordUsername\");if(discordUsername){// Use username (display name like \"user#1234\"), not numeric ID\nsetFormData(prev=>_objectSpread(_objectSpread({},prev),{},{discordId:discordUsername}));}}},[]);// âœ… Auto-close tab + countdown when deferred\nuseEffect(()=>{if(status===\"deferred\"){const interval=setInterval(()=>{setCountdown(prev=>{if(prev<=1){window.close();// auto-close after countdown\nclearInterval(interval);return 0;}return prev-1;});},1000);return()=>clearInterval(interval);}},[status]);// Restore GitHub verification from sessionStorage\nuseEffect(()=>{const verified=sessionStorage.getItem(\"githubVerified\")===\"true\";const username=sessionStorage.getItem(\"githubUsername\");const url=sessionStorage.getItem(\"githubUrl\");if(verified&&username&&url){setGithubStatus({verifying:false,verified:true,username,error:\"\"});setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{githubUrl:url}));}},[]);// âœ… Restore phone verification from sessionStorage on mount\nuseEffect(()=>{const savedPhoneVerification=sessionStorage.getItem(\"phoneVerificationState\");if(savedPhoneVerification){try{const parsedPhoneData=JSON.parse(savedPhoneVerification);// Check if verification is still recent (within 1 hour)\nconst verifiedAt=new Date(parsedPhoneData.verifiedAt);const now=new Date();const ageInMs=now-verifiedAt;const oneHourInMs=60*60*1000;if(ageInMs<oneHourInMs){setPhoneVerification(prev=>_objectSpread(_objectSpread({},prev),{},{isVerified:parsedPhoneData.isVerified,firebaseToken:parsedPhoneData.firebaseToken,showOtpInput:false}));console.log(\"âœ… Restored phone verification from sessionStorage on mount\");}else{// Expired - clear it\nsessionStorage.removeItem(\"phoneVerificationState\");console.log(\"âš ï¸ Phone verification expired, cleared from sessionStorage\");}}catch(e){console.error(\"Failed to restore phone verification on mount:\",e);}}},[]);// âœ… Load initial org options on mount (matching Signup)\nuseEffect(()=>{const loadInitialOrgs=async()=>{try{const results=await searchOrgs(\"\");setOrgOptions(results||[]);}catch(err){console.error(\"Failed to load initial organizations:\",err);setOrgLoadError(true);}};loadInitialOrgs();},[]);// âœ… 10-minute countdown timer with auto-expiry\nuseEffect(()=>{if(status===\"valid\"&&timeRemaining>0){const countdownInterval=setInterval(()=>{setTimeRemaining(prev=>{if(prev<=1){clearInterval(countdownInterval);setStatus(\"expired\");Swal.fire({icon:\"warning\",title:\"Token Expired\",html:\"\\n                <p>Your form session has expired after 10 minutes.</p>\\n                <p><strong>What happens next?</strong></p>\\n                <ul style=\\\"text-align: left; margin: 10px 20px;\\\">\\n                  <li>This form will be automatically closed</li>\\n                  <li>You will receive a new reminder email within 24 hours</li>\\n                  <li>You can complete the form using the new link</li>\\n                </ul>\\n              \",confirmButtonColor:\"#1E4DD8\",confirmButtonText:\"OK\"});return 0;}return prev-1;});},1000);return()=>clearInterval(countdownInterval);}},[status,timeRemaining]);// âœ… Verify GitHub\nconst handleVerifyGithub=async()=>{setGithubStatus({verifying:true,verified:false,username:\"\",avatar:\"\",error:\"\"});try{var _info$profile;const provider=new GithubAuthProvider();const result=await signInWithPopup(auth,provider);const info=getAdditionalUserInfo(result);const githubUsername=info===null||info===void 0?void 0:info.username;const githubAvatar=(info===null||info===void 0?void 0:(_info$profile=info.profile)===null||_info$profile===void 0?void 0:_info$profile.avatar_url)||\"\";if(!githubUsername)throw new Error(\"Unable to retrieve GitHub username\");const verifiedUrl=\"https://github.com/\".concat(githubUsername);setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{githubUrl:verifiedUrl}));// âœ… Store in sessionStorage for persistence\nsessionStorage.setItem(\"githubVerified\",\"true\");sessionStorage.setItem(\"githubUsername\",githubUsername);sessionStorage.setItem(\"githubUrl\",verifiedUrl);sessionStorage.setItem(\"githubAvatar\",githubAvatar);setGithubStatus({verifying:false,verified:true,username:githubUsername,avatar:githubAvatar,error:\"\"});await signOut(auth);showAlert(\"GitHub verified successfully!\",\"success\");}catch(err){var _err$message,_err$message2;console.error(\"GitHub verify error:\",err);// âœ… Handle different error types\nlet errorMsg=\"GitHub verification failed. Please try again.\";if(err.code===\"auth/popup-closed-by-user\"){errorMsg=\"Verification cancelled. Please try again.\";}else if(err.code===\"auth/popup-blocked\"){errorMsg=\"Popup was blocked by your browser. Please allow popups for this site and try again.\";}else if(err.code===\"auth/cancelled-popup-request\"){errorMsg=\"Verification cancelled. Please try again.\";}else if((_err$message=err.message)!==null&&_err$message!==void 0&&_err$message.includes(\"rate\")||(_err$message2=err.message)!==null&&_err$message2!==void 0&&_err$message2.includes(\"limit\")){errorMsg=\"Too many verification attempts. Please wait a few minutes and try again.\";}setGithubStatus({verifying:false,verified:false,username:\"\",avatar:\"\",error:errorMsg});if(err.code!==\"auth/popup-closed-by-user\"){showAlert(errorMsg,\"error\");}}};// âœ… Verify Discord (redirect-based)\nconst handleVerifyDiscord=async()=>{try{// âœ… Set verifying state\nsetDiscordStatus({verifying:true});// âœ… Generate OAuth state for CSRF protection\nconst state=generateOAuthState();sessionStorage.setItem(\"discordOAuthState\",state);// âœ… Clear stale member flag before starting\nsessionStorage.removeItem(\"discordNotMember\");setDiscordNotMember(false);// Mark OAuth as in progress to extend token expiry\nawait API.post('/form/oauth-status',{token,inProgress:true});// Save form data and token before redirect\nsessionStorage.setItem(\"updateFormData\",JSON.stringify(formData));sessionStorage.setItem(\"updateFormToken\",token);// âœ… Save phone verification state if verified\nif(phoneVerification.isVerified&&phoneVerification.firebaseToken){sessionStorage.setItem(\"phoneVerificationState\",JSON.stringify({isVerified:true,firebaseToken:phoneVerification.firebaseToken,verifiedAt:new Date().toISOString()}));}sessionStorage.setItem(\"oauthReturnPath\",\"/update-form?token=\".concat(token));setOauthInProgress(true);// âœ… Show loading state briefly before redirect\nshowAlert(\"Redirecting to Discord...\",\"info\");// Redirect to Discord OAuth with state\nsetTimeout(()=>{window.location.href=DISCORD_OAUTH(state);},500);}catch(err){console.error(\"Failed to mark OAuth in progress:\",err);setOauthInProgress(false);// âœ… Clear flag to allow retry\nsetDiscordStatus({verifying:false});// âœ… Reset verifying state\nshowAlert(\"Failed to start Discord verification. Please try again.\",\"error\");}};// âœ… Handle org search (like Signup)\nconst handleOrgSearch=async searchTerm=>{if(!searchTerm||searchTerm.trim()===\"\"){setOrgLoading(true);try{const results=await searchOrgs(\"\");setOrgOptions(results||[]);}catch(err){console.error(\"Org search error:\",err);setOrgOptions([]);}finally{setOrgLoading(false);}return;}if(searchTerm.length<2){return;}setOrgLoading(true);try{const results=await searchOrgs(searchTerm);setOrgOptions(results||[]);}catch(err){console.error(\"Org search error:\",err);setOrgOptions([]);}finally{setOrgLoading(false);}};// âœ… Handle organization change (matching Signup structure)\nconst handleOrgChange=value=>{isDirtyRef.current=true;if(!value){setShowCustomOrg(false);setFormData(_objectSpread(_objectSpread({},formData),{},{organization:null}));return;}if(value.source===\"custom\"){setShowCustomOrg(true);setFormData(_objectSpread(_objectSpread({},formData),{},{organization:{source:\"custom\",ref:{type:\"custom\",id:null},name:\"\",orgType:\"\"}}));}else{setShowCustomOrg(false);setFormData(_objectSpread(_objectSpread({},formData),{},{organization:{source:value.source,ref:value.orgRef,name:value.label,orgType:value.orgType}}));}};// âœ… Handle changes\nconst handleChange=e=>{isDirtyRef.current=true;const{name,value}=e.target;setFormData(_objectSpread(_objectSpread({},formData),{},{[name]:value}));};// âœ… Request OTP\nconst handleRequestOtp=async()=>{const phoneValidation=parsePhoneNumber(formData.phone);if(!phoneValidation.isValid){return showAlert(\"Please enter a valid phone number.\",\"warning\");}if(timer>0)return showAlert(\"Please wait \".concat(timer,\"s before resending OTP.\"),\"info\");// âœ… Prevent multiple rapid clicks\nif(phoneVerification.isProcessing){console.log('âš ï¸ OTP request already in progress');return;}setPhoneVerification(p=>_objectSpread(_objectSpread({},p),{},{isProcessing:true}));try{// âœ… Use aggressive cleanup utility\nawait cleanupRecaptcha(true);// Generate unique container ID\nrecaptchaContainerIdRef.current+=1;const uniqueContainerId=\"recaptcha-container-update-\".concat(recaptchaContainerIdRef.current);// Recreate container\nconst container=document.getElementById(\"recaptcha-container-update\");if(!container){console.error('âŒ recaptcha-container-update not found in DOM');throw new Error('reCAPTCHA container not found');}// Create fresh inner div\nconst newDiv=document.createElement('div');newDiv.id=uniqueContainerId;newDiv.className='recaptcha-inner';container.appendChild(newDiv);// Wait for DOM to be ready\nawait new Promise(resolve=>setTimeout(resolve,200));// Verify container exists\nconst targetContainer=document.getElementById(uniqueContainerId);if(!targetContainer){throw new Error(\"Container \".concat(uniqueContainerId,\" not found after creation\"));}console.log(\"\\u2713 Created fresh container: \".concat(uniqueContainerId));// Step 6: Create new RecaptchaVerifier with unique container\nconsole.log('ðŸ”§ Creating new RecaptchaVerifier...');window.recaptchaVerifier=new RecaptchaVerifier(auth,uniqueContainerId,{size:\"invisible\",callback:()=>console.log(\"reCAPTCHA solved\"),\"expired-callback\":()=>console.warn(\"reCAPTCHA expired\")});// Step 7: Render and store widget ID (with additional error handling)\nlet widgetId;try{widgetId=await window.recaptchaVerifier.render();recaptchaWidgetIdRef.current=widgetId;console.log(\"\\u2705 reCAPTCHA rendered successfully in \".concat(uniqueContainerId,\" (widget ID: \").concat(widgetId,\")\"));}catch(renderError){// If render still fails, try one more time with complete reset\nconsole.warn('âš ï¸ First render attempt failed, trying complete reset...',renderError);// Nuclear option: reload grecaptcha script\nif(window.grecaptcha){delete window.grecaptcha;}// Wait a bit longer\nawait new Promise(resolve=>setTimeout(resolve,500));// Try to render again\nwidgetId=await window.recaptchaVerifier.render();recaptchaWidgetIdRef.current=widgetId;console.log(\"\\u2705 reCAPTCHA rendered successfully on retry (widget ID: \".concat(widgetId,\")\"));}const e164Phone=phoneValidation.e164;const confirmationResult=await signInWithPhoneNumber(auth,e164Phone,window.recaptchaVerifier);window.confirmationResult=confirmationResult;showAlert(\"OTP sent successfully to your phone!\",\"success\");setPhoneVerification({showOtpInput:true,isVerified:false,otp:\"\",isProcessing:false});setTimer(30);// cooldown\nrecaptchaCleanedUp.current=false;}catch(err){var _err$message3;console.error(\"OTP send error:\",err);// âœ… Provide user-friendly error messages\nlet errorMsg=\"Failed to send OTP. Please try again.\";if(err.code===\"auth/too-many-requests\"){errorMsg=\"Too many attempts. Please try again later.\";}else if(err.code===\"auth/invalid-phone-number\"){errorMsg=\"Invalid phone number format.\";}else if((_err$message3=err.message)!==null&&_err$message3!==void 0&&_err$message3.includes(\"reCAPTCHA\")){errorMsg=err.message;}showAlert(errorMsg,\"error\");// âœ… Clean up on error\nawait cleanupRecaptcha(true);setPhoneVerification(p=>_objectSpread(_objectSpread({},p),{},{isProcessing:false}));}};// âœ… Verify OTP\nconst handleVerifyOtp=async()=>{if(!phoneVerification.otp.trim()||phoneVerification.otp.length!==6){return showAlert(\"Please enter a valid 6-digit OTP.\",\"warning\");}setPhoneVerification(p=>_objectSpread(_objectSpread({},p),{},{isProcessing:true}));try{const result=await window.confirmationResult.confirm(phoneVerification.otp);const user=result.user;const firebaseToken=await user.getIdToken();// âœ… Send phone in E.164 format\nawait API.post(\"/form/verify-phone\",{token,phone:formData.phone,// E.164 format from MuiTelInput\nfirebaseToken});showAlert(\"Phone verified successfully!\",\"success\");const verifiedState=_objectSpread(_objectSpread({},phoneVerification),{},{isVerified:true,isProcessing:false,firebaseToken// âœ… Store token for form submission\n});setPhoneVerification(verifiedState);// âœ… Save to sessionStorage to persist across OAuth redirects\nsessionStorage.setItem(\"phoneVerificationState\",JSON.stringify({isVerified:true,firebaseToken,verifiedAt:new Date().toISOString()}));// âœ… Clean up recaptcha after successful verification\nawait cleanupRecaptcha(false);}catch(err){console.error(\"OTP verification failed:\",err);// âœ… User-friendly error messages\nlet errorMsg=\"Invalid or expired OTP. Please try again.\";if(err.code===\"auth/invalid-verification-code\"){errorMsg=\"Invalid OTP code. Please check and try again.\";}else if(err.code===\"auth/code-expired\"){errorMsg=\"OTP has expired. Please request a new one.\";}showAlert(errorMsg,\"error\");// âœ… Clear verifier to allow retry\nawait cleanupRecaptcha(false);setPhoneVerification(p=>_objectSpread(_objectSpread({},p),{},{isProcessing:false}));}};// âœ… Submit\nconst handleSubmit=async e=>{var _formData$fullName2,_formData$email2;e.preventDefault();// âœ… Prevent double submission\nif(isSubmitting){return;}// âœ… Detailed validation\nif(!((_formData$fullName2=formData.fullName)!==null&&_formData$fullName2!==void 0&&_formData$fullName2.trim())){return showAlert(\"Please enter your full name.\",\"warning\");}const phoneValidation=parsePhoneNumber(formData.phone);if(!phoneValidation.isValid){return showAlert(\"Please enter a valid phone number.\",\"warning\");}if(!((_formData$email2=formData.email)!==null&&_formData$email2!==void 0&&_formData$email2.trim())||!formData.email.includes(\"@\")){return showAlert(\"Please enter a valid email address.\",\"warning\");}if(!formData.gender){return showAlert(\"Please select your gender.\",\"warning\");}if(!formData.organization||!formData.organization.name||!formData.organization.ref||!formData.organization.ref.type){return showAlert(\"Please select or enter your organization.\",\"warning\");}if(!formData.role){return showAlert(\"Please select your role.\",\"warning\");}if(!githubStatus.verified){return showAlert(\"Please verify your GitHub account before submitting.\",\"warning\");}if(!discordVerified){return showAlert(\"Please verify your Discord account before submitting.\",\"warning\");}if(!phoneVerification.isVerified){return showAlert(\"Please verify your phone number before submitting.\",\"warning\");}if(!formData.skills||formData.skills.length===0){return showAlert(\"Please select at least one tech skill.\",\"warning\");}if(formData.skills.length>6){return showAlert(\"You can select maximum 6 skills.\",\"warning\");}const confirm=await Swal.fire({title:\"Confirm Submission?\",text:\"Please review your information before submitting.\",icon:\"question\",showCancelButton:true,confirmButtonText:\"Submit\",confirmButtonColor:\"#1E4DD8\"});if(!confirm.isConfirmed)return;// âœ… Prevent multiple submissions\nif(isSubmitting){console.log('âš ï¸ Submission already in progress');return;}setIsSubmitting(true);try{var _formData$fullName3,_formData$email3,_formData$organizatio,_formData$organizatio2,_formData$organizatio3,_formData$githubUrl,_formData$githubId,_formData$discordId,_formData$linkedinId,_finalData$token,_finalData$firebaseTo;isDirtyRef.current=false;// âœ… Get verified social media data from sessionStorage\nconst githubUsername=sessionStorage.getItem(\"githubUsername\")||\"\";const githubUrl=sessionStorage.getItem(\"githubUrl\")||\"\";const discordId=sessionStorage.getItem(\"discordId\")||\"\";const cleanedData={fullName:(_formData$fullName3=formData.fullName)===null||_formData$fullName3===void 0?void 0:_formData$fullName3.trim(),email:(_formData$email3=formData.email)===null||_formData$email3===void 0?void 0:_formData$email3.trim(),phone:phoneValidation.e164,gender:formData.gender,organization:{name:(_formData$organizatio=formData.organization)===null||_formData$organizatio===void 0?void 0:_formData$organizatio.name,ref:(_formData$organizatio2=formData.organization)===null||_formData$organizatio2===void 0?void 0:_formData$organizatio2.ref,orgType:(_formData$organizatio3=formData.organization)===null||_formData$organizatio3===void 0?void 0:_formData$organizatio3.orgType},role:formData.role,techStack:formData.skills,githubUrl:githubUrl||((_formData$githubUrl=formData.githubUrl)===null||_formData$githubUrl===void 0?void 0:_formData$githubUrl.trim())||null,githubId:githubUsername||((_formData$githubId=formData.githubId)===null||_formData$githubId===void 0?void 0:_formData$githubId.trim())||null,discordId:discordId||((_formData$discordId=formData.discordId)===null||_formData$discordId===void 0?void 0:_formData$discordId.trim())||null,linkedinId:((_formData$linkedinId=formData.linkedinId)===null||_formData$linkedinId===void 0?void 0:_formData$linkedinId.trim())||null,token,firebaseToken:phoneVerification.firebaseToken// âœ… Include Firebase token\n};// âœ… Remove null/empty fields (but keep token and firebaseToken)\nconst finalData={};Object.keys(cleanedData).forEach(key=>{// Always include token and firebaseToken\nif(key==='token'||key==='firebaseToken'){finalData[key]=cleanedData[key];}else if(cleanedData[key]!==null&&cleanedData[key]!==\"\"){finalData[key]=cleanedData[key];}});// âœ… Debug logging\nconsole.log('ðŸ“¤ Submitting form with keys:',Object.keys(finalData));console.log('ðŸ“¤ Token:',((_finalData$token=finalData.token)===null||_finalData$token===void 0?void 0:_finalData$token.substring(0,10))+'...');console.log('ðŸ“¤ Firebase token:',((_finalData$firebaseTo=finalData.firebaseToken)===null||_finalData$firebaseTo===void 0?void 0:_finalData$firebaseTo.substring(0,20))+'...');await submitForm(finalData);await API.delete(\"/form/partial/\".concat(token));sessionStorage.removeItem(\"updateFormData\");sessionStorage.removeItem(\"updateFormToken\");sessionStorage.removeItem(\"oauthReturnPath\");sessionStorage.removeItem(\"phoneVerificationState\");// âœ… Clear phone verification\nsessionStorage.removeItem(\"githubVerified\");sessionStorage.removeItem(\"githubUsername\");sessionStorage.removeItem(\"githubUrl\");sessionStorage.removeItem(\"githubAvatar\");sessionStorage.removeItem(\"discordVerified\");sessionStorage.removeItem(\"discordUsername\");sessionStorage.removeItem(\"discordId\");sessionStorage.removeItem(\"discordAvatarUrl\");sessionStorage.removeItem(\"discordNotMember\");sessionStorage.removeItem(\"discordOAuthState\");setStatus(\"submitted\");showAlert(\"Form submitted successfully!\",\"success\");}catch(err){var _err$response2,_err$response3,_err$response4,_err$response4$data,_err$response5;console.error(\"Submission error:\",err);console.error(\"Error response:\",(_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.data);console.error(\"Error status:\",(_err$response3=err.response)===null||_err$response3===void 0?void 0:_err$response3.status);const errorMessage=((_err$response4=err.response)===null||_err$response4===void 0?void 0:(_err$response4$data=_err$response4.data)===null||_err$response4$data===void 0?void 0:_err$response4$data.message)||\"Submission failed. Please try again.\";// âœ… Handle 409 Conflict (user already exists)\nif(((_err$response5=err.response)===null||_err$response5===void 0?void 0:_err$response5.status)===409){var _err$response6,_err$response6$data;const userId=(_err$response6=err.response)===null||_err$response6===void 0?void 0:(_err$response6$data=_err$response6.data)===null||_err$response6$data===void 0?void 0:_err$response6$data.userId;showAlert(\"This account already exists\".concat(userId?\" (User ID: \".concat(userId,\")\"):'',\". \").concat(errorMessage),\"error\");return;}// âœ… If phone conflict error, reset phone verification so user can change number\nif(errorMessage.includes(\"phone number\")||errorMessage.includes(\"already registered\")){setPhoneVerification({isVerified:false,showOtpInput:false,otp:\"\",isProcessing:false,firebaseToken:null});showAlert(\"This phone number is already registered with a different account. Please use a different number or verify with the correct account.\",\"error\");}else{showAlert(errorMessage,\"error\");}}finally{setIsSubmitting(false);}};// âœ… Defer\n// âœ… Defer (with confirmation + smooth exit)\nconst handleDefer=async()=>{const confirmDefer=window.confirm(\"Are you sure you want to defer filling this form?\\nYouâ€™ll receive a reminder email later.\");if(!confirmDefer)return;// user chose No â€” stay on form\ntry{await deferForm({token});setFadeOut(true);setTimeout(()=>setStatus(\"deferred\"),600);// fade-out animation time\n}catch(err){var _err$response7,_err$response7$data;showAlert(((_err$response7=err.response)===null||_err$response7===void 0?void 0:(_err$response7$data=_err$response7.data)===null||_err$response7$data===void 0?void 0:_err$response7$data.message)||\"Failed to defer form.\",\"error\");}};// âœ… Opt-out\nconst handleOptOut=async()=>{const confirm=await Swal.fire({title:\"Confirm Opt-Out?\",text:\"You wonâ€™t receive future communications.\",icon:\"warning\",showCancelButton:true,confirmButtonText:\"Opt Out\",confirmButtonColor:\"#d33\"});if(!confirm.isConfirmed)return;setOptoutProcessing(true);try{await optOut({token,reason:optoutReason});setOptoutProcessing(false);setInterested(\"no\");setStatus(\"deferred\");showAlert(\"You have been opted out successfully.\",\"success\");}catch(err){var _err$response8,_err$response8$data;setOptoutProcessing(false);showAlert(((_err$response8=err.response)===null||_err$response8===void 0?void 0:(_err$response8$data=_err$response8.data)===null||_err$response8$data===void 0?void 0:_err$response8$data.message)||\"Failed to opt out.\",\"error\");}};// âœ… Conditional Views\nif(status===\"loading\")return/*#__PURE__*/_jsx(Typography,{align:\"center\",children:\"Loading form...\"});if(status===\"invalid\")return/*#__PURE__*/_jsx(Box,{sx:{minHeight:\"100vh\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",bgcolor:\"#f8f9fa\",p:2},children:/*#__PURE__*/_jsxs(Paper,{sx:{width:\"100%\",maxWidth:480,p:4,borderRadius:3,boxShadow:4,textAlign:\"center\"},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"error\",fontWeight:\"bold\",gutterBottom:true,children:\"\\u274C Invalid or Expired Link\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mb:2},children:errorMessage||\"This link is no longer valid.\"}),/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",fontWeight:\"bold\",gutterBottom:true,children:\"What happened?\"}),/*#__PURE__*/_jsxs(Box,{sx:{textAlign:\"left\",mx:3,my:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:\"\\uD83D\\uDD17 The link may have already been used\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:\"\\u23F0 The link may have expired (7 days validity)\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:\"\\u2705 You may have already submitted the form\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"\\uD83D\\uDEAB You may have opted out or deferred\"})]}),/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",fontWeight:\"bold\",gutterBottom:true,children:\"What to do next?\"}),/*#__PURE__*/_jsxs(Box,{sx:{textAlign:\"left\",mx:3,my:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:\"\\uD83D\\uDCE7 Check your email for the latest update form link\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:\"\\u23F3 Wait for the next reminder email (sent automatically)\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"\\u2709\\uFE0F Contact support if you believe this is an error\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",sx:{mt:2,display:\"block\"},children:\"You can close this window now.\"})]})});if(status===\"expired\")return/*#__PURE__*/_jsx(Box,{sx:{minHeight:\"100vh\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",bgcolor:\"#f8f9fa\",p:2},children:/*#__PURE__*/_jsxs(Paper,{sx:{width:\"100%\",maxWidth:480,p:4,borderRadius:3,boxShadow:4,textAlign:\"center\"},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"warning.main\",fontWeight:\"bold\",gutterBottom:true,children:\"\\u23F0 Form Expired\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mb:2},children:\"Your 10-minute session has expired.\"}),/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",fontWeight:\"bold\",gutterBottom:true,children:\"What happens next?\"}),/*#__PURE__*/_jsxs(Box,{sx:{textAlign:\"left\",mx:3,my:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:\"\\u2709\\uFE0F You will receive a new reminder email within 24 hours\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:\"\\uD83D\\uDD17 Use the new link to complete your form\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:\"\\uD83D\\uDCBE Your progress has been saved automatically\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"\\u23F1\\uFE0F You'll have another 10 minutes when you return\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",sx:{mt:2,display:\"block\"},children:\"You can close this window now.\"})]})});if(status===\"submitted\")return/*#__PURE__*/_jsx(Box,{sx:{minHeight:\"100vh\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",bgcolor:\"#f8f9fa\",p:2},children:/*#__PURE__*/_jsxs(Paper,{sx:{width:\"100%\",maxWidth:480,p:4,borderRadius:3,boxShadow:4,textAlign:\"center\"},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"success.main\",fontWeight:\"bold\",gutterBottom:true,children:\"\\u2705 Form Already Submitted\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mb:2},children:\"You have already submitted this form successfully.\"}),/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",fontWeight:\"bold\",gutterBottom:true,children:\"What happened?\"}),/*#__PURE__*/_jsxs(Box,{sx:{textAlign:\"left\",mx:3,my:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:\"\\u2705 Your form submission was completed successfully\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:\"\\uD83D\\uDCBE Your information has been saved in our system\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"\\uD83D\\uDD12 This link can no longer be used to prevent duplicate submissions\"})]}),/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",fontWeight:\"bold\",gutterBottom:true,children:\"What to do next?\"}),/*#__PURE__*/_jsxs(Box,{sx:{textAlign:\"left\",mx:3,my:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:\"\\uD83D\\uDCE7 Check your email for confirmation\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:\"\\u2139\\uFE0F No further action is needed\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"\\u2709\\uFE0F Contact support if you need to update your information\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",sx:{mt:2,display:\"block\"},children:\"You can close this window now.\"})]})});// âœ… Deferred screen (auto-close + message)\nif(status===\"deferred\")return/*#__PURE__*/_jsx(Box,{sx:{minHeight:\"100vh\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",bgcolor:\"#f8f9fa\",textAlign:\"center\",p:3},children:/*#__PURE__*/_jsxs(Paper,{sx:{p:4,borderRadius:3,border:\"1px solid #ddd\",boxShadow:3,maxWidth:480},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"warning.main\",gutterBottom:true,children:\"\\u26A0\\uFE0F Form Deferred\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mb:1},children:\"You\\u2019ve chosen to defer filling this form.\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mb:2},children:\"You can complete it later using the reminder email link we\\u2019ll send soon.\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"This window will close automatically in \",/*#__PURE__*/_jsx(\"b\",{children:countdown}),\" seconds.\"]})]})});// âœ… Main Form UI\nreturn/*#__PURE__*/_jsx(Box,{sx:{minHeight:\"100vh\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",bgcolor:\"#f8f9fa\",p:2,flex:1,width:\"100%\"},children:/*#__PURE__*/_jsxs(Paper,{sx:{width:\"100%\",maxWidth:480,p:3,borderRadius:3,boxShadow:4,border:\"1px solid #ddd\",opacity:fadeOut?0:1,transition:\"opacity 0.6s ease-in-out\"},children:[/*#__PURE__*/_jsxs(Stack,{alignItems:\"center\",spacing:1,children:[/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:1,alignItems:\"center\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo1,alt:\"Logo1\",style:{width:36,height:36}}),/*#__PURE__*/_jsx(\"img\",{src:logo2,alt:\"Logo2\",style:{width:36,height:36}})]}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",fontWeight:\"bold\",children:\"Update Your Information\"}),/*#__PURE__*/_jsx(Box,{sx:{width:\"100%\",mt:1,p:1.5,borderRadius:2,backgroundColor:timeRemaining<=120?\"#ffebee\":timeRemaining<=300?\"#fff3e0\":\"#e3f2fd\",border:\"2px solid \".concat(timeRemaining<=120?\"#d32f2f\":timeRemaining<=300?\"#f57c00\":\"#1976d2\"),display:\"flex\",alignItems:\"center\",justifyContent:\"center\",gap:1},children:/*#__PURE__*/_jsxs(Typography,{sx:{fontSize:\"1.1rem\",fontWeight:\"bold\",color:timeRemaining<=120?\"#d32f2f\":timeRemaining<=300?\"#f57c00\":\"#1976d2\"},children:[\"\\u23F1\\uFE0F Time Remaining: \",Math.floor(timeRemaining/60),\":\",String(timeRemaining%60).padStart(2,\"0\")]})}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{color:timeRemaining<=120?\"#d32f2f\":\"text.secondary\",fontWeight:timeRemaining<=120?\"bold\":\"normal\"},children:timeRemaining<=120?\"âš ï¸ Hurry! Your session will expire soon!\":\"Complete the form within 10 minutes or it will expire\"}),/*#__PURE__*/_jsx(Divider,{sx:{width:\"100%\",my:1}})]}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,size:\"small\",sx:{mt:2},children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Continue as part of our organization?\"}),/*#__PURE__*/_jsxs(Select,{value:interested!==null&&interested!==void 0?interested:\"\",label:\"Continue?\",onChange:e=>setInterested(e.target.value),children:[/*#__PURE__*/_jsx(MenuItem,{value:\"yes\",children:\"Yes, I want to continue\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"no\",children:\"No, I want to opt out\"})]})]}),interested===\"no\"?/*#__PURE__*/_jsxs(Box,{mt:3,children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"We're sorry to see you go. You may share feedback (optional):\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,rows:3,placeholder:\"Your reason...\",value:optoutReason,onChange:e=>setOptoutReason(e.target.value),sx:{mt:1}}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",color:\"error\",sx:{mt:2,borderRadius:\"20px\"},onClick:handleOptOut,disabled:optoutProcessing,children:optoutProcessing?\"Processing...\":\"Confirm Opt-Out\"})]}):/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,mt:2,children:[/*#__PURE__*/_jsx(TextField,{label:\"Full Name *\",fullWidth:true,size:\"small\",margin:\"dense\",name:\"fullName\",value:formData.fullName,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(MuiTelInput,{label:\"Phone Number *\",value:formData.phone,defaultCountry:\"IN\",forceCallingCode:true,focusOnSelectCountry:true,fullWidth:true,size:\"small\",margin:\"dense\",disabled:phoneVerification.isVerified,onChange:(value,info)=>{if(!info)return;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{phone:value}));// Reset verification if phone changes\nsetPhoneVerification({isVerified:false,showOtpInput:false,otp:\"\",isProcessing:false,firebaseToken:null});sessionStorage.removeItem(\"phoneVerificationState\");cleanupRecaptcha(false);},error:formData.phone&&!isValidPhoneFormat(formData.phone),helperText:formData.phone&&!isValidPhoneFormat(formData.phone)?\"Enter valid phone number for selected country\":\"\",required:true}),/*#__PURE__*/_jsx(TextField,{label:\"Email *\",fullWidth:true,size:\"small\",margin:\"dense\",name:\"email\",value:formData.email,onChange:handleChange,required:true}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,size:\"small\",margin:\"dense\",required:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Gender *\"}),/*#__PURE__*/_jsx(Select,{value:formData.gender,label:\"Gender *\",onChange:handleChange,name:\"gender\",children:GENDERS.map(g=>/*#__PURE__*/_jsx(MenuItem,{value:g,children:g},g))})]}),orgLoadError?/*#__PURE__*/_jsx(Box,{sx:{mt:2},children:/*#__PURE__*/_jsx(Typography,{color:\"error\",fontSize:13,children:\"\\u274C Unable to load organizations. Please refresh or try again later.\"})}):/*#__PURE__*/_jsx(Autocomplete,{options:orgOptions,loading:orgLoading,filterOptions:x=>x,getOptionLabel:o=>o.label||\"\",isOptionEqualToValue:(option,value)=>{var _option$orgRef,_value$orgRef,_option$orgRef2,_value$orgRef2;return((_option$orgRef=option.orgRef)===null||_option$orgRef===void 0?void 0:_option$orgRef.id)===((_value$orgRef=value.orgRef)===null||_value$orgRef===void 0?void 0:_value$orgRef.id)&&((_option$orgRef2=option.orgRef)===null||_option$orgRef2===void 0?void 0:_option$orgRef2.type)===((_value$orgRef2=value.orgRef)===null||_value$orgRef2===void 0?void 0:_value$orgRef2.type);},value:formData.organization?{label:formData.organization.name,orgRef:formData.organization.ref,source:(_formData$organizatio4=formData.organization.ref)===null||_formData$organizatio4===void 0?void 0:_formData$organizatio4.type,orgType:formData.organization.orgType}:null,onInputChange:(e,v)=>handleOrgSearch(v),onChange:(e,value)=>handleOrgChange(value),renderInput:params=>/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Organisation *\",size:\"small\",margin:\"dense\",required:true,placeholder:\"Search for your organization...\"})),sx:{width:\"100%\"}}),showCustomOrg&&/*#__PURE__*/_jsx(TextField,{label:\"Enter Organization Name *\",fullWidth:true,size:\"small\",margin:\"dense\",required:true,value:((_formData$organizatio5=formData.organization)===null||_formData$organizatio5===void 0?void 0:_formData$organizatio5.name)||\"\",onChange:e=>{isDirtyRef.current=true;setFormData(_objectSpread(_objectSpread({},formData),{},{organization:_objectSpread(_objectSpread({},formData.organization),{},{name:e.target.value,ref:{type:\"custom\",id:null}})}));}}),showCustomOrg?/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,size:\"small\",margin:\"dense\",required:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Organization Type\"}),/*#__PURE__*/_jsxs(Select,{label:\"Organization Type\",value:((_formData$organizatio6=formData.organization)===null||_formData$organizatio6===void 0?void 0:_formData$organizatio6.orgType)||\"\",onChange:e=>{isDirtyRef.current=true;setFormData(_objectSpread(_objectSpread({},formData),{},{organization:_objectSpread(_objectSpread({},formData.organization),{},{orgType:e.target.value})}));},children:[/*#__PURE__*/_jsx(MenuItem,{value:\"Government\",children:\"Government\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Corporate\",children:\"Corporate\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Academic\",children:\"Academic\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"NGO\",children:\"NGO\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Self\",children:\"Self\"})]})]}):/*#__PURE__*/_jsx(TextField,{label:\"Organization Type\",fullWidth:true,size:\"small\",margin:\"dense\",value:((_formData$organizatio7=formData.organization)===null||_formData$organizatio7===void 0?void 0:_formData$organizatio7.orgType)||\"\",InputProps:{readOnly:true}}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,size:\"small\",margin:\"dense\",required:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Role *\"}),/*#__PURE__*/_jsx(Select,{value:formData.role,label:\"Role *\",name:\"role\",onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{role:e.target.value})),children:ROLES.map(r=>/*#__PURE__*/_jsx(MenuItem,{value:r.value,children:r.label},r.value))})]}),/*#__PURE__*/_jsxs(Box,{sx:{mt:2,border:'1px solid #e0e0e0',borderRadius:1},children:[/*#__PURE__*/_jsxs(Box,{sx:{p:1.5,cursor:'pointer',bgcolor:'#f5f5f5',borderRadius:'4px 4px 0 0',display:'flex',justifyContent:'space-between',alignItems:'center'},onClick:()=>setFormData(_objectSpread(_objectSpread({},formData),{},{_skillsOpen:!formData._skillsOpen})),children:[/*#__PURE__*/_jsxs(Typography,{fontWeight:\"bold\",fontSize:14,children:[\"Tech Skills \",((_formData$skills=formData.skills)===null||_formData$skills===void 0?void 0:_formData$skills.length)>0&&\"(\".concat(formData.skills.length,\")\")]}),/*#__PURE__*/_jsx(Typography,{children:formData._skillsOpen?'â–²':'â–¼'})]}),formData._skillsOpen&&/*#__PURE__*/_jsx(Box,{sx:{p:1.5},children:/*#__PURE__*/_jsx(Autocomplete,{multiple:true,options:SKILLS,value:formData.skills||[],onChange:(event,newValue)=>{isDirtyRef.current=true;const unique=Array.from(new Set(newValue));if(unique.length<=6){setFormData(_objectSpread(_objectSpread({},formData),{},{skills:unique}));}else{setFormData(_objectSpread(_objectSpread({},formData),{},{skills:unique.slice(0,6)}));}},disableCloseOnSelect:true,limitTags:3,renderInput:params=>{var _formData$skills2;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Select up to 6 skills *\",placeholder:\"Choose your skills\",size:\"small\",helperText:((_formData$skills2=formData.skills)===null||_formData$skills2===void 0?void 0:_formData$skills2.length)===6?\"Maximum 6 skills reached\":\"These help us recommend better opportunities.\"}));}})})]}),/*#__PURE__*/_jsxs(Box,{sx:{mt:2,border:'1px solid #e0e0e0',borderRadius:1},children:[/*#__PURE__*/_jsxs(Box,{sx:{p:1.5,cursor:'pointer',bgcolor:'#f5f5f5',borderRadius:'4px 4px 0 0',display:'flex',justifyContent:'space-between',alignItems:'center'},onClick:()=>setFormData(_objectSpread(_objectSpread({},formData),{},{_socialOpen:!formData._socialOpen})),children:[/*#__PURE__*/_jsxs(Typography,{fontWeight:\"bold\",fontSize:14,children:[\"Social Accounts \",(githubStatus.verified||discordVerified)&&'âœ“']}),/*#__PURE__*/_jsx(Typography,{children:formData._socialOpen?'â–²':'â–¼'})]}),formData._socialOpen&&/*#__PURE__*/_jsxs(Box,{sx:{p:1.5},children:[/*#__PURE__*/_jsx(Typography,{fontWeight:\"bold\",fontSize:14,mb:1,children:\"GitHub:\"}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",flexDirection:\"column\",gap:1,width:\"100%\",mt:1},children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",onClick:handleVerifyGithub,disabled:githubStatus.verified||githubStatus.verifying,sx:{borderRadius:\"10px\",fontWeight:\"bold\",backgroundColor:githubStatus.verified?\"#4CAF50\":\"#000\",color:\"white\",\"&:disabled\":{backgroundColor:githubStatus.verified?\"#4CAF50\":\"#9e9e9e\",color:\"white\"}},children:githubStatus.verified?\"GitHub Verified âœ“\":\"Verify GitHub\"}),githubStatus.verified&&/*#__PURE__*/_jsxs(Typography,{fontSize:13,color:\"#2e7d32\",children:[\"\\u2713 Verified as: \",githubStatus.username]}),!githubStatus.verified&&githubStatus.error&&/*#__PURE__*/_jsxs(Typography,{fontSize:13,color:\"#d32f2f\",children:[\"\\u274C \",githubStatus.error]})]}),/*#__PURE__*/_jsx(Typography,{fontWeight:\"bold\",fontSize:14,mt:2,mb:1,children:\"Discord:\"}),/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\",flexDirection:\"column\",gap:1,width:\"100%\",mt:1},children:discordVerified?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",disabled:true,sx:{borderRadius:\"10px\",fontWeight:\"bold\",backgroundColor:\"#4CAF50\",color:\"white\",\"&.Mui-disabled\":{backgroundColor:\"#4CAF50\",color:\"white\"}},children:\"DISCORD VERIFIED \\u2713\"}),/*#__PURE__*/_jsxs(Typography,{fontSize:13,color:\"#2e7d32\",children:[\"\\u2713 Verified as: \",sessionStorage.getItem(\"discordUsername\")]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",sx:{borderRadius:\"10px\",fontWeight:\"bold\",backgroundColor:\"#1E4DD8\",\"&:hover\":{backgroundColor:\"#1536A1\"}},onClick:handleVerifyDiscord,disabled:discordStatus.verifying,startIcon:discordStatus.verifying?/*#__PURE__*/_jsx(CircularProgress,{size:20,color:\"inherit\"}):null,children:discordStatus.verifying?\"REDIRECTING...\":\"VERIFY DISCORD\"}),discordNotMember&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"outlined\",sx:{borderRadius:\"10px\",fontWeight:\"bold\"},onClick:()=>window.open(DISCORD_INVITE,\"_blank\"),children:\"JOIN DISCORD SERVER\"}),/*#__PURE__*/_jsx(Typography,{fontSize:13,color:\"#d32f2f\",children:\"\\u274C You must join our Discord server before verification.\"})]})]})}),/*#__PURE__*/_jsx(Typography,{fontWeight:\"bold\",fontSize:14,mt:2,mb:1,children:\"LinkedIn URL (Optional):\"}),/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\",flexDirection:\"column\",gap:1,width:\"100%\"},children:/*#__PURE__*/_jsx(TextField,{label:\"Enter LinkedIn profile URL\",placeholder:\"https://www.linkedin.com/in/username\",value:formData.linkedinId,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{linkedinId:e.target.value})),size:\"small\",fullWidth:true})})]})]}),/*#__PURE__*/_jsxs(Box,{mt:2,children:[/*#__PURE__*/_jsx(Typography,{fontWeight:\"bold\",fontSize:14,mb:1,children:\"Phone Verification:\"}),/*#__PURE__*/_jsx(\"div\",{id:\"recaptcha-container-update\"}),!phoneVerification.isVerified&&/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:1,mt:1,children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",fullWidth:true,onClick:handleRequestOtp,disabled:phoneVerification.isProcessing||timer>0,children:timer>0?\"Resend in \".concat(timer,\"s\"):phoneVerification.isProcessing?\"Sending...\":phoneVerification.showOtpInput?\"Resend OTP\":\"Send OTP\"}),phoneVerification.showOtpInput&&/*#__PURE__*/_jsx(TextField,{label:\"Enter 6-digit OTP\",size:\"small\",value:phoneVerification.otp,onChange:e=>{const onlyNums=e.target.value.replace(/\\D/g,\"\");if(onlyNums.length<=6)setPhoneVerification(_objectSpread(_objectSpread({},phoneVerification),{},{otp:onlyNums}));},inputProps:{inputMode:\"numeric\",pattern:\"[0-9]*\",maxLength:6,onKeyPress:e=>{if(!/[0-9]/.test(e.key))e.preventDefault();}}}),phoneVerification.showOtpInput&&/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handleVerifyOtp,disabled:phoneVerification.isProcessing,children:phoneVerification.isProcessing?/*#__PURE__*/_jsx(CircularProgress,{size:18,color:\"inherit\"}):\"Verify\"})]}),phoneVerification.isVerified&&/*#__PURE__*/_jsx(Typography,{color:\"success.main\",mt:1,children:\"\\u2705 Phone verified successfully!\"})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:2,mt:3,children:[/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",fullWidth:true,disabled:!isFormComplete(),children:\"Submit\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",fullWidth:true,onClick:handleDefer,disabled:oauthInProgress,children:\"Defer\"})]})]})]})});};export default UpdateForm;","map":{"version":3,"names":["React","useEffect","useState","useRef","useSearchParams","API","validateToken","submitForm","deferForm","optOut","searchOrgs","auth","signInWithPhoneNumber","RecaptchaVerifier","GithubAuthProvider","signInWithPopup","getAdditionalUserInfo","signOut","Swal","Box","Paper","Typography","TextField","Button","FormControl","InputLabel","Select","MenuItem","CircularProgress","Stack","Divider","Autocomplete","MuiTelInput","parsePhoneNumber","isValidPhoneFormat","logo1","logo2","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ROLES","value","label","ROLE_MAP","R004","GENDERS","SKILLS","githubRegex","linkedinRegex","DISCORD_REDIRECT","DISCORD_INVITE","generateOAuthState","Math","random","toString","substring","Date","now","DISCORD_OAUTH","state","encodeURIComponent","UpdateForm","_formData$organizatio4","_formData$organizatio5","_formData$organizatio6","_formData$organizatio7","_formData$skills","searchParams","token","get","formData","setFormData","fullName","email","phone","gender","organization","role","skills","githubId","githubUrl","discordId","linkedinId","phoneVerification","setPhoneVerification","isVerified","showOtpInput","otp","isProcessing","firebaseToken","status","setStatus","errorMessage","setErrorMessage","interested","setInterested","optoutReason","setOptoutReason","optoutProcessing","setOptoutProcessing","timer","setTimer","orgLoadError","setOrgLoadError","showCustomOrg","setShowCustomOrg","orgOptions","setOrgOptions","orgLoading","setOrgLoading","isDirtyRef","fadeOut","setFadeOut","countdown","setCountdown","timeRemaining","setTimeRemaining","isSubmitting","setIsSubmitting","recaptchaCleanedUp","recaptchaContainerIdRef","recaptchaWidgetIdRef","cleanupRecaptcha","aggressive","arguments","length","undefined","console","log","concat","window","recaptchaVerifier","clear","e","warn","grecaptcha","reset","current","container","document","getElementById","innerHTML","textContent","Array","from","attributes","forEach","attr","name","startsWith","removeAttribute","isFormComplete","_formData$fullName","_formData$email","_formData$phone","hasValidOrg","ref","type","orgType","requiredFieldsFilled","trim","socialVerified","githubStatus","verified","discordVerified","phoneVerified","setGithubStatus","verifying","username","avatar","error","setDiscordVerified","sessionStorage","getItem","discordNotMember","setDiscordNotMember","discordStatus","setDiscordStatus","oauthInProgress","setOauthInProgress","showAlert","text","icon","fire","confirmButtonColor","isReturningFromOAuth","savedFormData","savedToken","parsedData","JSON","parse","prev","_objectSpread","savedPhoneVerification","parsedPhoneData","post","inProgress","catch","err","removeItem","activateAndValidate","activateRes","res","data","valid","_partialRes$data","_activateRes$data","partialRes","partial","techStack","activatedAt","activatedTime","getTime","elapsed","floor","remaining","max","setTimeout","alert","clearTimeout","message","_err$response","_err$response$data","errorMsg","response","setInterval","_unused","clearInterval","interval","t","url","notMember","discordUsername","close","verifiedAt","ageInMs","oneHourInMs","loadInitialOrgs","results","countdownInterval","title","html","confirmButtonText","handleVerifyGithub","_info$profile","provider","result","info","githubUsername","githubAvatar","profile","avatar_url","Error","verifiedUrl","setItem","_err$message","_err$message2","code","includes","handleVerifyDiscord","stringify","toISOString","location","href","handleOrgSearch","searchTerm","handleOrgChange","source","id","orgRef","handleChange","target","handleRequestOtp","phoneValidation","isValid","p","uniqueContainerId","newDiv","createElement","className","appendChild","Promise","resolve","targetContainer","size","callback","expired-callback","widgetId","render","renderError","e164Phone","e164","confirmationResult","_err$message3","handleVerifyOtp","confirm","user","getIdToken","verifiedState","handleSubmit","_formData$fullName2","_formData$email2","preventDefault","showCancelButton","isConfirmed","_formData$fullName3","_formData$email3","_formData$organizatio","_formData$organizatio2","_formData$organizatio3","_formData$githubUrl","_formData$githubId","_formData$discordId","_formData$linkedinId","_finalData$token","_finalData$firebaseTo","cleanedData","finalData","Object","keys","key","delete","_err$response2","_err$response3","_err$response4","_err$response4$data","_err$response5","_err$response6","_err$response6$data","userId","handleDefer","confirmDefer","_err$response7","_err$response7$data","handleOptOut","reason","_err$response8","_err$response8$data","align","children","sx","minHeight","display","justifyContent","alignItems","bgcolor","width","maxWidth","borderRadius","boxShadow","textAlign","variant","color","fontWeight","gutterBottom","mb","my","mx","mt","border","flex","opacity","transition","spacing","direction","src","alt","style","height","backgroundColor","gap","fontSize","String","padStart","fullWidth","onChange","multiline","rows","placeholder","onClick","disabled","component","onSubmit","margin","required","defaultCountry","forceCallingCode","focusOnSelectCountry","helperText","map","g","options","loading","filterOptions","x","getOptionLabel","o","isOptionEqualToValue","option","_option$orgRef","_value$orgRef","_option$orgRef2","_value$orgRef2","onInputChange","v","renderInput","params","InputProps","readOnly","r","cursor","_skillsOpen","multiple","event","newValue","unique","Set","slice","disableCloseOnSelect","limitTags","_formData$skills2","_socialOpen","flexDirection","startIcon","open","onlyNums","replace","inputProps","inputMode","pattern","maxLength","onKeyPress","test"],"sources":["/home/rcts/Email-differ/Frontend/src/pages/Signin-otp/UpdateForm.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { useSearchParams } from \"react-router-dom\";\nimport API, {\n  validateToken,\n  submitForm,\n  deferForm,\n  optOut,\n  searchOrgs,\n} from \"../../api/apiService\";\nimport { auth, signInWithPhoneNumber, RecaptchaVerifier } from \"../../firebase\";\nimport {\n  GithubAuthProvider,\n  signInWithPopup,\n  getAdditionalUserInfo,\n  signOut,\n} from \"firebase/auth\";\n\nimport Swal from \"sweetalert2\";\nimport {\n  Box,\n  Paper,\n  Typography,\n  TextField,\n  Button,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  CircularProgress,\n  Stack,\n  Divider,\n  Autocomplete,\n} from \"@mui/material\";\nimport { MuiTelInput } from 'mui-tel-input';\nimport { parsePhoneNumber, isValidPhoneFormat } from \"../../utils/phoneUtils\";\nimport logo1 from \"../../assets/badal_logo.png\";\nimport logo2 from \"../../assets/c4gt_logo.png\";\n\n\n// âœ… Role List (matching SignUpPage)\nconst ROLES = [\n  { value: \"R004\", label: \"Developer\" },\n];\n\n// âœ… Role codes to backend strings (consistent with SignUpPage)\n// eslint-disable-next-line no-unused-vars\nconst ROLE_MAP = {\n  R004: \"Developer\",\n  \n};\n\nconst GENDERS = [\"Male\", \"Female\", \"Other\", \"Prefer not to say\"];\n\n// âœ… Tech Skills (same as SignUpPage)\nconst SKILLS = [\n  \"Frontend Development\",\n  \"Backend Development\",\n  \"Full Stack Development\",\n  \"UI/UX Design\",\n  \"Data Science\",\n  \"Machine Learning\",\n  \"DevOps\",\n  \"Cloud Computing\",\n  \"Cybersecurity\",\n  \"Mobile App Development\",\n  \"Blockchain\",\n  \"Product Management\",\n  \"Public Policy\",\n  \"Research\",\n  \"Technical Writing\",\n];\n\n// âœ… Validation regex (available for future use)\n// eslint-disable-next-line no-unused-vars\nconst githubRegex = /^https:\\/\\/(www\\.)?github\\.com\\/[A-Za-z0-9_-]+\\/?$/;\n// eslint-disable-next-line no-unused-vars\nconst linkedinRegex = /^https:\\/\\/(www\\.)?linkedin\\.com\\/in\\/[A-Za-z0-9_-]+\\/?$/;\n\nconst DISCORD_REDIRECT = \"https://pl-app.iiit.ac.in/rcts/account-setup/discord-callback\";\nconst DISCORD_INVITE = \"https://discord.gg/BsbzbUHz\";\n\n// âœ… Generate OAuth state for CSRF protection\nconst generateOAuthState = () => {\n  return Math.random().toString(36).substring(2) + Date.now().toString(36);\n};\n\nconst DISCORD_OAUTH = (state) =>\n  \"https://discord.com/oauth2/authorize\" +\n  \"?client_id=1450787791834447874\" +\n  \"&redirect_uri=\" +\n  encodeURIComponent(DISCORD_REDIRECT) +\n  \"&response_type=code\" +\n  \"&scope=identify%20guilds\" +\n  \"&state=\" + encodeURIComponent(state);\n\n// LinkedIn OAuth removed: collecting URL via input field instead\n\nconst UpdateForm = () => {\n  const [searchParams] = useSearchParams();\n  const token = searchParams.get(\"token\");\n\n  const [formData, setFormData] = useState({\n    fullName: \"\",\n    email: \"\",\n    phone: \"\",\n    gender: \"\",\n    organization: null,\n    role: \"\",\n    skills: [],\n    githubId: \"\",\n    githubUrl: \"\",\n    discordId: \"\",\n    linkedinId: \"\",\n  });\n\n  const [phoneVerification, setPhoneVerification] = useState({\n    isVerified: false,\n    showOtpInput: false,\n    otp: \"\",\n    isProcessing: false,\n    firebaseToken: null, // âœ… Store Firebase token for form submission\n  });\n\n  const [status, setStatus] = useState(\"loading\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [interested, setInterested] = useState(null);\n  const [optoutReason, setOptoutReason] = useState(\"\");\n  const [optoutProcessing, setOptoutProcessing] = useState(false);\n  const [timer, setTimer] = useState(0);\n  \n  // ---------------- ORG STATE ----------------\n  const [orgLoadError, setOrgLoadError] = useState(false);\n  const [showCustomOrg, setShowCustomOrg] = useState(false);\n  const [orgOptions, setOrgOptions] = useState([]);\n  const [orgLoading, setOrgLoading] = useState(false);\n  const isDirtyRef = useRef(false);\n  const [fadeOut, setFadeOut] = useState(false);\n  const [countdown, setCountdown] = useState(5);\n  const [timeRemaining, setTimeRemaining] = useState(600); // 10 minutes in seconds\n  const [isSubmitting, setIsSubmitting] = useState(false); // âœ… Prevent double submit\n  const recaptchaCleanedUp = useRef(false); // âœ… Track recaptcha cleanup\n  const recaptchaContainerIdRef = useRef(0); // âœ… Track unique container IDs\n  const recaptchaWidgetIdRef = useRef(null); // âœ… Track widget ID for proper cleanup\n\n  // âœ… Reusable reCAPTCHA cleanup function\n  const cleanupRecaptcha = async (aggressive = false) => {\n    console.log(`ðŸ§¹ Cleaning up reCAPTCHA (aggressive: ${aggressive})...`);\n    \n    // Step 1: Clear Firebase RecaptchaVerifier\n    if (window.recaptchaVerifier) {\n      try {\n        await window.recaptchaVerifier.clear();\n        console.log('âœ“ Cleared recaptchaVerifier');\n      } catch (e) {\n        console.warn('Failed to clear recaptchaVerifier:', e);\n      }\n      delete window.recaptchaVerifier;\n      window.recaptchaVerifier = null;\n    }\n    \n    // Step 2: Reset ALL grecaptcha widgets aggressively\n    if (window.grecaptcha && window.grecaptcha.reset) {\n      try {\n        // Try to reset by widget ID first\n        if (recaptchaWidgetIdRef.current !== null) {\n          try {\n            window.grecaptcha.reset(recaptchaWidgetIdRef.current);\n            console.log(`âœ“ Reset grecaptcha widget ${recaptchaWidgetIdRef.current}`);\n          } catch (e) {\n            console.warn('Failed to reset specific widget:', e);\n          }\n        }\n        // Always try to reset without ID (resets all widgets)\n        try {\n          window.grecaptcha.reset();\n          console.log('âœ“ Reset all grecaptcha widgets');\n        } catch (e) {\n          console.warn('Failed to reset all widgets:', e);\n        }\n      } catch (e) {\n        console.warn('Failed to reset grecaptcha:', e);\n      }\n    }\n    recaptchaWidgetIdRef.current = null;\n    \n    // Step 3: Completely remove and recreate DOM container\n    const container = document.getElementById(\"recaptcha-container-update\");\n    if (container) {\n      // Remove ALL content and event listeners\n      container.innerHTML = \"\";\n      container.textContent = \"\";\n      \n      // Remove all data attributes that grecaptcha might have added\n      Array.from(container.attributes).forEach(attr => {\n        if (attr.name.startsWith('data-')) {\n          container.removeAttribute(attr.name);\n        }\n      });\n      \n      console.log('âœ“ Cleared DOM container completely');\n    }\n    \n    recaptchaCleanedUp.current = true;\n  };\n\n  // Form validation - check if all required fields are filled\n  const isFormComplete = () => {\n    // âœ… Check if submission is in progress\n    if (isSubmitting) return false;\n    \n    // âœ… Check organization object structure\n    const hasValidOrg =\n      formData.organization &&\n      formData.organization.name &&\n      formData.organization.ref &&\n      formData.organization.ref.type &&\n      (\n        formData.organization.ref.type !== \"custom\" ||\n        formData.organization.orgType\n      );\n    \n    const requiredFieldsFilled = \n      formData.fullName?.trim() !== \"\" &&\n      formData.email?.trim() !== \"\" &&\n      formData.phone?.trim() !== \"\" &&\n      formData.gender !== \"\" &&\n      hasValidOrg &&\n      formData.role !== \"\";\n    \n    const socialVerified = githubStatus.verified && discordVerified;\n    const phoneVerified = phoneVerification.isVerified;\n    \n    return requiredFieldsFilled && socialVerified && phoneVerified;\n  };\n\n  // OAuth verification states\n  const [githubStatus, setGithubStatus] = useState({\n    verifying: false,\n    verified: false,\n    username: \"\",\n    avatar: \"\", // âœ… Store avatar URL\n    error: \"\",\n  });\n  const [discordVerified, setDiscordVerified] = useState(\n    sessionStorage.getItem(\"discordVerified\") === \"true\"\n  );\n  const [discordNotMember, setDiscordNotMember] = useState(\n    sessionStorage.getItem(\"discordNotMember\") === \"true\"\n  );\n  const [discordStatus, setDiscordStatus] = useState({\n    verifying: false,\n  });\n  const [oauthInProgress, setOauthInProgress] = useState(false);\n\n  // ðŸ”” SweetAlert helper\n  const showAlert = (text, icon = \"info\") =>\n    Swal.fire({\n      text,\n      icon,\n      confirmButtonColor: \"#1E4DD8\",\n    });\n\n  // âœ… Restore UpdateForm context when returning from OAuth\n  useEffect(() => {\n    const isReturningFromOAuth = sessionStorage.getItem(\"isNavigating\");\n    if (isReturningFromOAuth) {\n      const savedFormData = sessionStorage.getItem(\"updateFormData\");\n      const savedToken = sessionStorage.getItem(\"updateFormToken\");\n      \n      if (savedFormData) {\n        try {\n          const parsedData = JSON.parse(savedFormData);\n          setFormData(prev => ({ ...prev, ...parsedData }));\n        } catch (e) {\n          console.error(\"Failed to restore form data:\", e);\n        }\n      }\n      \n      // âœ… Restore phone verification state\n      const savedPhoneVerification = sessionStorage.getItem(\"phoneVerificationState\");\n      if (savedPhoneVerification) {\n        try {\n          const parsedPhoneData = JSON.parse(savedPhoneVerification);\n          setPhoneVerification(prev => ({\n            ...prev,\n            isVerified: parsedPhoneData.isVerified,\n            firebaseToken: parsedPhoneData.firebaseToken,\n            showOtpInput: false, // Hide OTP input since already verified\n          }));\n          console.log(\"âœ… Restored phone verification state from sessionStorage\");\n        } catch (e) {\n          console.error(\"Failed to restore phone verification:\", e);\n        }\n      }\n      \n      // Clear OAuth in progress flag on backend\n      if (savedToken) {\n        API.post('/form/oauth-status', { token: savedToken, inProgress: false })\n          .catch(err => console.error(\"Failed to clear OAuth flag:\", err));\n      }\n      \n      sessionStorage.removeItem(\"isNavigating\");\n      sessionStorage.removeItem(\"updateFormData\");\n      sessionStorage.removeItem(\"updateFormToken\");\n      setOauthInProgress(false);\n    }\n  }, []);\n\n  // âœ… Token validation\n  useEffect(() => {\n    const activateAndValidate = async () => {\n      if (!token) {\n        setStatus(\"invalid\");\n        setErrorMessage(\"No token provided\");\n        return;\n      }\n\n      try {\n        // âœ… Activate token and get activatedAt timestamp\n        const activateRes = await API.post(\"/form/activate\", { token });\n        const res = await validateToken(token);\n\n        if (res.data.valid) {\n          setStatus(\"valid\");\n\n          const partialRes = await API.get(`/form/partial/${token}`);\n          if (partialRes.data?.data) {\n            const partial = partialRes.data.data;\n\n            setFormData((prev) => ({\n              ...prev,\n              ...partial,\n              skills: partial.techStack || partial.skills || [],   // âœ… map correctly\n            }));\n          }\n\n          // âœ… Calculate time remaining from backend activatedAt timestamp\n          if (activateRes.data?.activatedAt) {\n            const activatedTime = new Date(activateRes.data.activatedAt).getTime();\n            const now = Date.now();\n            const elapsed = Math.floor((now - activatedTime) / 1000); // seconds elapsed\n            const remaining = Math.max(0, 600 - elapsed); // 10 minutes = 600 seconds\n            setTimeRemaining(remaining);\n          }\n\n          // â° Token expires after 7 days (matches backend expiry window)\n          const timer = setTimeout(() => {\n            setStatus(\"expired\");\n            alert(\n              \"This link has expired. Please check your email for a new update link.\"\n            );\n          }, 7 * 24 * 60 * 60 * 1000); // 7 days\n\n          return () => clearTimeout(timer);\n        } else {\n          setStatus(\"invalid\");\n          setErrorMessage(res.data.message || \"Invalid token\");\n        }\n      } catch (err) {\n        const errorMsg = err.response?.data?.message || \"Failed to load form\";\n        \n        // âœ… Check if form was already submitted\n        if (errorMsg === \"Form already submitted\") {\n          setStatus(\"submitted\");\n        } else {\n          setStatus(\"invalid\");\n          setErrorMessage(errorMsg);\n        }\n      }\n    };\n    activateAndValidate();\n  }, [token]);\n\n  // âœ… Clean up reCAPTCHA on component unmount\n  useEffect(() => {\n    return () => {\n      cleanupRecaptcha(true); // Aggressive cleanup on unmount\n    };\n  }, []);\n\n  // âœ… Auto-save every 5 seconds (only if form data changed)\n  useEffect(() => {\n    if (status !== \"valid\") return;\n    const timer = setInterval(async () => {\n      // âœ… Only save if form data has changed\n      if (!isDirtyRef.current) return;\n      \n      try {\n        await API.post(`/form/save-partial`, { token, data: formData });\n        isDirtyRef.current = false; // âœ… Reset dirty flag after successful save\n      } catch {}\n    }, 5000);\n    return () => clearInterval(timer);\n  }, [formData, status, token]);\n\n  // â± Resend timer\n  useEffect(() => {\n    if (timer > 0) {\n      const interval = setInterval(() => setTimer((t) => t - 1), 1000);\n      return () => clearInterval(interval);\n    }\n  }, [timer]);\n  \n  // Restore GitHub verification from sessionStorage\n  useEffect(() => {\n    const verified = sessionStorage.getItem(\"githubVerified\") === \"true\";\n    const username = sessionStorage.getItem(\"githubUsername\");\n    const url = sessionStorage.getItem(\"githubUrl\");\n\n    if (verified && username && url) {\n      setGithubStatus({\n        verifying: false,\n        verified: true,\n        username,\n        error: \"\",\n      });\n      setFormData(prev => ({ ...prev, githubUrl: url }));\n    }\n  }, []);\n  \n  // Restore Discord verification from sessionStorage\n  useEffect(() => {\n    const verified = sessionStorage.getItem(\"discordVerified\") === \"true\";\n    const notMember = sessionStorage.getItem(\"discordNotMember\") === \"true\";\n\n    setDiscordVerified(verified);\n    setDiscordNotMember(notMember);\n\n    if (verified) {\n      const discordUsername = sessionStorage.getItem(\"discordUsername\");\n      if (discordUsername) {\n        // Use username (display name like \"user#1234\"), not numeric ID\n        setFormData((prev) => ({ ...prev, discordId: discordUsername }));\n      }\n    }\n  }, []);\n  // âœ… Auto-close tab + countdown when deferred\n  useEffect(() => {\n    if (status === \"deferred\") {\n      const interval = setInterval(() => {\n        setCountdown((prev) => {\n          if (prev <= 1) {\n            window.close(); // auto-close after countdown\n            clearInterval(interval);\n            return 0;\n          }\n          return prev - 1;\n        });\n      }, 1000);\n      return () => clearInterval(interval);\n    }\n  }, [status]);\n\n  // Restore GitHub verification from sessionStorage\n  useEffect(() => {\n    const verified = sessionStorage.getItem(\"githubVerified\") === \"true\";\n    const username = sessionStorage.getItem(\"githubUsername\");\n    const url = sessionStorage.getItem(\"githubUrl\");\n\n    if (verified && username && url) {\n      setGithubStatus({\n        verifying: false,\n        verified: true,\n        username,\n        error: \"\",\n      });\n      setFormData(prev => ({ ...prev, githubUrl: url }));\n    }\n  }, []);\n\n  // âœ… Restore phone verification from sessionStorage on mount\n  useEffect(() => {\n    const savedPhoneVerification = sessionStorage.getItem(\"phoneVerificationState\");\n    if (savedPhoneVerification) {\n      try {\n        const parsedPhoneData = JSON.parse(savedPhoneVerification);\n        // Check if verification is still recent (within 1 hour)\n        const verifiedAt = new Date(parsedPhoneData.verifiedAt);\n        const now = new Date();\n        const ageInMs = now - verifiedAt;\n        const oneHourInMs = 60 * 60 * 1000;\n        \n        if (ageInMs < oneHourInMs) {\n          setPhoneVerification(prev => ({\n            ...prev,\n            isVerified: parsedPhoneData.isVerified,\n            firebaseToken: parsedPhoneData.firebaseToken,\n            showOtpInput: false,\n          }));\n          console.log(\"âœ… Restored phone verification from sessionStorage on mount\");\n        } else {\n          // Expired - clear it\n          sessionStorage.removeItem(\"phoneVerificationState\");\n          console.log(\"âš ï¸ Phone verification expired, cleared from sessionStorage\");\n        }\n      } catch (e) {\n        console.error(\"Failed to restore phone verification on mount:\", e);\n      }\n    }\n  }, []);\n\n  // âœ… Load initial org options on mount (matching Signup)\n  useEffect(() => {\n    const loadInitialOrgs = async () => {\n      try {\n        const results = await searchOrgs(\"\");\n        setOrgOptions(results || []);\n      } catch (err) {\n        console.error(\"Failed to load initial organizations:\", err);\n        setOrgLoadError(true);\n      }\n    };\n\n    loadInitialOrgs();\n  }, []);\n\n  // âœ… 10-minute countdown timer with auto-expiry\n  useEffect(() => {\n    if (status === \"valid\" && timeRemaining > 0) {\n      const countdownInterval = setInterval(() => {\n        setTimeRemaining((prev) => {\n          if (prev <= 1) {\n            clearInterval(countdownInterval);\n            setStatus(\"expired\");\n            Swal.fire({\n              icon: \"warning\",\n              title: \"Token Expired\",\n              html: `\n                <p>Your form session has expired after 10 minutes.</p>\n                <p><strong>What happens next?</strong></p>\n                <ul style=\"text-align: left; margin: 10px 20px;\">\n                  <li>This form will be automatically closed</li>\n                  <li>You will receive a new reminder email within 24 hours</li>\n                  <li>You can complete the form using the new link</li>\n                </ul>\n              `,\n              confirmButtonColor: \"#1E4DD8\",\n              confirmButtonText: \"OK\",\n            });\n            return 0;\n          }\n          return prev - 1;\n        });\n      }, 1000);\n\n      return () => clearInterval(countdownInterval);\n    }\n  }, [status, timeRemaining]);\n\n  // âœ… Verify GitHub\n  const handleVerifyGithub = async () => {\n    setGithubStatus({\n      verifying: true,\n      verified: false,\n      username: \"\",\n      avatar: \"\",\n      error: \"\",\n    });\n\n    try {\n      const provider = new GithubAuthProvider();\n      const result = await signInWithPopup(auth, provider);\n\n      const info = getAdditionalUserInfo(result);\n      const githubUsername = info?.username;\n      const githubAvatar = info?.profile?.avatar_url || \"\";\n\n      if (!githubUsername) throw new Error(\"Unable to retrieve GitHub username\");\n\n      const verifiedUrl = `https://github.com/${githubUsername}`;\n      \n      setFormData(prev => ({ ...prev, githubUrl: verifiedUrl }));\n\n      // âœ… Store in sessionStorage for persistence\n      sessionStorage.setItem(\"githubVerified\", \"true\");\n      sessionStorage.setItem(\"githubUsername\", githubUsername);\n      sessionStorage.setItem(\"githubUrl\", verifiedUrl);\n      sessionStorage.setItem(\"githubAvatar\", githubAvatar);\n\n      setGithubStatus({\n        verifying: false,\n        verified: true,\n        username: githubUsername,\n        avatar: githubAvatar,\n        error: \"\",\n      });\n\n      await signOut(auth);\n      showAlert(\"GitHub verified successfully!\", \"success\");\n    } catch (err) {\n      console.error(\"GitHub verify error:\", err);\n      \n      // âœ… Handle different error types\n      let errorMsg = \"GitHub verification failed. Please try again.\";\n      \n      if (err.code === \"auth/popup-closed-by-user\") {\n        errorMsg = \"Verification cancelled. Please try again.\";\n      } else if (err.code === \"auth/popup-blocked\") {\n        errorMsg = \"Popup was blocked by your browser. Please allow popups for this site and try again.\";\n      } else if (err.code === \"auth/cancelled-popup-request\") {\n        errorMsg = \"Verification cancelled. Please try again.\";\n      } else if (err.message?.includes(\"rate\") || err.message?.includes(\"limit\")) {\n        errorMsg = \"Too many verification attempts. Please wait a few minutes and try again.\";\n      }\n      \n      setGithubStatus({\n        verifying: false,\n        verified: false,\n        username: \"\",\n        avatar: \"\",\n        error: errorMsg,\n      });\n      \n      if (err.code !== \"auth/popup-closed-by-user\") {\n        showAlert(errorMsg, \"error\");\n      }\n    }\n  };\n\n  // âœ… Verify Discord (redirect-based)\n  const handleVerifyDiscord = async () => {\n    try {\n      // âœ… Set verifying state\n      setDiscordStatus({ verifying: true });\n      \n      // âœ… Generate OAuth state for CSRF protection\n      const state = generateOAuthState();\n      sessionStorage.setItem(\"discordOAuthState\", state);\n      \n      // âœ… Clear stale member flag before starting\n      sessionStorage.removeItem(\"discordNotMember\");\n      setDiscordNotMember(false);\n      \n      // Mark OAuth as in progress to extend token expiry\n      await API.post('/form/oauth-status', { token, inProgress: true });\n      \n      // Save form data and token before redirect\n      sessionStorage.setItem(\"updateFormData\", JSON.stringify(formData));\n      sessionStorage.setItem(\"updateFormToken\", token);\n      \n      // âœ… Save phone verification state if verified\n      if (phoneVerification.isVerified && phoneVerification.firebaseToken) {\n        sessionStorage.setItem(\"phoneVerificationState\", JSON.stringify({\n          isVerified: true,\n          firebaseToken: phoneVerification.firebaseToken,\n          verifiedAt: new Date().toISOString(),\n        }));\n      }\n      sessionStorage.setItem(\"oauthReturnPath\", `/update-form?token=${token}`);\n      \n      setOauthInProgress(true);\n      \n      // âœ… Show loading state briefly before redirect\n      showAlert(\"Redirecting to Discord...\", \"info\");\n      \n      // Redirect to Discord OAuth with state\n      setTimeout(() => {\n        window.location.href = DISCORD_OAUTH(state);\n      }, 500);\n    } catch (err) {\n      console.error(\"Failed to mark OAuth in progress:\", err);\n      setOauthInProgress(false); // âœ… Clear flag to allow retry\n      setDiscordStatus({ verifying: false }); // âœ… Reset verifying state\n      showAlert(\"Failed to start Discord verification. Please try again.\", \"error\");\n    }\n  };\n\n  // âœ… Handle org search (like Signup)\n  const handleOrgSearch = async (searchTerm) => {\n    if (!searchTerm || searchTerm.trim() === \"\") {\n      setOrgLoading(true);\n      try {\n        const results = await searchOrgs(\"\");\n        setOrgOptions(results || []);\n      } catch (err) {\n        console.error(\"Org search error:\", err);\n        setOrgOptions([]);\n      } finally {\n        setOrgLoading(false);\n      }\n      return;\n    }\n\n    if (searchTerm.length < 2) {\n      return;\n    }\n\n    setOrgLoading(true);\n    try {\n      const results = await searchOrgs(searchTerm);\n      setOrgOptions(results || []);\n    } catch (err) {\n      console.error(\"Org search error:\", err);\n      setOrgOptions([]);\n    } finally {\n      setOrgLoading(false);\n    }\n  };\n\n  // âœ… Handle organization change (matching Signup structure)\n  const handleOrgChange = (value) => {\n    isDirtyRef.current = true;\n\n    if (!value) {\n      setShowCustomOrg(false);\n      setFormData({ ...formData, organization: null });\n      return;\n    }\n\n    if (value.source === \"custom\") {\n      setShowCustomOrg(true);\n      setFormData({\n        ...formData,\n        organization: {\n          source: \"custom\",\n          ref: { type: \"custom\", id: null },\n          name: \"\",\n          orgType: \"\"\n        }\n      });\n    } else {\n      setShowCustomOrg(false);\n      setFormData({\n        ...formData,\n        organization: {\n          source: value.source,\n          ref: value.orgRef,\n          name: value.label,\n          orgType: value.orgType\n        }\n      });\n    }\n  };\n\n  // âœ… Handle changes\n  const handleChange = (e) => {\n    isDirtyRef.current = true;\n    const { name, value } = e.target;\n\n    setFormData({ ...formData, [name]: value });\n  };\n\n  // âœ… Request OTP\n  const handleRequestOtp = async () => {\n    const phoneValidation = parsePhoneNumber(formData.phone);\n\n    if (!phoneValidation.isValid) {\n      return showAlert(\n        \"Please enter a valid phone number.\",\n        \"warning\"\n      );\n    }\n\n    if (timer > 0)\n      return showAlert(`Please wait ${timer}s before resending OTP.`, \"info\");\n\n    // âœ… Prevent multiple rapid clicks\n    if (phoneVerification.isProcessing) {\n      console.log('âš ï¸ OTP request already in progress');\n      return;\n    }\n\n    setPhoneVerification((p) => ({ ...p, isProcessing: true }));\n\n    try {\n      // âœ… Use aggressive cleanup utility\n      await cleanupRecaptcha(true);\n      \n      // Generate unique container ID\n      recaptchaContainerIdRef.current += 1;\n      const uniqueContainerId = `recaptcha-container-update-${recaptchaContainerIdRef.current}`;\n      \n      // Recreate container\n      const container = document.getElementById(\"recaptcha-container-update\");\n      if (!container) {\n        console.error('âŒ recaptcha-container-update not found in DOM');\n        throw new Error('reCAPTCHA container not found');\n      }\n      \n      // Create fresh inner div\n      const newDiv = document.createElement('div');\n      newDiv.id = uniqueContainerId;\n      newDiv.className = 'recaptcha-inner';\n      container.appendChild(newDiv);\n\n      // Wait for DOM to be ready\n      await new Promise(resolve => setTimeout(resolve, 200));\n      \n      // Verify container exists\n      const targetContainer = document.getElementById(uniqueContainerId);\n      if (!targetContainer) {\n        throw new Error(`Container ${uniqueContainerId} not found after creation`);\n      }\n      \n      console.log(`âœ“ Created fresh container: ${uniqueContainerId}`);\n\n      // Step 6: Create new RecaptchaVerifier with unique container\n      console.log('ðŸ”§ Creating new RecaptchaVerifier...');\n      window.recaptchaVerifier = new RecaptchaVerifier(\n        auth,\n        uniqueContainerId,\n        {\n          size: \"invisible\",\n          callback: () => console.log(\"reCAPTCHA solved\"),\n          \"expired-callback\": () => console.warn(\"reCAPTCHA expired\"),\n        }\n      );\n\n      // Step 7: Render and store widget ID (with additional error handling)\n      let widgetId;\n      try {\n        widgetId = await window.recaptchaVerifier.render();\n        recaptchaWidgetIdRef.current = widgetId;\n        console.log(`âœ… reCAPTCHA rendered successfully in ${uniqueContainerId} (widget ID: ${widgetId})`);\n      } catch (renderError) {\n        // If render still fails, try one more time with complete reset\n        console.warn('âš ï¸ First render attempt failed, trying complete reset...', renderError);\n        \n        // Nuclear option: reload grecaptcha script\n        if (window.grecaptcha) {\n          delete window.grecaptcha;\n        }\n        \n        // Wait a bit longer\n        await new Promise(resolve => setTimeout(resolve, 500));\n        \n        // Try to render again\n        widgetId = await window.recaptchaVerifier.render();\n        recaptchaWidgetIdRef.current = widgetId;\n        console.log(`âœ… reCAPTCHA rendered successfully on retry (widget ID: ${widgetId})`);\n      }\n\n      const e164Phone = phoneValidation.e164;\n      const confirmationResult = await signInWithPhoneNumber(\n        auth,\n        e164Phone,\n        window.recaptchaVerifier\n      );\n      window.confirmationResult = confirmationResult;\n\n      showAlert(\"OTP sent successfully to your phone!\", \"success\");\n      setPhoneVerification({\n        showOtpInput: true,\n        isVerified: false,\n        otp: \"\",\n        isProcessing: false,\n      });\n      setTimer(30); // cooldown\n      recaptchaCleanedUp.current = false;\n    } catch (err) {\n      console.error(\"OTP send error:\", err);\n      \n      // âœ… Provide user-friendly error messages\n      let errorMsg = \"Failed to send OTP. Please try again.\";\n      if (err.code === \"auth/too-many-requests\") {\n        errorMsg = \"Too many attempts. Please try again later.\";\n      } else if (err.code === \"auth/invalid-phone-number\") {\n        errorMsg = \"Invalid phone number format.\";\n      } else if (err.message?.includes(\"reCAPTCHA\")) {\n        errorMsg = err.message;\n      }\n      \n      showAlert(errorMsg, \"error\");\n      \n      // âœ… Clean up on error\n      await cleanupRecaptcha(true);\n      \n      setPhoneVerification((p) => ({ ...p, isProcessing: false }));\n    }\n  };\n\n  // âœ… Verify OTP\n  const handleVerifyOtp = async () => {\n    if (!phoneVerification.otp.trim() || phoneVerification.otp.length !== 6) {\n      return showAlert(\"Please enter a valid 6-digit OTP.\", \"warning\");\n    }\n\n    setPhoneVerification((p) => ({ ...p, isProcessing: true }));\n\n    try {\n      const result = await window.confirmationResult.confirm(\n        phoneVerification.otp\n      );\n      const user = result.user;\n      const firebaseToken = await user.getIdToken();\n\n      // âœ… Send phone in E.164 format\n      await API.post(`/form/verify-phone`, {\n        token,\n        phone: formData.phone, // E.164 format from MuiTelInput\n        firebaseToken,\n      });\n\n      showAlert(\"Phone verified successfully!\", \"success\");\n\n      const verifiedState = {\n        ...phoneVerification,\n        isVerified: true,\n        isProcessing: false,\n        firebaseToken, // âœ… Store token for form submission\n      };\n      \n      setPhoneVerification(verifiedState);\n      \n      // âœ… Save to sessionStorage to persist across OAuth redirects\n      sessionStorage.setItem(\"phoneVerificationState\", JSON.stringify({\n        isVerified: true,\n        firebaseToken,\n        verifiedAt: new Date().toISOString(),\n      }));\n      \n      // âœ… Clean up recaptcha after successful verification\n      await cleanupRecaptcha(false);\n    } catch (err) {\n      console.error(\"OTP verification failed:\", err);\n      \n      // âœ… User-friendly error messages\n      let errorMsg = \"Invalid or expired OTP. Please try again.\";\n      if (err.code === \"auth/invalid-verification-code\") {\n        errorMsg = \"Invalid OTP code. Please check and try again.\";\n      } else if (err.code === \"auth/code-expired\") {\n        errorMsg = \"OTP has expired. Please request a new one.\";\n      }\n      \n      showAlert(errorMsg, \"error\");\n      \n      // âœ… Clear verifier to allow retry\n      await cleanupRecaptcha(false);\n      \n      setPhoneVerification((p) => ({ ...p, isProcessing: false }));\n    }\n  };\n\n  // âœ… Submit\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    // âœ… Prevent double submission\n    if (isSubmitting) {\n      return;\n    }\n\n    // âœ… Detailed validation\n    if (!formData.fullName?.trim()) {\n      return showAlert(\"Please enter your full name.\", \"warning\");\n    }\n    \n    const phoneValidation = parsePhoneNumber(formData.phone);\n    if (!phoneValidation.isValid) {\n      return showAlert(\"Please enter a valid phone number.\", \"warning\");\n    }\n    if (!formData.email?.trim() || !formData.email.includes(\"@\")) {\n      return showAlert(\"Please enter a valid email address.\", \"warning\");\n    }\n    if (!formData.gender) {\n      return showAlert(\"Please select your gender.\", \"warning\");\n    }\n    if (\n      !formData.organization ||\n      !formData.organization.name ||\n      !formData.organization.ref ||\n      !formData.organization.ref.type\n    ) {\n      return showAlert(\"Please select or enter your organization.\", \"warning\");\n    }\n    if (!formData.role) {\n      return showAlert(\"Please select your role.\", \"warning\");\n    }\n    if (!githubStatus.verified) {\n      return showAlert(\"Please verify your GitHub account before submitting.\", \"warning\");\n    }\n    if (!discordVerified) {\n      return showAlert(\"Please verify your Discord account before submitting.\", \"warning\");\n    }\n    if (!phoneVerification.isVerified) {\n      return showAlert(\"Please verify your phone number before submitting.\", \"warning\");\n    }\n    if (!formData.skills || formData.skills.length === 0) {\n      return showAlert(\"Please select at least one tech skill.\", \"warning\");\n    }\n    if (formData.skills.length > 6) {\n      return showAlert(\"You can select maximum 6 skills.\", \"warning\");\n    }\n\n    const confirm = await Swal.fire({\n      title: \"Confirm Submission?\",\n      text: \"Please review your information before submitting.\",\n      icon: \"question\",\n      showCancelButton: true,\n      confirmButtonText: \"Submit\",\n      confirmButtonColor: \"#1E4DD8\",\n    });\n\n    if (!confirm.isConfirmed) return;\n\n    // âœ… Prevent multiple submissions\n    if (isSubmitting) {\n      console.log('âš ï¸ Submission already in progress');\n      return;\n    }\n\n    setIsSubmitting(true);\n\n    try {\n      isDirtyRef.current = false;\n      \n      // âœ… Get verified social media data from sessionStorage\n      const githubUsername = sessionStorage.getItem(\"githubUsername\") || \"\";\n      const githubUrl = sessionStorage.getItem(\"githubUrl\") || \"\";\n      const discordId = sessionStorage.getItem(\"discordId\") || \"\";\n      \n      const cleanedData = {\n        fullName: formData.fullName?.trim(),\n        email: formData.email?.trim(),\n        phone: phoneValidation.e164,\n        gender: formData.gender,\n        organization: {\n          name: formData.organization?.name,\n          ref: formData.organization?.ref,\n          orgType: formData.organization?.orgType\n        },\n        role: formData.role,\n        techStack: formData.skills,\n        githubUrl: githubUrl || formData.githubUrl?.trim() || null,\n        githubId: githubUsername || formData.githubId?.trim() || null,\n        discordId: discordId || formData.discordId?.trim() || null,\n        linkedinId: formData.linkedinId?.trim() || null,\n        token,\n        firebaseToken: phoneVerification.firebaseToken, // âœ… Include Firebase token\n      };\n      \n      // âœ… Remove null/empty fields (but keep token and firebaseToken)\n      const finalData = {};\n      Object.keys(cleanedData).forEach(key => {\n        // Always include token and firebaseToken\n        if (key === 'token' || key === 'firebaseToken') {\n          finalData[key] = cleanedData[key];\n        } else if (cleanedData[key] !== null && cleanedData[key] !== \"\") {\n          finalData[key] = cleanedData[key];\n        }\n      });\n      \n      // âœ… Debug logging\n      console.log('ðŸ“¤ Submitting form with keys:', Object.keys(finalData));\n      console.log('ðŸ“¤ Token:', finalData.token?.substring(0, 10) + '...');\n      console.log('ðŸ“¤ Firebase token:', finalData.firebaseToken?.substring(0, 20) + '...');\n      \n      await submitForm(finalData);\n      await API.delete(`/form/partial/${token}`);\n      \n      sessionStorage.removeItem(\"updateFormData\");\n      sessionStorage.removeItem(\"updateFormToken\");\n      sessionStorage.removeItem(\"oauthReturnPath\");\n      sessionStorage.removeItem(\"phoneVerificationState\"); // âœ… Clear phone verification\n      sessionStorage.removeItem(\"githubVerified\");\n      sessionStorage.removeItem(\"githubUsername\");\n      sessionStorage.removeItem(\"githubUrl\");\n      sessionStorage.removeItem(\"githubAvatar\");\n      sessionStorage.removeItem(\"discordVerified\");\n      sessionStorage.removeItem(\"discordUsername\");\n      sessionStorage.removeItem(\"discordId\");\n      sessionStorage.removeItem(\"discordAvatarUrl\");\n      sessionStorage.removeItem(\"discordNotMember\");\n      sessionStorage.removeItem(\"discordOAuthState\");\n      \n      setStatus(\"submitted\");\n      showAlert(\"Form submitted successfully!\", \"success\");\n    } catch (err) {\n      console.error(\"Submission error:\", err);\n      console.error(\"Error response:\", err.response?.data);\n      console.error(\"Error status:\", err.response?.status);\n      \n      const errorMessage = err.response?.data?.message || \"Submission failed. Please try again.\";\n      \n      // âœ… Handle 409 Conflict (user already exists)\n      if (err.response?.status === 409) {\n        const userId = err.response?.data?.userId;\n        showAlert(\n          `This account already exists${userId ? ` (User ID: ${userId})` : ''}. ${errorMessage}`,\n          \"error\"\n        );\n        return;\n      }\n      \n      // âœ… If phone conflict error, reset phone verification so user can change number\n      if (errorMessage.includes(\"phone number\") || errorMessage.includes(\"already registered\")) {\n        setPhoneVerification({\n          isVerified: false,\n          showOtpInput: false,\n          otp: \"\",\n          isProcessing: false,\n          firebaseToken: null,\n        });\n        showAlert(\n          \"This phone number is already registered with a different account. Please use a different number or verify with the correct account.\",\n          \"error\"\n        );\n      } else {\n        showAlert(errorMessage, \"error\");\n      }\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // âœ… Defer\n  // âœ… Defer (with confirmation + smooth exit)\n  const handleDefer = async () => {\n    const confirmDefer = window.confirm(\n      \"Are you sure you want to defer filling this form?\\nYouâ€™ll receive a reminder email later.\"\n    );\n    if (!confirmDefer) return; // user chose No â€” stay on form\n\n    try {\n      await deferForm({ token });\n      setFadeOut(true);\n      setTimeout(() => setStatus(\"deferred\"), 600); // fade-out animation time\n    } catch (err) {\n      showAlert(\n        err.response?.data?.message || \"Failed to defer form.\",\n        \"error\"\n      );\n    }\n  };\n\n  // âœ… Opt-out\n  const handleOptOut = async () => {\n    const confirm = await Swal.fire({\n      title: \"Confirm Opt-Out?\",\n      text: \"You wonâ€™t receive future communications.\",\n      icon: \"warning\",\n      showCancelButton: true,\n      confirmButtonText: \"Opt Out\",\n      confirmButtonColor: \"#d33\",\n    });\n\n    if (!confirm.isConfirmed) return;\n\n    setOptoutProcessing(true);\n    try {\n      await optOut({ token, reason: optoutReason });\n      setOptoutProcessing(false);\n      setInterested(\"no\");\n      setStatus(\"deferred\");\n      showAlert(\"You have been opted out successfully.\", \"success\");\n    } catch (err) {\n      setOptoutProcessing(false);\n      showAlert(err.response?.data?.message || \"Failed to opt out.\", \"error\");\n    }\n  };\n\n  // âœ… Conditional Views\n  if (status === \"loading\")\n    return <Typography align=\"center\">Loading form...</Typography>;\n  if (status === \"invalid\")\n    return (\n      <Box\n        sx={{\n          minHeight: \"100vh\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          bgcolor: \"#f8f9fa\",\n          p: 2,\n        }}\n      >\n        <Paper\n          sx={{\n            width: \"100%\",\n            maxWidth: 480,\n            p: 4,\n            borderRadius: 3,\n            boxShadow: 4,\n            textAlign: \"center\",\n          }}\n        >\n          <Typography variant=\"h5\" color=\"error\" fontWeight=\"bold\" gutterBottom>\n            âŒ Invalid or Expired Link\n          </Typography>\n          <Typography variant=\"body1\" sx={{ mb: 2 }}>\n            {errorMessage || \"This link is no longer valid.\"}\n          </Typography>\n          <Divider sx={{ my: 2 }} />\n          <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n            What happened?\n          </Typography>\n          <Box sx={{ textAlign: \"left\", mx: 3, my: 2 }}>\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>\n              ðŸ”— The link may have already been used\n            </Typography>\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>\n              â° The link may have expired (7 days validity)\n            </Typography>\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>\n              âœ… You may have already submitted the form\n            </Typography>\n            <Typography variant=\"body2\">\n              ðŸš« You may have opted out or deferred\n            </Typography>\n          </Box>\n          <Divider sx={{ my: 2 }} />\n          <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n            What to do next?\n          </Typography>\n          <Box sx={{ textAlign: \"left\", mx: 3, my: 2 }}>\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>\n              ðŸ“§ Check your email for the latest update form link\n            </Typography>\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>\n              â³ Wait for the next reminder email (sent automatically)\n            </Typography>\n            <Typography variant=\"body2\">\n              âœ‰ï¸ Contact support if you believe this is an error\n            </Typography>\n          </Box>\n          <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 2, display: \"block\" }}>\n            You can close this window now.\n          </Typography>\n        </Paper>\n      </Box>\n    );\n  if (status === \"expired\")\n    return (\n      <Box\n        sx={{\n          minHeight: \"100vh\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          bgcolor: \"#f8f9fa\",\n          p: 2,\n        }}\n      >\n        <Paper\n          sx={{\n            width: \"100%\",\n            maxWidth: 480,\n            p: 4,\n            borderRadius: 3,\n            boxShadow: 4,\n            textAlign: \"center\",\n          }}\n        >\n          <Typography variant=\"h5\" color=\"warning.main\" fontWeight=\"bold\" gutterBottom>\n            â° Form Expired\n          </Typography>\n          <Typography variant=\"body1\" sx={{ mb: 2 }}>\n            Your 10-minute session has expired.\n          </Typography>\n          <Divider sx={{ my: 2 }} />\n          <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n            What happens next?\n          </Typography>\n          <Box sx={{ textAlign: \"left\", mx: 3, my: 2 }}>\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>\n              âœ‰ï¸ You will receive a new reminder email within 24 hours\n            </Typography>\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>\n              ðŸ”— Use the new link to complete your form\n            </Typography>\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>\n              ðŸ’¾ Your progress has been saved automatically\n            </Typography>\n            <Typography variant=\"body2\">\n              â±ï¸ You'll have another 10 minutes when you return\n            </Typography>\n          </Box>\n          <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 2, display: \"block\" }}>\n            You can close this window now.\n          </Typography>\n        </Paper>\n      </Box>\n    );\n  if (status === \"submitted\")\n    return (\n      <Box\n        sx={{\n          minHeight: \"100vh\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          bgcolor: \"#f8f9fa\",\n          p: 2,\n        }}\n      >\n        <Paper\n          sx={{\n            width: \"100%\",\n            maxWidth: 480,\n            p: 4,\n            borderRadius: 3,\n            boxShadow: 4,\n            textAlign: \"center\",\n          }}\n        >\n          <Typography variant=\"h5\" color=\"success.main\" fontWeight=\"bold\" gutterBottom>\n            âœ… Form Already Submitted\n          </Typography>\n          <Typography variant=\"body1\" sx={{ mb: 2 }}>\n            You have already submitted this form successfully.\n          </Typography>\n          <Divider sx={{ my: 2 }} />\n          <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n            What happened?\n          </Typography>\n          <Box sx={{ textAlign: \"left\", mx: 3, my: 2 }}>\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>\n              âœ… Your form submission was completed successfully\n            </Typography>\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>\n              ðŸ’¾ Your information has been saved in our system\n            </Typography>\n            <Typography variant=\"body2\">\n              ðŸ”’ This link can no longer be used to prevent duplicate submissions\n            </Typography>\n          </Box>\n          <Divider sx={{ my: 2 }} />\n          <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n            What to do next?\n          </Typography>\n          <Box sx={{ textAlign: \"left\", mx: 3, my: 2 }}>\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>\n              ðŸ“§ Check your email for confirmation\n            </Typography>\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>\n              â„¹ï¸ No further action is needed\n            </Typography>\n            <Typography variant=\"body2\">\n              âœ‰ï¸ Contact support if you need to update your information\n            </Typography>\n          </Box>\n          <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 2, display: \"block\" }}>\n            You can close this window now.\n          </Typography>\n        </Paper>\n      </Box>\n    );\n  // âœ… Deferred screen (auto-close + message)\n  if (status === \"deferred\")\n    return (\n      <Box\n        sx={{\n          minHeight: \"100vh\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          bgcolor: \"#f8f9fa\",\n          textAlign: \"center\",\n          p: 3,\n        }}\n      >\n        <Paper\n          sx={{\n            p: 4,\n            borderRadius: 3,\n            border: \"1px solid #ddd\",\n            boxShadow: 3,\n            maxWidth: 480,\n          }}\n        >\n          <Typography variant=\"h5\" color=\"warning.main\" gutterBottom>\n            âš ï¸ Form Deferred\n          </Typography>\n          <Typography variant=\"body1\" sx={{ mb: 1 }}>\n            Youâ€™ve chosen to defer filling this form.\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n            You can complete it later using the reminder email link weâ€™ll send\n            soon.\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            This window will close automatically in <b>{countdown}</b> seconds.\n          </Typography>\n        </Paper>\n      </Box>\n    );\n\n  // âœ… Main Form UI\n  return (\n    <Box\n      sx={{\n        minHeight: \"100vh\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        bgcolor: \"#f8f9fa\",\n        p: 2,\n        flex: 1,\n        width: \"100%\",\n      }}\n    >\n      <Paper\n        sx={{\n          width: \"100%\",\n          maxWidth: 480,\n          p: 3,\n          borderRadius: 3,\n          boxShadow: 4,\n          border: \"1px solid #ddd\",\n          opacity: fadeOut ? 0 : 1,\n          transition: \"opacity 0.6s ease-in-out\",\n        }}\n      >\n        <Stack alignItems=\"center\" spacing={1}>\n          <Stack direction=\"row\" spacing={1} alignItems=\"center\">\n            <img src={logo1} alt=\"Logo1\" style={{ width: 36, height: 36 }} />\n            <img src={logo2} alt=\"Logo2\" style={{ width: 36, height: 36 }} />\n          </Stack>\n          <Typography variant=\"h6\" fontWeight=\"bold\">\n            Update Your Information\n          </Typography>\n          \n          {/* Countdown Timer */}\n          <Box\n            sx={{\n              width: \"100%\",\n              mt: 1,\n              p: 1.5,\n              borderRadius: 2,\n              backgroundColor: timeRemaining <= 120 ? \"#ffebee\" : timeRemaining <= 300 ? \"#fff3e0\" : \"#e3f2fd\",\n              border: `2px solid ${timeRemaining <= 120 ? \"#d32f2f\" : timeRemaining <= 300 ? \"#f57c00\" : \"#1976d2\"}`,\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              gap: 1,\n            }}\n          >\n            <Typography\n              sx={{\n                fontSize: \"1.1rem\",\n                fontWeight: \"bold\",\n                color: timeRemaining <= 120 ? \"#d32f2f\" : timeRemaining <= 300 ? \"#f57c00\" : \"#1976d2\",\n              }}\n            >\n              â±ï¸ Time Remaining: {Math.floor(timeRemaining / 60)}:{String(timeRemaining % 60).padStart(2, \"0\")}\n            </Typography>\n          </Box>\n          <Typography\n            variant=\"caption\"\n            sx={{\n              color: timeRemaining <= 120 ? \"#d32f2f\" : \"text.secondary\",\n              fontWeight: timeRemaining <= 120 ? \"bold\" : \"normal\",\n            }}\n          >\n            {timeRemaining <= 120\n              ? \"âš ï¸ Hurry! Your session will expire soon!\"\n              : \"Complete the form within 10 minutes or it will expire\"}\n          </Typography>\n          \n          <Divider sx={{ width: \"100%\", my: 1 }} />\n        </Stack>\n\n        {/* Opt-in/out */}\n        <FormControl fullWidth size=\"small\" sx={{ mt: 2 }}>\n          <InputLabel>Continue as part of our organization?</InputLabel>\n          <Select\n            value={interested ?? \"\"}\n            label=\"Continue?\"\n            onChange={(e) => setInterested(e.target.value)}\n          >\n            <MenuItem value=\"yes\">Yes, I want to continue</MenuItem>\n            <MenuItem value=\"no\">No, I want to opt out</MenuItem>\n          </Select>\n        </FormControl>\n\n        {interested === \"no\" ? (\n          <Box mt={3}>\n            <Typography variant=\"body2\">\n              We're sorry to see you go. You may share feedback (optional):\n            </Typography>\n            <TextField\n              fullWidth\n              multiline\n              rows={3}\n              placeholder=\"Your reason...\"\n              value={optoutReason}\n              onChange={(e) => setOptoutReason(e.target.value)}\n              sx={{ mt: 1 }}\n            />\n            <Button\n              fullWidth\n              variant=\"contained\"\n              color=\"error\"\n              sx={{ mt: 2, borderRadius: \"20px\" }}\n              onClick={handleOptOut}\n              disabled={optoutProcessing}\n            >\n              {optoutProcessing ? \"Processing...\" : \"Confirm Opt-Out\"}\n            </Button>\n          </Box>\n        ) : (\n          <Box component=\"form\" onSubmit={handleSubmit} mt={2}>\n            {/* Full Name */}\n            <TextField\n              label=\"Full Name *\"\n              fullWidth\n              size=\"small\"\n              margin=\"dense\"\n              name=\"fullName\"\n              value={formData.fullName}\n              onChange={handleChange}\n              required\n            />\n\n            {/* Phone */}\n            <MuiTelInput\n              label=\"Phone Number *\"\n              value={formData.phone}\n              defaultCountry=\"IN\"\n              forceCallingCode\n              focusOnSelectCountry\n              fullWidth\n              size=\"small\"\n              margin=\"dense\"\n              disabled={phoneVerification.isVerified}\n              onChange={(value, info) => {\n                if (!info) return;\n\n                setFormData(prev => ({\n                  ...prev,\n                  phone: value\n                }));\n\n                // Reset verification if phone changes\n                setPhoneVerification({\n                  isVerified: false,\n                  showOtpInput: false,\n                  otp: \"\",\n                  isProcessing: false,\n                  firebaseToken: null,\n                });\n\n                sessionStorage.removeItem(\"phoneVerificationState\");\n                cleanupRecaptcha(false);\n              }}\n              error={formData.phone && !isValidPhoneFormat(formData.phone)}\n              helperText={\n                formData.phone && !isValidPhoneFormat(formData.phone)\n                  ? \"Enter valid phone number for selected country\"\n                  : \"\"\n              }\n              required\n            />\n\n            {/* Email */}\n            <TextField\n              label=\"Email *\"\n              fullWidth\n              size=\"small\"\n              margin=\"dense\"\n              name=\"email\"\n              value={formData.email}\n              onChange={handleChange}\n              required\n            />\n\n            {/* Gender */}\n            <FormControl fullWidth size=\"small\" margin=\"dense\" required>\n              <InputLabel>Gender *</InputLabel>\n              <Select\n                value={formData.gender}\n                label=\"Gender *\"\n                onChange={handleChange}\n                name=\"gender\"\n              >\n                {GENDERS.map((g) => (\n                  <MenuItem key={g} value={g}>\n                    {g}\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n\n            {/* Organisation */}\n            {orgLoadError ? (\n              <Box sx={{ mt: 2 }}>\n                <Typography color=\"error\" fontSize={13}>\n                  âŒ Unable to load organizations. Please refresh or try again later.\n                </Typography>\n              </Box>\n            ) : (\n              <Autocomplete\n                options={orgOptions}\n                loading={orgLoading}\n                filterOptions={(x) => x}\n                getOptionLabel={(o) => o.label || \"\"}\n                isOptionEqualToValue={(option, value) =>\n                  option.orgRef?.id === value.orgRef?.id &&\n                  option.orgRef?.type === value.orgRef?.type\n                }\n                value={\n                  formData.organization\n                    ? {\n                        label: formData.organization.name,\n                        orgRef: formData.organization.ref,\n                        source: formData.organization.ref?.type,\n                        orgType: formData.organization.orgType\n                      }\n                    : null\n                }\n                onInputChange={(e, v) => handleOrgSearch(v)}\n                onChange={(e, value) => handleOrgChange(value)}\n                renderInput={(params) => (\n                  <TextField\n                    {...params}\n                    label=\"Organisation *\"\n                    size=\"small\"\n                    margin=\"dense\"\n                    required\n                    placeholder=\"Search for your organization...\"\n                  />\n                )}\n                sx={{ width: \"100%\" }}\n              />\n            )}\n\n            {/* Custom Organization Input (shown when \"Other\" is selected) */}\n            {showCustomOrg && (\n              <TextField\n                label=\"Enter Organization Name *\"\n                fullWidth\n                size=\"small\"\n                margin=\"dense\"\n                required\n                value={formData.organization?.name || \"\"}\n                onChange={(e) => {\n                  isDirtyRef.current = true;\n                  setFormData({\n                    ...formData,\n                    organization: {\n                      ...formData.organization,\n                      name: e.target.value,\n                      ref: { type: \"custom\", id: null }\n                    }\n                  });\n                }}\n              />\n            )}\n\n            {/* Organization Type */}\n            {showCustomOrg ? (\n              <FormControl fullWidth size=\"small\" margin=\"dense\" required>\n                <InputLabel>Organization Type</InputLabel>\n                <Select\n                  label=\"Organization Type\"\n                  value={formData.organization?.orgType || \"\"}\n                  onChange={(e) => {\n                    isDirtyRef.current = true;\n                    setFormData({ \n                      ...formData, \n                      organization: {\n                        ...formData.organization,\n                        orgType: e.target.value\n                      }\n                    });\n                  }}\n                >\n                  <MenuItem value=\"Government\">Government</MenuItem>\n                  <MenuItem value=\"Corporate\">Corporate</MenuItem>\n                  <MenuItem value=\"Academic\">Academic</MenuItem>\n                  <MenuItem value=\"NGO\">NGO</MenuItem>\n                  <MenuItem value=\"Self\">Self</MenuItem>\n                </Select>\n              </FormControl>\n            ) : (\n              <TextField\n                label=\"Organization Type\"\n                fullWidth\n                size=\"small\"\n                margin=\"dense\"\n                value={formData.organization?.orgType || \"\"}\n                InputProps={{ readOnly: true }}\n              />\n            )}\n\n            {/* Role */}\n            <FormControl fullWidth size=\"small\" margin=\"dense\" required>\n              <InputLabel>Role *</InputLabel>\n              <Select\n                value={formData.role}\n                label=\"Role *\"\n                name=\"role\"\n                onChange={(e) =>\n                  setFormData({ ...formData, role: e.target.value })\n                }\n              >\n                {ROLES.map((r) => (\n                  <MenuItem key={r.value} value={r.value}>\n                    {r.label}\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n\n            {/* Tech Skills - Collapsed */}\n            <Box sx={{ mt: 2, border: '1px solid #e0e0e0', borderRadius: 1 }}>\n              <Box\n                sx={{\n                  p: 1.5,\n                  cursor: 'pointer',\n                  bgcolor: '#f5f5f5',\n                  borderRadius: '4px 4px 0 0',\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center'\n                }}\n                onClick={() => setFormData({ ...formData, _skillsOpen: !formData._skillsOpen })}\n              >\n                <Typography fontWeight=\"bold\" fontSize={14}>\n                  Tech Skills {formData.skills?.length > 0 && `(${formData.skills.length})`}\n                </Typography>\n                <Typography>{formData._skillsOpen ? 'â–²' : 'â–¼'}</Typography>\n              </Box>\n              {formData._skillsOpen && (\n                <Box sx={{ p: 1.5 }}>\n                  <Autocomplete\n                    multiple\n                    options={SKILLS}\n                    value={formData.skills || []}\n                    onChange={(event, newValue) => {\n                      isDirtyRef.current = true;\n                      const unique = Array.from(new Set(newValue));\n                      if (unique.length <= 6) {\n                        setFormData({ ...formData, skills: unique });\n                      } else {\n                        setFormData({ ...formData, skills: unique.slice(0, 6) });\n                      }\n                    }}\n                    disableCloseOnSelect\n                    limitTags={3}\n                    renderInput={(params) => (\n                      <TextField\n                        {...params}\n                        label=\"Select up to 6 skills *\"\n                        placeholder=\"Choose your skills\"\n                        size=\"small\"\n                        helperText={\n                          formData.skills?.length === 6\n                            ? \"Maximum 6 skills reached\"\n                            : \"These help us recommend better opportunities.\"\n                        }\n                      />\n                    )}\n                  />\n                </Box>\n              )}\n            </Box>\n\n            {/* Social - Collapsed */}\n            <Box sx={{ mt: 2, border: '1px solid #e0e0e0', borderRadius: 1 }}>\n              <Box\n                sx={{\n                  p: 1.5,\n                  cursor: 'pointer',\n                  bgcolor: '#f5f5f5',\n                  borderRadius: '4px 4px 0 0',\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center'\n                }}\n                onClick={() => setFormData({ ...formData, _socialOpen: !formData._socialOpen })}\n              >\n                <Typography fontWeight=\"bold\" fontSize={14}>\n                  Social Accounts {(githubStatus.verified || discordVerified) && 'âœ“'}\n                </Typography>\n                <Typography>{formData._socialOpen ? 'â–²' : 'â–¼'}</Typography>\n              </Box>\n              {formData._socialOpen && (\n                <Box sx={{ p: 1.5 }}>\n                  {/* GitHub Section */}\n                  <Typography fontWeight=\"bold\" fontSize={14} mb={1}>\n                    GitHub:\n                  </Typography>\n            <Box sx={{ display: \"flex\", flexDirection: \"column\", gap: 1, width: \"100%\", mt: 1 }}>\n              <Button\n                fullWidth\n                variant=\"contained\"\n                onClick={handleVerifyGithub}\n                disabled={githubStatus.verified || githubStatus.verifying}\n                sx={{\n                  borderRadius: \"10px\",\n                  fontWeight: \"bold\",\n                  backgroundColor: githubStatus.verified ? \"#4CAF50\" : \"#000\",\n                  color: \"white\",\n                  \"&:disabled\": {\n                    backgroundColor: githubStatus.verified ? \"#4CAF50\" : \"#9e9e9e\",\n                    color: \"white\",\n                  },\n                }}\n              >\n                {githubStatus.verified ? \"GitHub Verified âœ“\" : \"Verify GitHub\"}\n              </Button>\n\n              {githubStatus.verified && (\n                <Typography fontSize={13} color=\"#2e7d32\">\n                  âœ“ Verified as: {githubStatus.username}\n                </Typography>\n              )}\n\n              {!githubStatus.verified && githubStatus.error && (\n                <Typography fontSize={13} color=\"#d32f2f\">\n                  âŒ {githubStatus.error}\n                </Typography>\n              )}\n            </Box>\n\n            {/* Discord Section */}\n            <Typography fontWeight=\"bold\" fontSize={14} mt={2} mb={1}>\n              Discord:\n            </Typography>\n            <Box sx={{ display: \"flex\", flexDirection: \"column\", gap: 1, width: \"100%\", mt: 1 }}>\n              {discordVerified ? (\n                <>\n                  <Button\n                    fullWidth\n                    variant=\"contained\"\n                    disabled\n                    sx={{\n                      borderRadius: \"10px\",\n                      fontWeight: \"bold\",\n                      backgroundColor: \"#4CAF50\",\n                      color: \"white\",\n                      \"&.Mui-disabled\": {\n                        backgroundColor: \"#4CAF50\",\n                        color: \"white\",\n                      },\n                    }}\n                  >\n                    DISCORD VERIFIED âœ“\n                  </Button>\n\n                  <Typography fontSize={13} color=\"#2e7d32\">\n                    âœ“ Verified as: {sessionStorage.getItem(\"discordUsername\")}\n                  </Typography>\n                </>\n              ) : (\n                <>\n                  <Button\n                    fullWidth\n                    variant=\"contained\"\n                    sx={{\n                      borderRadius: \"10px\",\n                      fontWeight: \"bold\",\n                      backgroundColor: \"#1E4DD8\",\n                      \"&:hover\": { backgroundColor: \"#1536A1\" },\n                    }}\n                    onClick={handleVerifyDiscord}\n                    disabled={discordStatus.verifying}\n                    startIcon={discordStatus.verifying ? <CircularProgress size={20} color=\"inherit\" /> : null}\n                  >\n                    {discordStatus.verifying ? \"REDIRECTING...\" : \"VERIFY DISCORD\"}\n                  </Button>\n\n                  {discordNotMember && (\n                    <>\n                      <Button\n                        fullWidth\n                        variant=\"outlined\"\n                        sx={{ borderRadius: \"10px\", fontWeight: \"bold\" }}\n                        onClick={() => window.open(DISCORD_INVITE, \"_blank\")}\n                      >\n                        JOIN DISCORD SERVER\n                      </Button>\n                      <Typography fontSize={13} color=\"#d32f2f\">\n                        âŒ You must join our Discord server before verification.\n                      </Typography>\n                    </>\n                  )}\n                </>\n              )}\n            </Box>\n\n                  {/* LinkedIn Section */}\n                  <Typography fontWeight=\"bold\" fontSize={14} mt={2} mb={1}>\n                    LinkedIn URL (Optional):\n                  </Typography>\n                  <Box sx={{ display: \"flex\", flexDirection: \"column\", gap: 1, width: \"100%\" }}>\n                    <TextField\n                      label=\"Enter LinkedIn profile URL\"\n                      placeholder=\"https://www.linkedin.com/in/username\"\n                      value={formData.linkedinId}\n                      onChange={(e) => setFormData({ ...formData, linkedinId: e.target.value })}\n                      size=\"small\"\n                      fullWidth\n                    />\n                  </Box>\n                </Box>\n              )}\n            </Box>\n\n            {/* OTP Section - Compact */}\n            <Box mt={2}>\n              <Typography fontWeight=\"bold\" fontSize={14} mb={1}>\n                Phone Verification:\n              </Typography>\n              <div id=\"recaptcha-container-update\"></div>\n              {!phoneVerification.isVerified && (\n                <Stack direction=\"row\" spacing={1} mt={1}>\n                  <Button\n                    variant=\"outlined\"\n                    fullWidth\n                    onClick={handleRequestOtp}\n                    disabled={phoneVerification.isProcessing || timer > 0}\n                  >\n                    {timer > 0\n                      ? `Resend in ${timer}s`\n                      : phoneVerification.isProcessing\n                      ? \"Sending...\"\n                      : phoneVerification.showOtpInput\n                      ? \"Resend OTP\"\n                      : \"Send OTP\"}\n                  </Button>\n                  {phoneVerification.showOtpInput && (\n                    <TextField\n                      label=\"Enter 6-digit OTP\"\n                      size=\"small\"\n                      value={phoneVerification.otp}\n                      onChange={(e) => {\n                        const onlyNums = e.target.value.replace(/\\D/g, \"\");\n                        if (onlyNums.length <= 6)\n                          setPhoneVerification({\n                            ...phoneVerification,\n                            otp: onlyNums,\n                          });\n                      }}\n                      inputProps={{\n                        inputMode: \"numeric\",\n                        pattern: \"[0-9]*\",\n                        maxLength: 6,\n                        onKeyPress: (e) => {\n                          if (!/[0-9]/.test(e.key)) e.preventDefault();\n                        },\n                      }}\n                    />\n                  )}\n                  {phoneVerification.showOtpInput && (\n                    <Button\n                      variant=\"contained\"\n                      color=\"primary\"\n                      onClick={handleVerifyOtp}\n                      disabled={phoneVerification.isProcessing}\n                    >\n                      {phoneVerification.isProcessing ? (\n                        <CircularProgress size={18} color=\"inherit\" />\n                      ) : (\n                        \"Verify\"\n                      )}\n                    </Button>\n                  )}\n                </Stack>\n              )}\n              {phoneVerification.isVerified && (\n                <Typography color=\"success.main\" mt={1}>\n                  âœ… Phone verified successfully!\n                </Typography>\n              )}\n            </Box>\n\n            {/* Actions */}\n            <Stack direction=\"row\" spacing={2} mt={3}>\n              <Button\n                type=\"submit\"\n                variant=\"contained\"\n                color=\"primary\"\n                fullWidth\n                disabled={!isFormComplete()}\n              >\n                Submit\n              </Button>\n              <Button \n                variant=\"outlined\" \n                fullWidth \n                onClick={handleDefer}\n                disabled={oauthInProgress}\n              >\n                Defer\n              </Button>\n            </Stack>\n          </Box>\n        )}\n      </Paper>\n    </Box>\n  );\n};\n\nexport default UpdateForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}