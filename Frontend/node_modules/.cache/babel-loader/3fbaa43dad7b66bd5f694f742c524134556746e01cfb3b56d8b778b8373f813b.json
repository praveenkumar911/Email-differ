{"ast":null,"code":"import _defineProperty from \"/home/rcts/Email-differ/Frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { HttpBindingProtocol, HttpInterceptingShapeDeserializer, HttpInterceptingShapeSerializer } from \"@smithy/core/protocols\";\nimport { NormalizedSchema, TypeRegistry } from \"@smithy/core/schema\";\nimport { ProtocolLib } from \"../ProtocolLib\";\nimport { loadRestXmlErrorCode } from \"./parseXmlBody\";\nimport { XmlCodec } from \"./XmlCodec\";\nexport class AwsRestXmlProtocol extends HttpBindingProtocol {\n  constructor(options) {\n    super(options);\n    _defineProperty(this, \"codec\", void 0);\n    _defineProperty(this, \"serializer\", void 0);\n    _defineProperty(this, \"deserializer\", void 0);\n    _defineProperty(this, \"mixin\", new ProtocolLib());\n    const settings = {\n      timestampFormat: {\n        useTrait: true,\n        default: 5\n      },\n      httpBindings: true,\n      xmlNamespace: options.xmlNamespace,\n      serviceNamespace: options.defaultNamespace\n    };\n    this.codec = new XmlCodec(settings);\n    this.serializer = new HttpInterceptingShapeSerializer(this.codec.createSerializer(), settings);\n    this.deserializer = new HttpInterceptingShapeDeserializer(this.codec.createDeserializer(), settings);\n  }\n  getPayloadCodec() {\n    return this.codec;\n  }\n  getShapeId() {\n    return \"aws.protocols#restXml\";\n  }\n  async serializeRequest(operationSchema, input, context) {\n    const request = await super.serializeRequest(operationSchema, input, context);\n    const inputSchema = NormalizedSchema.of(operationSchema.input);\n    if (!request.headers[\"content-type\"]) {\n      const contentType = this.mixin.resolveRestContentType(this.getDefaultContentType(), inputSchema);\n      if (contentType) {\n        request.headers[\"content-type\"] = contentType;\n      }\n    }\n    if (typeof request.body === \"string\" && request.headers[\"content-type\"] === this.getDefaultContentType() && !request.body.startsWith(\"<?xml \") && !this.hasUnstructuredPayloadBinding(inputSchema)) {\n      request.body = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>' + request.body;\n    }\n    return request;\n  }\n  async deserializeResponse(operationSchema, context, response) {\n    return super.deserializeResponse(operationSchema, context, response);\n  }\n  async handleError(operationSchema, context, response, dataObject, metadata) {\n    var _loadRestXmlErrorCode, _ref, _ref2, _ref3, _dataObject$Error$mes, _dataObject$Error, _dataObject$Error2, _TypeRegistry$for$get;\n    const errorIdentifier = (_loadRestXmlErrorCode = loadRestXmlErrorCode(response, dataObject)) !== null && _loadRestXmlErrorCode !== void 0 ? _loadRestXmlErrorCode : \"Unknown\";\n    const {\n      errorSchema,\n      errorMetadata\n    } = await this.mixin.getErrorSchemaOrThrowBaseException(errorIdentifier, this.options.defaultNamespace, response, dataObject, metadata);\n    const ns = NormalizedSchema.of(errorSchema);\n    const message = (_ref = (_ref2 = (_ref3 = (_dataObject$Error$mes = (_dataObject$Error = dataObject.Error) === null || _dataObject$Error === void 0 ? void 0 : _dataObject$Error.message) !== null && _dataObject$Error$mes !== void 0 ? _dataObject$Error$mes : (_dataObject$Error2 = dataObject.Error) === null || _dataObject$Error2 === void 0 ? void 0 : _dataObject$Error2.Message) !== null && _ref3 !== void 0 ? _ref3 : dataObject.message) !== null && _ref2 !== void 0 ? _ref2 : dataObject.Message) !== null && _ref !== void 0 ? _ref : \"Unknown\";\n    const ErrorCtor = (_TypeRegistry$for$get = TypeRegistry.for(errorSchema[1]).getErrorCtor(errorSchema)) !== null && _TypeRegistry$for$get !== void 0 ? _TypeRegistry$for$get : Error;\n    const exception = new ErrorCtor(message);\n    await this.deserializeHttpMessage(errorSchema, context, response, dataObject);\n    const output = {};\n    for (const [name, member] of ns.structIterator()) {\n      var _member$getMergedTrai, _dataObject$Error$tar, _dataObject$Error3;\n      const target = (_member$getMergedTrai = member.getMergedTraits().xmlName) !== null && _member$getMergedTrai !== void 0 ? _member$getMergedTrai : name;\n      const value = (_dataObject$Error$tar = (_dataObject$Error3 = dataObject.Error) === null || _dataObject$Error3 === void 0 ? void 0 : _dataObject$Error3[target]) !== null && _dataObject$Error$tar !== void 0 ? _dataObject$Error$tar : dataObject[target];\n      output[name] = this.codec.createDeserializer().readSchema(member, value);\n    }\n    throw this.mixin.decorateServiceException(Object.assign(exception, errorMetadata, {\n      $fault: ns.getMergedTraits().error,\n      message\n    }, output), dataObject);\n  }\n  getDefaultContentType() {\n    return \"application/xml\";\n  }\n  hasUnstructuredPayloadBinding(ns) {\n    for (const [, member] of ns.structIterator()) {\n      if (member.getMergedTraits().httpPayload) {\n        return !(member.isStructSchema() || member.isMapSchema() || member.isListSchema());\n      }\n    }\n    return false;\n  }\n}","map":{"version":3,"names":["HttpBindingProtocol","HttpInterceptingShapeDeserializer","HttpInterceptingShapeSerializer","NormalizedSchema","TypeRegistry","ProtocolLib","loadRestXmlErrorCode","XmlCodec","AwsRestXmlProtocol","constructor","options","_defineProperty","settings","timestampFormat","useTrait","default","httpBindings","xmlNamespace","serviceNamespace","defaultNamespace","codec","serializer","createSerializer","deserializer","createDeserializer","getPayloadCodec","getShapeId","serializeRequest","operationSchema","input","context","request","inputSchema","of","headers","contentType","mixin","resolveRestContentType","getDefaultContentType","body","startsWith","hasUnstructuredPayloadBinding","deserializeResponse","response","handleError","dataObject","metadata","_loadRestXmlErrorCode","_ref","_ref2","_ref3","_dataObject$Error$mes","_dataObject$Error","_dataObject$Error2","_TypeRegistry$for$get","errorIdentifier","errorSchema","errorMetadata","getErrorSchemaOrThrowBaseException","ns","message","Error","Message","ErrorCtor","for","getErrorCtor","exception","deserializeHttpMessage","output","name","member","structIterator","_member$getMergedTrai","_dataObject$Error$tar","_dataObject$Error3","target","getMergedTraits","xmlName","value","readSchema","decorateServiceException","Object","assign","$fault","error","httpPayload","isStructSchema","isMapSchema","isListSchema"],"sources":["/home/rcts/Email-differ/Frontend/node_modules/@aws-sdk/core/dist-es/submodules/protocols/xml/AwsRestXmlProtocol.js"],"sourcesContent":["import { HttpBindingProtocol, HttpInterceptingShapeDeserializer, HttpInterceptingShapeSerializer, } from \"@smithy/core/protocols\";\nimport { NormalizedSchema, TypeRegistry } from \"@smithy/core/schema\";\nimport { ProtocolLib } from \"../ProtocolLib\";\nimport { loadRestXmlErrorCode } from \"./parseXmlBody\";\nimport { XmlCodec } from \"./XmlCodec\";\nexport class AwsRestXmlProtocol extends HttpBindingProtocol {\n    codec;\n    serializer;\n    deserializer;\n    mixin = new ProtocolLib();\n    constructor(options) {\n        super(options);\n        const settings = {\n            timestampFormat: {\n                useTrait: true,\n                default: 5,\n            },\n            httpBindings: true,\n            xmlNamespace: options.xmlNamespace,\n            serviceNamespace: options.defaultNamespace,\n        };\n        this.codec = new XmlCodec(settings);\n        this.serializer = new HttpInterceptingShapeSerializer(this.codec.createSerializer(), settings);\n        this.deserializer = new HttpInterceptingShapeDeserializer(this.codec.createDeserializer(), settings);\n    }\n    getPayloadCodec() {\n        return this.codec;\n    }\n    getShapeId() {\n        return \"aws.protocols#restXml\";\n    }\n    async serializeRequest(operationSchema, input, context) {\n        const request = await super.serializeRequest(operationSchema, input, context);\n        const inputSchema = NormalizedSchema.of(operationSchema.input);\n        if (!request.headers[\"content-type\"]) {\n            const contentType = this.mixin.resolveRestContentType(this.getDefaultContentType(), inputSchema);\n            if (contentType) {\n                request.headers[\"content-type\"] = contentType;\n            }\n        }\n        if (typeof request.body === \"string\" &&\n            request.headers[\"content-type\"] === this.getDefaultContentType() &&\n            !request.body.startsWith(\"<?xml \") &&\n            !this.hasUnstructuredPayloadBinding(inputSchema)) {\n            request.body = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>' + request.body;\n        }\n        return request;\n    }\n    async deserializeResponse(operationSchema, context, response) {\n        return super.deserializeResponse(operationSchema, context, response);\n    }\n    async handleError(operationSchema, context, response, dataObject, metadata) {\n        const errorIdentifier = loadRestXmlErrorCode(response, dataObject) ?? \"Unknown\";\n        const { errorSchema, errorMetadata } = await this.mixin.getErrorSchemaOrThrowBaseException(errorIdentifier, this.options.defaultNamespace, response, dataObject, metadata);\n        const ns = NormalizedSchema.of(errorSchema);\n        const message = dataObject.Error?.message ?? dataObject.Error?.Message ?? dataObject.message ?? dataObject.Message ?? \"Unknown\";\n        const ErrorCtor = TypeRegistry.for(errorSchema[1]).getErrorCtor(errorSchema) ?? Error;\n        const exception = new ErrorCtor(message);\n        await this.deserializeHttpMessage(errorSchema, context, response, dataObject);\n        const output = {};\n        for (const [name, member] of ns.structIterator()) {\n            const target = member.getMergedTraits().xmlName ?? name;\n            const value = dataObject.Error?.[target] ?? dataObject[target];\n            output[name] = this.codec.createDeserializer().readSchema(member, value);\n        }\n        throw this.mixin.decorateServiceException(Object.assign(exception, errorMetadata, {\n            $fault: ns.getMergedTraits().error,\n            message,\n        }, output), dataObject);\n    }\n    getDefaultContentType() {\n        return \"application/xml\";\n    }\n    hasUnstructuredPayloadBinding(ns) {\n        for (const [, member] of ns.structIterator()) {\n            if (member.getMergedTraits().httpPayload) {\n                return !(member.isStructSchema() || member.isMapSchema() || member.isListSchema());\n            }\n        }\n        return false;\n    }\n}\n"],"mappings":";AAAA,SAASA,mBAAmB,EAAEC,iCAAiC,EAAEC,+BAA+B,QAAS,wBAAwB;AACjI,SAASC,gBAAgB,EAAEC,YAAY,QAAQ,qBAAqB;AACpE,SAASC,WAAW,QAAQ,gBAAgB;AAC5C,SAASC,oBAAoB,QAAQ,gBAAgB;AACrD,SAASC,QAAQ,QAAQ,YAAY;AACrC,OAAO,MAAMC,kBAAkB,SAASR,mBAAmB,CAAC;EAKxDS,WAAWA,CAACC,OAAO,EAAE;IACjB,KAAK,CAACA,OAAO,CAAC;IAACC,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA,gBAFX,IAAIN,WAAW,CAAC,CAAC;IAGrB,MAAMO,QAAQ,GAAG;MACbC,eAAe,EAAE;QACbC,QAAQ,EAAE,IAAI;QACdC,OAAO,EAAE;MACb,CAAC;MACDC,YAAY,EAAE,IAAI;MAClBC,YAAY,EAAEP,OAAO,CAACO,YAAY;MAClCC,gBAAgB,EAAER,OAAO,CAACS;IAC9B,CAAC;IACD,IAAI,CAACC,KAAK,GAAG,IAAIb,QAAQ,CAACK,QAAQ,CAAC;IACnC,IAAI,CAACS,UAAU,GAAG,IAAInB,+BAA+B,CAAC,IAAI,CAACkB,KAAK,CAACE,gBAAgB,CAAC,CAAC,EAAEV,QAAQ,CAAC;IAC9F,IAAI,CAACW,YAAY,GAAG,IAAItB,iCAAiC,CAAC,IAAI,CAACmB,KAAK,CAACI,kBAAkB,CAAC,CAAC,EAAEZ,QAAQ,CAAC;EACxG;EACAa,eAAeA,CAAA,EAAG;IACd,OAAO,IAAI,CAACL,KAAK;EACrB;EACAM,UAAUA,CAAA,EAAG;IACT,OAAO,uBAAuB;EAClC;EACA,MAAMC,gBAAgBA,CAACC,eAAe,EAAEC,KAAK,EAAEC,OAAO,EAAE;IACpD,MAAMC,OAAO,GAAG,MAAM,KAAK,CAACJ,gBAAgB,CAACC,eAAe,EAAEC,KAAK,EAAEC,OAAO,CAAC;IAC7E,MAAME,WAAW,GAAG7B,gBAAgB,CAAC8B,EAAE,CAACL,eAAe,CAACC,KAAK,CAAC;IAC9D,IAAI,CAACE,OAAO,CAACG,OAAO,CAAC,cAAc,CAAC,EAAE;MAClC,MAAMC,WAAW,GAAG,IAAI,CAACC,KAAK,CAACC,sBAAsB,CAAC,IAAI,CAACC,qBAAqB,CAAC,CAAC,EAAEN,WAAW,CAAC;MAChG,IAAIG,WAAW,EAAE;QACbJ,OAAO,CAACG,OAAO,CAAC,cAAc,CAAC,GAAGC,WAAW;MACjD;IACJ;IACA,IAAI,OAAOJ,OAAO,CAACQ,IAAI,KAAK,QAAQ,IAChCR,OAAO,CAACG,OAAO,CAAC,cAAc,CAAC,KAAK,IAAI,CAACI,qBAAqB,CAAC,CAAC,IAChE,CAACP,OAAO,CAACQ,IAAI,CAACC,UAAU,CAAC,QAAQ,CAAC,IAClC,CAAC,IAAI,CAACC,6BAA6B,CAACT,WAAW,CAAC,EAAE;MAClDD,OAAO,CAACQ,IAAI,GAAG,wCAAwC,GAAGR,OAAO,CAACQ,IAAI;IAC1E;IACA,OAAOR,OAAO;EAClB;EACA,MAAMW,mBAAmBA,CAACd,eAAe,EAAEE,OAAO,EAAEa,QAAQ,EAAE;IAC1D,OAAO,KAAK,CAACD,mBAAmB,CAACd,eAAe,EAAEE,OAAO,EAAEa,QAAQ,CAAC;EACxE;EACA,MAAMC,WAAWA,CAAChB,eAAe,EAAEE,OAAO,EAAEa,QAAQ,EAAEE,UAAU,EAAEC,QAAQ,EAAE;IAAA,IAAAC,qBAAA,EAAAC,IAAA,EAAAC,KAAA,EAAAC,KAAA,EAAAC,qBAAA,EAAAC,iBAAA,EAAAC,kBAAA,EAAAC,qBAAA;IACxE,MAAMC,eAAe,IAAAR,qBAAA,GAAGzC,oBAAoB,CAACqC,QAAQ,EAAEE,UAAU,CAAC,cAAAE,qBAAA,cAAAA,qBAAA,GAAI,SAAS;IAC/E,MAAM;MAAES,WAAW;MAAEC;IAAc,CAAC,GAAG,MAAM,IAAI,CAACrB,KAAK,CAACsB,kCAAkC,CAACH,eAAe,EAAE,IAAI,CAAC7C,OAAO,CAACS,gBAAgB,EAAEwB,QAAQ,EAAEE,UAAU,EAAEC,QAAQ,CAAC;IAC1K,MAAMa,EAAE,GAAGxD,gBAAgB,CAAC8B,EAAE,CAACuB,WAAW,CAAC;IAC3C,MAAMI,OAAO,IAAAZ,IAAA,IAAAC,KAAA,IAAAC,KAAA,IAAAC,qBAAA,IAAAC,iBAAA,GAAGP,UAAU,CAACgB,KAAK,cAAAT,iBAAA,uBAAhBA,iBAAA,CAAkBQ,OAAO,cAAAT,qBAAA,cAAAA,qBAAA,IAAAE,kBAAA,GAAIR,UAAU,CAACgB,KAAK,cAAAR,kBAAA,uBAAhBA,kBAAA,CAAkBS,OAAO,cAAAZ,KAAA,cAAAA,KAAA,GAAIL,UAAU,CAACe,OAAO,cAAAX,KAAA,cAAAA,KAAA,GAAIJ,UAAU,CAACiB,OAAO,cAAAd,IAAA,cAAAA,IAAA,GAAI,SAAS;IAC/H,MAAMe,SAAS,IAAAT,qBAAA,GAAGlD,YAAY,CAAC4D,GAAG,CAACR,WAAW,CAAC,CAAC,CAAC,CAAC,CAACS,YAAY,CAACT,WAAW,CAAC,cAAAF,qBAAA,cAAAA,qBAAA,GAAIO,KAAK;IACrF,MAAMK,SAAS,GAAG,IAAIH,SAAS,CAACH,OAAO,CAAC;IACxC,MAAM,IAAI,CAACO,sBAAsB,CAACX,WAAW,EAAE1B,OAAO,EAAEa,QAAQ,EAAEE,UAAU,CAAC;IAC7E,MAAMuB,MAAM,GAAG,CAAC,CAAC;IACjB,KAAK,MAAM,CAACC,IAAI,EAAEC,MAAM,CAAC,IAAIX,EAAE,CAACY,cAAc,CAAC,CAAC,EAAE;MAAA,IAAAC,qBAAA,EAAAC,qBAAA,EAAAC,kBAAA;MAC9C,MAAMC,MAAM,IAAAH,qBAAA,GAAGF,MAAM,CAACM,eAAe,CAAC,CAAC,CAACC,OAAO,cAAAL,qBAAA,cAAAA,qBAAA,GAAIH,IAAI;MACvD,MAAMS,KAAK,IAAAL,qBAAA,IAAAC,kBAAA,GAAG7B,UAAU,CAACgB,KAAK,cAAAa,kBAAA,uBAAhBA,kBAAA,CAAmBC,MAAM,CAAC,cAAAF,qBAAA,cAAAA,qBAAA,GAAI5B,UAAU,CAAC8B,MAAM,CAAC;MAC9DP,MAAM,CAACC,IAAI,CAAC,GAAG,IAAI,CAACjD,KAAK,CAACI,kBAAkB,CAAC,CAAC,CAACuD,UAAU,CAACT,MAAM,EAAEQ,KAAK,CAAC;IAC5E;IACA,MAAM,IAAI,CAAC1C,KAAK,CAAC4C,wBAAwB,CAACC,MAAM,CAACC,MAAM,CAAChB,SAAS,EAAET,aAAa,EAAE;MAC9E0B,MAAM,EAAExB,EAAE,CAACiB,eAAe,CAAC,CAAC,CAACQ,KAAK;MAClCxB;IACJ,CAAC,EAAEQ,MAAM,CAAC,EAAEvB,UAAU,CAAC;EAC3B;EACAP,qBAAqBA,CAAA,EAAG;IACpB,OAAO,iBAAiB;EAC5B;EACAG,6BAA6BA,CAACkB,EAAE,EAAE;IAC9B,KAAK,MAAM,GAAGW,MAAM,CAAC,IAAIX,EAAE,CAACY,cAAc,CAAC,CAAC,EAAE;MAC1C,IAAID,MAAM,CAACM,eAAe,CAAC,CAAC,CAACS,WAAW,EAAE;QACtC,OAAO,EAAEf,MAAM,CAACgB,cAAc,CAAC,CAAC,IAAIhB,MAAM,CAACiB,WAAW,CAAC,CAAC,IAAIjB,MAAM,CAACkB,YAAY,CAAC,CAAC,CAAC;MACtF;IACJ;IACA,OAAO,KAAK;EAChB;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}